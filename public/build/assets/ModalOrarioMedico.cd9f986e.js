import{b as o,az as b,o as d,c as n,u as i,S as g,w as l,l as s,q as y,m,U as w,k as c,Z as M,a as D,v as _,y as k}from"./app.1031c8d8.js";import{b5 as u}from"./check_box.1b903203.js";import{_ as p}from"./date-box.86542e91.js";import"./number-box.98a3a792.js";import"./text-area.f8ed8fd5.js";import{D as h}from"./select-box.ecbcc0ce.js";import{a as v}from"./response.70bff4ea.js";import"./date_box.adac4a06.js";import"./select_box.e7ec30b3.js";import"./number_box.409c8157.js";const x=o("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),z={class:"fixed inset-0 z-50 overflow-y-auto"},$={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},C={key:0,class:"flex justify-center items-center"},E=o("svg",{class:"animate-spin h-5 w-5 text-gray-900",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),B=[E],H={key:1},j={class:"mt-2"},I={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},N={class:"mt-5 sm:mt-6 flex flex-col sm:flex-row sm:justify-around gap-4"},S=o("button",{class:"opacity-0 absolute bottom-0"},null,-1),U={props:["eventData"],emits:["update","store","close"],data(){return{fetching:!1,saving:!1,errors:null,orarioMedico:null,medici:[],ambulatori:[]}},computed:{disabledElement(){return this.saving},open(){return this.eventData!==null}},async created(){this.eventData.id?(this.fetching=!0,await axios.get(`api/sphere/orario-medico/${this.eventData.orario_medico_id}/edit`).then(a=>{this.orarioMedico=a.data.orario,this.medici=a.data.medici,this.ambulatori=a.data.ambulatori}).catch(a=>{this.$emit("close")}),this.fetching=!1):(this.fetching=!0,await axios.post("api/sphere/orario-medico/create",this.eventData).then(a=>{this.orarioMedico=a.data.orario,this.medici=a.data.medici,this.ambulatori=a.data.ambulatori}).catch(a=>{this.$emit("close")}),this.fetching=!1)},methods:{medicoItemTemplate(a){return'<div class="flex justify-between"><span class="truncate">'+a.ragione_sociale+"</span></div>"},ambulatorioItemTemplate(a){return'<div class="flex justify-between"><span class="truncate">'+a.nome+"</span></div>"},errorFor(a){return!!(this.errors!==null&&this.errors[a])},salva(){this.orarioMedico.orario_medico_id?this.update():this.store()},async update(){this.saving=!0,this.errors=null,await axios.put(`api/sphere/orario-medico/${this.orarioMedico.orario_medico_id}`,this.orarioMedico).then(a=>{this.$emit("update",a.data)}).catch(a=>{v(a)&&(this.errors=a.response.data.errors),this.saving=!1}),this.saving=!1},async store(){this.errors=null,this.saving=!0,await axios.post("api/sphere/orario-medico",this.orarioMedico).then(a=>{this.$emit("store",a.data),this.$emit("close")}).catch(a=>{v(a)&&(this.errors=a.response.data.errors),this.saving=!1}),this.saving=!1}}},J=Object.assign(U,{__name:"ModalOrarioMedico",setup(a){return(e,t)=>{const f=b("AlertErrors");return d(),n(i(g),{as:"template",show:e.open},{default:l(()=>[s(i(y),{as:"div",class:"relative z-50"},{default:l(()=>[s(i(m),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[x]),_:1}),o("div",z,[o("div",$,[s(i(m),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:l(()=>[s(i(w),{class:"relative transform rounded-lg bg-white px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl sm:p-6"},{default:l(()=>[e.fetching?(d(),c("div",C,B)):(d(),c("div",H,[o("div",null,[s(i(M),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900 text-center capitalize"},{default:l(()=>[D(_(e.orarioMedico.id?"Modifica":"Creazione")+" Orario Medico ",1)]),_:1}),o("div",j,[o("div",I,[s(i(p),{value:e.orarioMedico.startDate,"onUpdate:value":t[0]||(t[0]=r=>e.orarioMedico.startDate=r),type:"time","is-valid":!e.errorFor("startDate"),label:"Ora inizio",disabled:e.disabledElement,"display-format":"HH:mm",interval:15},null,8,["value","is-valid","disabled"]),s(i(p),{value:e.orarioMedico.endDate,"onUpdate:value":t[1]||(t[1]=r=>e.orarioMedico.endDate=r),type:"time","is-valid":!e.errorFor("endDate"),label:"Ora fine",disabled:e.disabledElement,"display-format":"HH:mm",interval:15},null,8,["value","is-valid","disabled"]),s(i(h),{value:e.orarioMedico.medico_id,"onUpdate:value":t[2]||(t[2]=r=>e.orarioMedico.medico_id=r),"data-source":e.medici,"value-expr":"id","search-enabled":!0,"display-expr":"ragione_sociale",label:"Medico","label-mode":"static",placeholder:"---","no-data-text":"Nessun medico selezionabile",disabled:e.medici.length===0||e.disabledElement,"drop-down-options":{maxHeight:"200px"},"item-template":e.medicoItemTemplate,"is-valid":!e.errorFor("medico_id")},null,8,["value","data-source","disabled","item-template","is-valid"]),s(i(h),{value:e.orarioMedico.resourceId,"onUpdate:value":t[3]||(t[3]=r=>e.orarioMedico.resourceId=r),"data-source":e.ambulatori,"value-expr":"id","search-enabled":!0,"display-expr":"ragione_sociale",label:"Ambulatorio","label-mode":"static",placeholder:"---","no-data-text":"Nessun medico selezionabile",disabled:e.ambulatori.length===0||e.disabledElement,"drop-down-options":{maxHeight:"200px"},"item-template":e.ambulatorioItemTemplate,"is-valid":!e.errorFor("medico_id")},null,8,["value","data-source","disabled","item-template","is-valid"])])])]),o("div",N,[s(i(u),{width:"100%",text:"Chiudi",type:"danger",icon:"close","styling-mode":"contained",disabled:e.saving,onClick:t[4]||(t[4]=r=>e.$emit("close"))},null,8,["disabled"]),s(i(u),{id:"saveButton",width:"100%",text:e.saving?"Salvataggio...":e.disabledElement?"Prenotazione gi\xE0 accettata":"Salva",icon:"save",type:"success","styling-mode":"contained",disabled:e.disabledElement||e.saving,onClick:t[5]||(t[5]=r=>e.salva())},null,8,["text","disabled"])])]))]),_:1})]),_:1})])]),S,e.errors?(d(),n(f,{key:0,errors:e.errors},null,8,["errors"])):k("",!0)]),_:1})]),_:1},8,["show"])}}});export{J as default};
