import{C as M,F as ze,be as ce,H as g,P as $,co as en,cp as tn,cq as nn,a as m,i as v,b as ee,bF as Ne,c,bH as an,A as C,ay as L,q as Fe,bK as sn,al as xe,l as E,B as Be,bO as de,$ as d,h as J,j as on,cr as rn,aY as ue,am as F,cs as ui,O as I,bD as ln,ct as nt,o as _e,y as N,M as x,ai as dn,aQ as un,bi as hn,a5 as cn,X as re,ad as hi,cd as _n,D as R,bC as ci,G as V,u as A,p as B,z as De,ax as Q,aA as Le,cu as pn,a3 as at,a7 as Te,bt as qe,as as Z,cv as mn,v as _i,cw as vn,Q as he,bP as fn,aZ as pi,T as Ee,m as U,K as Xe,a2 as mi,a1 as se,t as vi,s as ht,av as gn,k as Ye,aj as je,ah as Cn,R as fi,cx as gi,at as Ae,ak as st,bR as S,a_ as bn,bn as Ci,ba as Sn,bc as ae,bk as In,bl as yn,cy as bi,bv as Tn,_ as Si,cz as En,E as An,a4 as On,g as xn,bd as Bn,b2 as Dn,c2 as Ln,c3 as Mn,c4 as wn,aM as kn,aO as Rn,W as ct,cA as Nn,cB as Fn,cC as $n,cD as Pn,b0 as _t,a$ as Vn}from"./check_box.1b903203.js";import{s as Ii,i as Gn,P as ot,T as Wn,C as yi,b as Ti,j as Hn,e as Kn,k as pt,l as Un,A as zn}from"./select_box.e7ec30b3.js";import{S as mt,e as Cr,B as qn}from"./date_box.adac4a06.js";import"./number_box.409c8157.js";var Ei="dxdblclick",Xn="dxDblClick",vt=M(ze,Xn),ft=300,Yn=ce.inherit({ctor:function(){this._handlerCount=0,this._forgetLastClick()},_forgetLastClick:function(){this._firstClickTarget=null,this._lastClickTimeStamp=-ft},add:function(){this._handlerCount<=0&&g.on($.getDocument(),vt,this._clickHandler.bind(this)),this._handlerCount++},_clickHandler:function(t){var e=t.timeStamp||Date.now(),i=e-this._lastClickTimeStamp,n=i<0,a=!n&&i<ft;a?(en({type:Ei,target:tn(this._firstClickTarget,t.target),originalEvent:t}),this._forgetLastClick()):(this._firstClickTarget=t.target,this._lastClickTimeStamp=e)},remove:function(){this._handlerCount--,this._handlerCount<=0&&(this._forgetLastClick(),g.off($.getDocument(),vt))}});nn(Ei,new Yn);var jn=ce.inherit({ctor:function(){this._dataStructure=[],this._itemsCount=0,this._visibleItemsCount=0},_indexByKey:{},_convertItemsToNodes:function(t,e){var i=this;m(t,function(n,a){var s=v(e)?e:i._getParentId(a),o=i._convertItemToNode(a,s);i._dataStructure.push(o),i._checkForDuplicateId(o.internalFields.key),i._indexByKey[o.internalFields.key]=i._dataStructure.length-1,i._itemHasChildren(a)&&i._convertItemsToNodes(i._dataAccessors.getters.items(a),o.internalFields.key)})},_checkForDuplicateId:function(t){if(v(this._indexByKey[t]))throw ee.Error("E1040",t)},_getParentId:function(t){return this._dataType==="plain"?this._dataAccessors.getters.parentKey(t):void 0},_itemHasChildren:function(t){if(this._dataType!=="plain"){var e=this._dataAccessors.getters.items(t);return e&&e.length}},_getUniqueKey:function(t){var e=this._dataAccessors.getters.key,i=e(t),n=e&&(i||i===0)&&Ne(i);return n?i:this.getItemsCount()},_convertItemToNode:function(t,e){this._itemsCount++,t.visible!==!1&&this._visibleItemsCount++;var i={internalFields:{disabled:this._dataAccessors.getters.disabled(t,{defaultValue:!1}),expanded:this._dataAccessors.getters.expanded(t,{defaultValue:!1}),selected:this._dataAccessors.getters.selected(t,{defaultValue:!1}),key:this._getUniqueKey(t),parentKey:v(e)?e:this._rootValue,item:this._makeObjectFromPrimitive(t),childrenKeys:[]}};return c(i,t),delete i.items,i},setChildrenKeys:function(){var t=this;m(this._dataStructure,function(e,i){if(i.internalFields.parentKey!==t._rootValue){var n=t.getParentNode(i);n&&n.internalFields.childrenKeys.push(i.internalFields.key)}})},_makeObjectFromPrimitive:function(t){if(Ne(t)){var e=t;t={},this._dataAccessors.setters.key(t,e)}return t},_convertToPublicNode:function(t,e){if(!t)return null;var i={text:this._dataAccessors.getters.display(t),key:t.internalFields.key,selected:t.internalFields.selected,expanded:t.internalFields.expanded,disabled:t.internalFields.disabled,parent:e||null,itemData:t.internalFields.item,children:[],items:[]};return i.parent&&(i.parent.children.push(i),i.parent.items.push(i)),i},convertToPublicNodes:function(t,e){if(!t.length)return[];var i=this,n=[];return m(t,function(a,s){s=Ne(s)?i._getByKey(s):s;var o=i._convertToPublicNode(s,e);o.children=i.convertToPublicNodes(s.internalFields.childrenKeys,o),n.push(o),s.internalFields.publicNode=o}),n},setDataAccessors:function(t){this._dataAccessors=t},_getByKey:function(t){return this._dataStructure[this.getIndexByKey(t)]||null},getParentNode:function(t){return this._getByKey(t.internalFields.parentKey)},getByKey:function(t,e){if(e==null)return null;var i=null,n=this,a=function(s,o){return m(s,function(r,l){var u=l.internalFields&&l.internalFields.key||n._dataAccessors.getters.key(l);if(u.toString()===o.toString())return i=l,!1}),i};return a(t,e)},getItemsCount:function(){return this._itemsCount},getVisibleItemsCount:function(){return this._visibleItemsCount},updateIndexByKey:function(){var t=this;this._indexByKey={},m(this._dataStructure,function(e,i){t._checkForDuplicateId(i.internalFields.key),t._indexByKey[i.internalFields.key]=e})},updateChildrenKeys:function(){this._indexByKey={},this.removeChildrenKeys(),this.updateIndexByKey(),this.setChildrenKeys()},removeChildrenKeys:function(){this._indexByKey={},m(this._dataStructure,function(t,e){e.internalFields.childrenKeys=[]})},getIndexByKey:function(t){return this._indexByKey[t]},createPlainStructure:function(t,e,i){return this._itemsCount=0,this._visibleItemsCount=0,this._rootValue=e,this._dataType=i,this._indexByKey={},this._convertItemsToNodes(t),this.setChildrenKeys(),this._dataStructure}}),Y="expanded",K="selected",Zn="disabled";Ii.setEditorClass(an);var Jn=ce.inherit({ctor:function(t){this.options={},c(this.options,this._defaultOptions(),t),this.options.dataConverter.setDataAccessors(this.options.dataAccessors),this._selectedNodesKeys=[],this._expandedNodesKeys=[],this._dataStructure=[],this._createInternalDataStructure(),this.getTreeNodes()},setOption:function(t,e){this.options[t]=e,t==="recursiveSelection"&&this._updateSelection()},_defaultOptions:function(){return{dataAccessors:void 0,items:[],multipleSelection:!0,recursiveSelection:!1,recursiveExpansion:!1,rootValue:0,searchValue:"",dataType:"tree",searchMode:"contains",dataConverter:new jn,onNodeChanged:C,sort:null}},_createInternalDataStructure:function(){this._initialDataStructure=this.options.dataConverter.createPlainStructure(this.options.items,this.options.rootValue,this.options.dataType),this._dataStructure=this.options.searchValue.length?this.search(this.options.searchValue):this._initialDataStructure,this.options.dataConverter._dataStructure=this._dataStructure,this._updateSelection(),this._updateExpansion()},_updateSelection:function(){this.options.recursiveSelection&&(this._setChildrenSelection(),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(K)},_updateExpansion:function(t){this.options.recursiveExpansion&&(t?this._updateOneBranch(t):this._setParentExpansion()),this._expandedNodesKeys=this._updateNodesKeysArray(Y)},_updateNodesKeysArray:function(t){var e=this,i=[];return m(e._getDataBySelectionMode(),function(n,a){!e._isNodeVisible(a)||a.internalFields[t]&&(t===Y||e.options.multipleSelection?i.push(a.internalFields.key):(i.length&&e.toggleSelection(i[0],!1,!0),i=[a.internalFields.key]))}),i},_getDataBySelectionMode:function(){return this.options.multipleSelection?this.getData():this.getFullData()},_isNodeVisible:function(t){return t.internalFields.item.visible!==!1},_getByKey:function(t,e){return t===this._dataStructure?this.options.dataConverter._getByKey(e):this.options.dataConverter.getByKey(t,e)},_setChildrenSelection:function(){var t=this;m(this._dataStructure,function(e,i){if(!!i.internalFields.childrenKeys.length){var n=i.internalFields.selected;n===!0&&t._toggleChildrenSelection(i,n)}})},_setParentSelection:function(){var t=this;m(this._dataStructure,function(e,i){var n=t.options.dataConverter.getParentNode(i);n&&i.internalFields.parentKey!==t.options.rootValue&&t._iterateParents(i,function(a){var s=t._calculateSelectedState(a);t._setFieldState(a,K,s)})})},_setParentExpansion:function(){var t=this;m(this._dataStructure,function(e,i){!i.internalFields.expanded||t._updateOneBranch(i.internalFields.key)})},_updateOneBranch:function(t){var e=this,i=this.getNodeByKey(t);e._iterateParents(i,function(n){e._setFieldState(n,Y,!0)})},_iterateChildren:function(t,e,i,n){if(!!L(i)){var a=this,s=t.internalFields.key;n=n||[],n.indexOf(s)===-1&&(n.push(s),m(t.internalFields.childrenKeys,function(o,r){var l=a.getNodeByKey(r);i(l),l.internalFields.childrenKeys.length&&e&&a._iterateChildren(l,e,i,n)}))}},_iterateParents:function(t,e,i){if(!(t.internalFields.parentKey===this.options.rootValue||!L(e))){i=i||[];var n=t.internalFields.key;if(i.indexOf(n)===-1){i.push(n);var a=this.options.dataConverter.getParentNode(t);a&&(e(a),a.internalFields.parentKey!==this.options.rootValue&&this._iterateParents(a,e,i))}}},_calculateSelectedState:function(t){for(var e=t.internalFields.childrenKeys.length,i=0,n=0,a=!1,s=0;s<=e-1;s++){var o=this.getNodeByKey(t.internalFields.childrenKeys[s]),r=o.internalFields.item.visible===!1,l=o.internalFields.selected;if(r){n++;continue}l?i++:l===void 0&&(i+=.5)}return i&&(a=i===e-n?!0:void 0),a},_toggleChildrenSelection:function(t,e){var i=this;this._iterateChildren(t,!0,function(n){i._isNodeVisible(n)&&i._setFieldState(n,K,e)})},_setFieldState:function(t,e,i){t.internalFields[e]!==i&&(t.internalFields[e]=i,t.internalFields.publicNode&&(t.internalFields.publicNode[e]=i),this.options.dataAccessors.setters[e](t.internalFields.item,i),this.options.onNodeChanged(t))},_markChildren:function(t){var e=this;m(t,function(i,n){var a=e.getIndexByKey(n),s=e.getNodeByKey(n);e._dataStructure[a]=0,s.internalFields.childrenKeys.length&&e._markChildren(s.internalFields.childrenKeys)})},_removeNode:function(t){var e=this.getNodeByKey(t);this._dataStructure[this.getIndexByKey(t)]=0,this._markChildren(e.internalFields.childrenKeys);var i=this,n=0,a=c([],this._dataStructure);m(a,function(s,o){o||(i._dataStructure.splice(s-n,1),n++)})},_addNode:function(t){var e=this.options.dataConverter,i=e._convertItemToNode(t,this.options.dataAccessors.getters.parentKey(t));this._dataStructure=this._dataStructure.concat(i),this._initialDataStructure=this._initialDataStructure.concat(i),e._dataStructure=e._dataStructure.concat(i)},_updateFields:function(){this.options.dataConverter.updateChildrenKeys(),this._updateSelection(),this._updateExpansion()},getSelectedNodesKeys:function(){return this._selectedNodesKeys},getExpandedNodesKeys:function(){return this._expandedNodesKeys},getData:function(){return this._dataStructure},getFullData:function(){return this._initialDataStructure},getNodeByItem:function(t){var e=null;return m(this._dataStructure,function(i,n){if(n.internalFields.item===t)return e=n,!1}),e},getNodesByItems:function(t){var e=this,i=[];return m(t,function(n,a){var s=e.getNodeByItem(a);s&&i.push(s)}),i},getNodeByKey:function(t,e){return this._getByKey(e||this._getDataBySelectionMode(),t)},getTreeNodes:function(){return this.options.dataConverter.convertToPublicNodes(this.getRootNodes())},getItemsCount:function(){return this.options.dataConverter.getItemsCount()},getVisibleItemsCount:function(){return this.options.dataConverter.getVisibleItemsCount()},getPublicNode:function(t){return t.internalFields.publicNode},getRootNodes:function(){return this.getChildrenNodes(this.options.rootValue)},getChildrenNodes:function(t){return Fe(this._dataStructure).filter(["internalFields.parentKey",t]).toArray()},getIndexByKey:function(t){return this.options.dataConverter.getIndexByKey(t)},addItem:function(t){this._addNode(t),this._updateFields()},removeItem:function(t){this._removeNode(t),this._updateFields()},toggleSelection:function(t,e,i){var n=this._isSingleModeUnselect(e),a=this._getByKey(i||n?this._initialDataStructure:this._dataStructure,t);this._setFieldState(a,K,e),this.options.recursiveSelection&&!i&&(e?this._setChildrenSelection():this._toggleChildrenSelection(a,e),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(K)},_isSingleModeUnselect:function(t){return!this.options.multipleSelection&&!t},toggleNodeDisabledState:function(t,e){var i=this.getNodeByKey(t);this._setFieldState(i,Zn,e)},toggleSelectAll:function(t){if(!!v(t)){var e=this,i=e._selectedNodesKeys[e._selectedNodesKeys.length-1],n=e._isSingleModeUnselect(t)?this._initialDataStructure:this._dataStructure;m(n,function(a,s){!e._isNodeVisible(s)||e._setFieldState(s,K,t)}),e._selectedNodesKeys=e._updateNodesKeysArray(K),!t&&e.options.selectionRequired&&e.toggleSelection(i,!0)}},isAllSelected:function(){return this.getSelectedNodesKeys().length?this.getSelectedNodesKeys().length===this.getVisibleItemsCount()?!0:void 0:!1},toggleExpansion:function(t,e){var i=this.getNodeByKey(t);this._setFieldState(i,Y,e),e&&this._updateExpansion(t),this._expandedNodesKeys=this._updateNodesKeysArray(Y)},isFiltered:function(t){return!this.options.searchValue.length||!!this._filterDataStructure(this.options.searchValue,[t]).length},_createCriteria:function(t,e,i){var n=[];return Array.isArray(t)?(m(t,function(a,s){n.push([s,i,e],"or")}),n.pop(),n):[t,i,e]},_filterDataStructure:function(t,e){var i=this.options.searchExpr||this.options.dataAccessors.getters.display,n=Ii.getOperationBySearchMode(this.options.searchMode),a=this._createCriteria(i,t,n);return e=e||this._initialDataStructure,Fe(e).filter(a).toArray()},search:function(t){var e=this,i=this._filterDataStructure(t),n=this.options.dataConverter;return function a(s,o){for(var r=s.length;o<r;){var l=s[o];if(l.internalFields.parentKey===e.options.rootValue){o++;continue}var u=n.getParentNode(l);if(!u){ee.log("W1007",l.internalFields.parentKey,l.internalFields.key),o++;continue}if(u.internalFields.expanded||e._setFieldState(u,Y,!0),s.includes(u)){o++;continue}s.splice(o,0,u),a(s,o)}}(i,0),this.options.sort&&(i=sn.queryByOptions(Fe(i),{sort:this.options.sort}).toArray()),n._indexByKey={},m(i,function(a,s){s.internalFields.childrenKeys=[],n._indexByKey[s.internalFields.key]=a}),n._dataStructure=i,n.setChildrenKeys(),n._dataStructure}}),Qn="dx-state-disabled",ea=xe.inherit({_getDefaultOptions:function(){return c(this.callBase(),{keyExpr:"id",displayExpr:"text",selectedExpr:"selected",disabledExpr:"disabled",itemsExpr:"items",hoverStateEnabled:!0,parentIdExpr:"parentId",expandedExpr:"expanded"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return E.real().deviceType==="desktop"&&!E.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this._initAccessors(),this._initDataAdapter(),this._initDynamicTemplates()},_initDataSource:function(){this.callBase(),this._dataSource&&this._dataSource.paginate(!1)},_initDataAdapter:function(){var t=this._createDataAdapterAccessors();this._dataAdapter=new Jn(c({dataAccessors:{getters:t.getters,setters:t.setters},items:this.option("items")},this._getDataAdapterOptions()))},_getDataAdapterOptions:C,_initDynamicTemplates:function(){var t=this;this._templateManager.addDefaultTemplates({item:new Be(function(e,i){e.html(i.html).append(this._getIconContainer(i)).append(this._getTextContainer(i)).append(this._getPopoutContainer(i)),t._addContentClasses(i,e.parent())}.bind(this),["text","html","items","icon"],this.option("integrationOptions.watchMethod"),{text:this._displayGetter,items:this._itemsGetter})})},_getIconContainer:function(t){return t.icon?de(t.icon):void 0},_getTextContainer:function(t){return d("<span>").text(t.text)},_getPopoutContainer:C,_addContentClasses:C,_initAccessors:function(){var t=this;m(this._getAccessors(),function(e,i){t._compileAccessor(i)}),this._compileDisplayGetter()},_getAccessors:function(){return["key","selected","items","disabled","parentId","expanded"]},_getChildNodes:function(t){var e=this,i=[];return m(t.internalFields.childrenKeys,function(n,a){var s=e._dataAdapter.getNodeByKey(a);i.push(s)}),i},_hasChildren:function(t){return t&&t.internalFields.childrenKeys.length},_compileAccessor:function(t){var e="_"+t+"Getter",i="_"+t+"Setter",n=this.option(t+"Expr");if(n){if(L(n)){this[i]=function(a,s){a[n()]=s},this[e]=function(a){return a[n()]};return}}else{this[e]=C,this[i]=C;return}this[e]=J(n),this[i]=on(n)},_createDataAdapterAccessors:function(){var t=this,e={getters:{},setters:{}};return m(this._getAccessors(),function(i,n){var a="_"+n+"Getter",s="_"+n+"Setter",o=n==="parentId"?"parentKey":n;e.getters[o]=t[a],e.setters[o]=t[s]}),e.getters.display=this._displayGetter?this._displayGetter:i=>i.text,e},_initMarkup:function(){this.callBase(),this._addWidgetClass()},_addWidgetClass:function(){this._focusTarget().addClass(this._widgetClass())},_widgetClass:C,_renderItemFrame:function(t,e){var i=this.callBase.apply(this,arguments);return i.toggleClass(Qn,!!this._disabledGetter(e)),i},_optionChanged:function(t){switch(t.name){case"displayExpr":case"keyExpr":this._initAccessors(),this._initDynamicTemplates(),this.repaint();break;case"itemsExpr":case"selectedExpr":case"disabledExpr":case"expandedExpr":case"parentIdExpr":this._initAccessors(),this._initDataAdapter(),this.repaint();break;case"items":this._initDataAdapter(),this.callBase(t);break;default:this.callBase(t)}}});class ta extends rn{_getPlainItems(){return ue(this._collectionWidget.option("items"),function e(i){return i.items?[i].concat(ue(i.items,e)):i})}_stringifyItem(e){return JSON.stringify(e,(i,n)=>i==="template"?this._getTemplateString(n):n)}_getTemplateString(e){var i;return typeof e=="object"?i=d(e).text():i=e.toString(),i}}var pe="dx-menu",ia=pe+"-no-icons",na="dx-menu-base",k=pe+"-item",aa=k+"-content",$e=k+"-selected",gt=k+"-wrapper",sa=pe+"-items-container",oa=k+"-expanded",ra=pe+"-separator",la=pe+"-last-group-item",da=k+"-has-text",ua=k+"-has-icon",ha=k+"-has-submenu",Ai=k+"-popout",ca=Ai+"-container",_a=k+"-text",pa="single",ma={show:50,hide:300};class Oi extends ea{_getDefaultOptions(){return c(super._getDefaultOptions(),{items:[],cssClass:"",activeStateEnabled:!0,showSubmenuMode:{name:"onHover",delay:{show:50,hide:300}},animation:{show:{type:"fade",from:0,to:1,duration:100},hide:{type:"fade",from:1,to:0,duration:100}},selectByClick:!1,focusOnSelectedItem:!1,keyExpr:null,_itemAttributes:{role:"menuitem"},useInkRipple:!1})}_itemDataKey(){return"dxMenuItemDataKey"}_itemClass(){return k}_setAriaSelected(){}_selectedItemClass(){return $e}_widgetClass(){return na}_focusTarget(){return this._itemContainer()}_clean(){this.option("focusedElement",null),super._clean()}_supportedKeys(){return c(super._supportedKeys(),{space:()=>{var e=d(this.option("focusedElement"));!e.length||!this._isSelectionEnabled()||this.selectItem(e[0])},pageUp:C,pageDown:C})}_isSelectionEnabled(){return this.option("selectionMode")===pa}_init(){this._activeStateUnit=".".concat(k),super._init(),this._renderSelectedItem(),this._initActions()}_getTextContainer(e){var i=e.text,n=d("<span>").addClass(_a),a=F(e)?i:String(e);return i&&n.text(a)}_getPopoutContainer(e){var i=e.items,n;if(i&&i.length){var a=d("<div>").addClass(Ai);n=d("<span>").addClass(ca).append(a)}return n}_getDataAdapterOptions(){return{rootValue:0,multipleSelection:!1,recursiveSelection:!1,recursiveExpansion:!1,searchValue:""}}_selectByItem(e){if(!!e){var i=this._dataAdapter.getNodeByItem(e);this._dataAdapter.toggleSelection(i.internalFields.key,!0)}}_renderSelectedItem(){var e=this._dataAdapter.getSelectedNodesKeys(),i=e.length&&e[0],n=this.option("selectedItem");if(!i){this._selectByItem(n);return}var a=this._dataAdapter.getNodeByKey(i);if(a.selectable!==!1){if(!n){this.option("selectedItem",a.internalFields.item);return}n!==a.internalFields.item&&(this._dataAdapter.toggleSelection(i,!1),this._selectByItem(n))}}_initActions(){}_initMarkup(){super._initMarkup(),this.option("useInkRipple")&&this._renderInkRipple()}_renderInkRipple(){this._inkRipple=ui()}_toggleActiveState(e,i,n){if(super._toggleActiveState.apply(this,arguments),!!this._inkRipple){var a={element:e,event:n};i?this._inkRipple.showWave(a):this._inkRipple.hideWave(a)}}_getShowSubmenuMode(){var e=this.option("showSubmenuMode");return e=I(e)?e.name:e,this._isDesktopDevice()?e:"onClick"}_initSelectedItems(){}_isDesktopDevice(){return E.real().deviceType==="desktop"}_initEditStrategy(){var e=ta;this._editStrategy=new e(this)}_addCustomCssClass(e){e.addClass(this.option("cssClass"))}_itemWrapperSelector(){return".".concat(gt)}_hoverStartHandler(e){var i=this._getItemElementByEventArgs(e);!i||this._isItemDisabled(i)||(e.stopPropagation(),this._getShowSubmenuMode()==="onHover"&&(clearTimeout(this._showSubmenusTimeout),this._showSubmenusTimeout=setTimeout(this._showSubmenu.bind(this,i),this._getSubmenuDelay("show"))))}_getAvailableItems(e){return super._getAvailableItems(e).filter(function(){return d(this).css("visibility")!=="hidden"})}_isItemDisabled(e){return this._disabledGetter(e.data(this._itemDataKey()))}_showSubmenu(e){this._addExpandedClass(e)}_addExpandedClass(e){d(e).addClass(oa)}_getSubmenuDelay(e){var{delay:i}=this.option("showSubmenuMode");return v(i)?I(i)?i[e]:i:ma[e]}_getItemElementByEventArgs(e){var i=d(e.target);if(i.hasClass(this._itemClass())||i.get(0)===e.currentTarget)return i;for(;!i.hasClass(this._itemClass());)if(i=i.parent(),i.hasClass("dx-submenu"))return null;return i}_hoverEndHandler(){clearTimeout(this._showSubmenusTimeout)}_hasSubmenu(e){return e&&e.internalFields.childrenKeys.length}_renderContentImpl(){this._renderItems(this._dataAdapter.getRootNodes())}_renderItems(e,i){if(e.length){this.hasIcons=!1;var n=this._renderContainer(this.$element(),i),a=-1,s=-1;m(e,(o,r)=>{var l=r.visible!==!1;l&&a<0&&(a=o);var u=a<o&&(r.beginGroup||o===s);u&&(s=l?o:o+1),o===s&&a<o&&this._renderSeparator(n),this._renderItem(o,r,n)}),this.hasIcons||n.addClass(ia)}}_renderContainer(e){var i=d("<ul>");return this.setAria("role","none",i),i.appendTo(e).addClass(sa)}_createDOMElement(e){var i=d("<li>");return this.setAria("role","none",i),i.appendTo(e).addClass(gt)}_renderItem(e,i,n,a){var s=this.option("items"),o=a||this._createDOMElement(n);s[e+1]&&s[e+1].beginGroup&&o.addClass(la);var r=super._renderItem(e,i.internalFields.item,o);i.internalFields.item===this.option("selectedItem")&&r.addClass($e),r.attr("tabIndex",-1),this._hasSubmenu(i)&&this.setAria("haspopup","true",r)}_renderItemFrame(e,i,n){var a=n.children(".".concat(k));return a.length?a:super._renderItemFrame.apply(this,arguments)}_refreshItem(e,i){var n=this._dataAdapter.getNodeByItem(i),a=e.data(this._itemIndexKey()),s=e.closest("ul"),o=e.closest("li");this._renderItem(a,n,s,o)}_addContentClasses(e,i){var n=e.text?!!e.text.length:!1,a=!!e.icon,s=e.items?!!e.items.length:!1;i.toggleClass(da,n),i.toggleClass(ua,a),this.hasIcons||(this.hasIcons=a),i.toggleClass(ha,s)}_getItemContent(e){var i=super._getItemContent(e);return i.length||(i=e.children(".".concat(aa))),i}_postprocessRenderItem(e){var i=d(e.itemElement),n=this._dataAdapter.getSelectedNodesKeys();if(!n.length||!this._selectedGetter(e.itemData)||!this._isItemSelectable(e.itemData)){this._setAriaSelected(i,"false");return}var a=this._dataAdapter.getNodeByItem(e.itemData);a.internalFields.key===n[0]?(i.addClass(this._selectedItemClass()),this._setAriaSelected(i,"true")):this._setAriaSelected(i,"false")}_isItemSelectable(e){return e.selectable!==!1}_renderSeparator(e){d("<li>").appendTo(e).addClass(ra)}_itemClickHandler(e){if(!e._skipHandling){var i=this._createAction(this._updateSubmenuVisibilityOnClick.bind(this));this._itemDXEventHandler(e,"onItemClick",{},{afterExecute:i.bind(this)}),e._skipHandling=!0}}_updateSubmenuVisibilityOnClick(e){this._updateSelectedItemOnClick(e),this._getShowSubmenuMode()==="onClick"&&this._addExpandedClass(e.args[0].itemElement)}_updateSelectedItemOnClick(e){var i=e.args?e.args[0]:e;if(!!this._isItemSelectionAllowed(i.itemData)){var n=this._dataAdapter.getSelectedNodesKeys(),a=n.length&&this._dataAdapter.getNodeByKey(n[0]);a&&this._toggleItemSelection(a,!1),!a||a.internalFields.item!==i.itemData?this.selectItem(i.itemData):(this._fireSelectionChangeEvent(null,this.option("selectedItem")),this._setOptionWithoutOptionChange("selectedItem",null))}}_isItemSelectionAllowed(e){var i=this._isSelectionEnabled()&&this.option("selectByClick");return!this._isContainerEmpty()&&i&&this._isItemSelectable(e)&&!this._itemsGetter(e)}_isContainerEmpty(){return this._itemContainer().is(":empty")}_syncSelectionOptions(){return ln()}_optionChanged(e){switch(e.name){case"showSubmenuMode":break;case"selectedItem":var i=this._dataAdapter.getNodeByItem(e.value),n=this._dataAdapter.getSelectedNodesKeys()[0];if(i&&i.internalFields.key!==n){if(i.selectable===!1)break;n&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(n),!1),this._toggleItemSelection(i,!0),this._updateSelectedItems()}break;case"cssClass":case"position":case"selectByClick":case"animation":case"useInkRipple":this._invalidate();break;default:super._optionChanged(e)}}_toggleItemSelection(e,i){var n=this._getElementByItem(e.internalFields.item);n&&d(n).toggleClass($e),this._dataAdapter.toggleSelection(e.internalFields.key,i)}_getElementByItem(e){var i;return m(this._itemElements(),(n,a)=>d(a).data(this._itemDataKey())!==e?!0:(i=a,!1)),i}_updateSelectedItems(e,i){(e||i)&&this._fireSelectionChangeEvent(i,e)}_fireSelectionChangeEvent(e,i){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:[e],removedItems:[i]})}selectItem(e){var i=e.nodeType?this._getItemData(e):e,n=this._dataAdapter.getSelectedNodesKeys()[0],a=this.option("selectedItem"),s=this._dataAdapter.getNodeByItem(i);s.internalFields.key!==n&&(n&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(n),!1),this._toggleItemSelection(s,!0),this._updateSelectedItems(a,i),this._setOptionWithoutOptionChange("selectedItem",i))}unselectItem(e){var i=e.nodeType?this._getItemData(e):e,n=this._dataAdapter.getNodeByItem(i),a=this.option("selectedItem");n.internalFields.selected&&(this._toggleItemSelection(n,!1),this._updateSelectedItems(a,null),this._setOptionWithoutOptionChange("selectedItem",null))}}Oi.ItemClass=nt;var xi="dx-menu",le=xi+"-item",j=le+"-expanded",va="dx-menu-phone-overlay",be=xi+"-items-container",Ct=le+"-wrapper",O="dx-submenu",fa="dx-context-menu",ga="dx-has-context-menu",Ca="dx-state-disabled",ba="dx-state-focused",bt="dx-state-hover",Sa="dx-overlay-content",Bi="up",Di="down",Ia="left",ya="right",Li="first",Mi="last",St=["onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu"],Ta=[Bi,Di,Li,Mi],It="dxcontextmenu",Ea=_e();class wi extends Oi{getShowEvent(e){var i=null;return I(e)?e.name!==null&&(i=e.name||It):i=e,i}getShowDelay(e){return I(e)&&e.delay}_getDefaultOptions(){return c(super._getDefaultOptions(),{showEvent:It,hideOnOutsideClick:!0,position:{at:"top left",my:"top left"},onShowing:null,onShown:null,onSubmenuCreated:null,onHiding:null,onHidden:null,onPositioning:null,submenuDirection:"auto",visible:!1,target:void 0,onLeftFirstItem:null,onLeftLastItem:null,onCloseRootSubmenu:null,onExpandLastSubmenu:null})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>!N(),options:{animation:null}}])}_setDeprecatedOptions(){super._setDeprecatedOptions(),c(this._deprecatedOptions,{closeOnOutsideClick:{since:"22.2",alias:"hideOnOutsideClick"}})}_initActions(){this._actions={},m(St,(e,i)=>{this._actions[i]=this._createActionByOption(i)||C})}_setOptionsByReference(){super._setOptionsByReference(),c(this._optionsByReference,{animation:!0,selectedItem:!0})}_focusInHandler(){}_itemContainer(){return this._overlay?this._overlay.$content():d()}_eventBindingTarget(){return this._itemContainer()}itemsContainer(){return this._overlay?this._overlay.$content():void 0}_supportedKeys(){return c(super._supportedKeys(),{space:()=>{var e=d(this.option("focusedElement"));this.hide(),!(!e.length||!this._isSelectionEnabled())&&this.selectItem(e[0])},escape:this.hide})}_getActiveItem(){var e=this._getAvailableItems(),i=e.filter(".".concat(ba)),n=e.filter(".".concat(bt)),a=n.closest(".".concat(be));return a.find(".".concat(le)).index(i)>=0?i:n.length?n:super._getActiveItem()}_moveFocus(e){var i=this._getItemsByLocation(e),n=this._getActiveItem(!0),a=this.itemsContainer().find(".".concat(bt)),s=d(this.option("focusedElement")),o=!!(s.length||a.length),r;switch(e){case Bi:r=o?this._prevItem(i):n,this._setFocusedElement(r),n.is(i.first())&&this._actions.onLeftFirstItem(n);break;case Di:r=o?this._nextItem(i):n,this._setFocusedElement(r),n.is(i.last())&&this._actions.onLeftLastItem(n);break;case ya:r=this.option("rtlEnabled")?this._hideSubmenuHandler():this._expandSubmenuHandler(i,e),this._setFocusedElement(r);break;case Ia:r=this.option("rtlEnabled")?this._expandSubmenuHandler(i,e):this._hideSubmenuHandler(),this._setFocusedElement(r);break;case Li:r=i.first(),this._setFocusedElement(r);break;case Mi:r=i.last(),this._setFocusedElement(r);break;default:return super._moveFocus(e)}}_setFocusedElement(e){e&&e.length!==0&&this.option("focusedElement",x(e))}_getItemsByLocation(e){var i=this._getActiveItem(!0),n;return Ta.includes(e)&&(n=i.closest(".".concat(be)).children().children()),n=this._getAvailableItems(n),n}_getAriaTarget(){return this.$element()}_refreshActiveDescendant(){if(v(this._overlay)){var e=this._overlay.$content();super._refreshActiveDescendant(e)}}_hideSubmenuHandler(){var e=this._getActiveItem(!0),i=e.parents(".".concat(j)).first();return i.length?(this._hideSubmenusOnSameLevel(i),this._hideSubmenu(e.closest(".".concat(O))),i):(this._actions.onCloseRootSubmenu(e),e)}_expandSubmenuHandler(e,i){var n=this._getActiveItem(!0),a=this._getItemData(n),s=this._dataAdapter.getNodeByItem(a),o=this._hasSubmenu(s),r=n.children(".".concat(O));if(o&&!n.hasClass(Ca))return(!r.length||r.css("visibility")==="hidden")&&this._showSubmenu(n),this._nextItem(this._getItemsByLocation(i));this._actions.onExpandLastSubmenu(n)}_clean(){this._overlay&&(this._overlay.$element().remove(),this._overlay=null),this._detachShowContextMenuEvents(this._getTarget()),super._clean()}_initMarkup(){this.$element().addClass(ga),super._initMarkup()}_render(){super._render(),this._renderVisibility(this.option("visible")),this._addWidgetClass()}_renderContentImpl(){this._detachShowContextMenuEvents(this._getTarget()),this._attachShowContextMenuEvents()}_attachKeyboardEvents(){!this._keyboardListenerId&&this._focusTarget().length&&super._attachKeyboardEvents()}_renderContextMenuOverlay(){if(!this._overlay){var e=this._getOverlayOptions();this._overlay=this._createComponent(d("<div>").appendTo(this._$element),dn,e);var i=this._overlay.$content();i.addClass(fa),this._addCustomCssClass(i),this._addPlatformDependentClass(i),this._attachContextMenuEvent()}}preventShowingDefaultContextMenuAboveOverlay(){var e=this._itemContainer(),i=M(un,this.NAME);g.off(e,i,".".concat(O)),g.on(e,i,".".concat(O),(n=>{n.stopPropagation(),n.preventDefault(),g.off(e,i,".".concat(O))}).bind(this))}_itemContextMenuHandler(e){super._itemContextMenuHandler(e),e.stopPropagation()}_addPlatformDependentClass(e){E.current().phone&&e.addClass(va)}_detachShowContextMenuEvents(e){var i=this.getShowEvent(this.option("showEvent"));if(!!i){var n=M(i,this.NAME);this._showContextMenuEventHandler?g.off($.getDocument(),n,e,this._showContextMenuEventHandler):g.off(d(e),n)}}_attachShowContextMenuEvents(){var e=this._getTarget(),i=this.getShowEvent(this.option("showEvent"));if(!!i){var n=M(i,this.NAME),a=this._createAction(o=>{var r=this.getShowDelay(this.option("showEvent"));r?setTimeout(()=>this._show(o.event),r):this._show(o.event)},{validatingTargetName:"target"}),s=o=>a({event:o,target:d(o.currentTarget)});a=this._createAction(a),hn(e)||e.nodeType||cn(e)?(this._showContextMenuEventHandler=void 0,g.on(e,n,s)):(this._showContextMenuEventHandler=s,g.on($.getDocument(),n,e,this._showContextMenuEventHandler))}}_hoverEndHandler(e){super._hoverEndHandler(e),e.stopPropagation()}_renderDimensions(){}_renderContainer(e,i){var n=i||this._itemContainer();e=d("<div>"),e.appendTo(n).addClass(O).css("visibility",i?"hidden":"visible"),e.parent().hasClass(Sa)||this._addCustomCssClass(e);var a=super._renderContainer(e);return i?a:this.option("width")?a.css("minWidth",this.option("width")):this.option("height")?a.css("minHeight",this.option("height")):a}_renderSubmenuItems(e,i){this._renderItems(this._getChildNodes(e),i),this._actions.onSubmenuCreated({itemElement:x(i),itemData:e.internalFields.item,submenuElement:x(i.children(".".concat(O)))})}_getOverlayOptions(){var e=this.option("position"),i={focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),innerOverlay:!0,hideOnOutsideClick:n=>this._hideOnOutsideClickHandler(n),propagateOutsideClick:!0,hideOnParentScroll:!0,deferRendering:!1,position:{at:e.at,my:e.my,of:this._getTarget(),collision:"flipfit"},shading:!1,showTitle:!1,height:"auto",width:"auto",onShown:this._overlayShownActionHandler.bind(this),onHiding:this._overlayHidingActionHandler.bind(this),onHidden:this._overlayHiddenActionHandler.bind(this),visualContainer:Ea};return i}_overlayShownActionHandler(e){this._actions.onShown(e)}_overlayHidingActionHandler(e){this._actions.onHiding(e),e.cancel||(this._hideAllShownSubmenus(),this._setOptionWithoutOptionChange("visible",!1))}_overlayHiddenActionHandler(e){this._actions.onHidden(e)}_shouldHideOnOutsideClick(e){var{closeOnOutsideClick:i,hideOnOutsideClick:n}=this.option();return L(n)?n(e):L(i)?i(e):n||i}_hideOnOutsideClickHandler(e){if(!this._shouldHideOnOutsideClick(e))return!1;if($.isDocument(e.target))return!0;var i=this._getActiveItemsContainer(e.target),n=this._getItemsContainers(),a=this._searchActiveItem(e.target),s=this.$element().parents(".".concat(le)),o=a[0]===s[0]&&a.length&&s.length,r=this._isIncludeOverlay(i,n)&&a.length;return r||o?(this._getShowSubmenuMode()==="onClick"&&this._hideAllShownChildSubmenus(a),!1):!0}_getActiveItemsContainer(e){return d(e).closest(".".concat(be))}_getItemsContainers(){return this._overlay.$content().find(".".concat(be))}_searchActiveItem(e){return d(e).closest(".".concat(le)).eq(0)}_isIncludeOverlay(e,i){var n=!1;return m(i,(a,s)=>{e.is(s)&&!n&&(n=!0)}),n}_hideAllShownChildSubmenus(e){var i=e.find(".".concat(O)),n=c([],this._shownSubmenus);i.length>0&&m(n,(a,s)=>{var o=this._searchActiveItem(s.context).parent();o.parent().is(e.parent().parent())&&!o.is(e.parent())&&this._hideSubmenu(s)})}_showSubmenu(e){var i=this._dataAdapter.getNodeByItem(this._getItemData(e));if(this._hideSubmenusOnSameLevel(e),!!this._hasSubmenu(i)){var n=e.children(".".concat(O)),a=n.length;super._showSubmenu(e),a||this._renderSubmenuItems(i,e),this._isSubmenuVisible(n)||this._drawSubmenu(e)}}_hideSubmenusOnSameLevel(e){var i=e.parent(".".concat(Ct)).siblings().find(".".concat(j));i.length&&(i.removeClass(j),this._hideSubmenu(i.find(".".concat(O))))}_hideSubmenuGroup(e){this._isSubmenuVisible(e)&&this._hideSubmenuCore(e)}_isSubmenuVisible(e){return e.css("visibility")==="visible"}_drawSubmenu(e){var i=this.option("animation")?this.option("animation").show:{},n=e.children(".".concat(O)),a=this._getSubmenuPosition(e);this._overlay&&this._overlay.option("visible")&&(v(this._shownSubmenus)||(this._shownSubmenus=[]),this._shownSubmenus.includes(n)||this._shownSubmenus.push(n),i&&re.stop(n),hi.setup(n,a),i&&(F(i.to)&&(i.to.position=a),this._animate(n,i)),n.css("visibility","visible"))}_animate(e,i){re.animate(e,i)}_getSubmenuPosition(e){var i=this.option("submenuDirection").toLowerCase(),n=e.parent(".".concat(Ct)),a={collision:"flip",of:n,offset:{h:0,v:-1}};switch(i){case"left":a.at="left top",a.my="right top";break;case"right":a.at="right top",a.my="left top";break;default:this.option("rtlEnabled")?(a.at="left top",a.my="right top"):(a.at="right top",a.my="left top")}return a}_updateSubmenuVisibilityOnClick(e){if(!!e.args.length){var i=e.args[0].itemData,n=this._dataAdapter.getNodeByItem(i);if(!!n){var a=d(e.args[0].itemElement),s=a.find(".".concat(O)),o=this._hasSubmenu(n)&&!s.length;if(o&&(this._renderSubmenuItems(n,a),s=a.find(".".concat(O))),!(a.context===s.context&&s.css("visibility")==="visible")){this._updateSelectedItemOnClick(e);var r=i&&i.closeMenuOnClick===!1;if(!(!i||i.disabled||r))if(s.length===0){var l=d(a.parents(".".concat(O))[0]);this._hideSubmenu(l),!e.canceled&&this._overlay&&this._overlay.option("visible")&&this.option("visible",!1)}else this._shownSubmenus&&this._shownSubmenus.length>0&&this._shownSubmenus[0].is(s)&&this._hideSubmenu(s),this._showSubmenu(a)}}}}_hideSubmenu(e){var i=c([],this._shownSubmenus);m(i,(n,a)=>{(e.is(a)||_n(e[0],a[0]))&&(a.parent().removeClass(j),this._hideSubmenuCore(a))})}_hideSubmenuCore(e){var i=this._shownSubmenus.indexOf(e),n=this.option("animation")?this.option("animation").hide:null;i>=0&&this._shownSubmenus.splice(i,1),this._stopAnimate(e),n&&this._animate(e,n),e.css("visibility","hidden")}_stopAnimate(e){re.stop(e,!0)}_hideAllShownSubmenus(){var e=c([],this._shownSubmenus),i=this._overlay.$content().find(".".concat(j));i.removeClass(j),m(e,(n,a)=>{this._hideSubmenu(a)})}_visibilityChanged(e){e&&this._renderContentImpl()}_optionChanged(e){if(St.includes(e.name)){this._initActions();return}switch(e.name){case"visible":this._renderVisibility(e.value);break;case"showEvent":case"position":case"submenuDirection":this._invalidate();break;case"target":e.previousValue&&this._detachShowContextMenuEvents(e.previousValue),this._invalidate();break;case"closeOnOutsideClick":case"hideOnOutsideClick":break;default:super._optionChanged(e)}}_renderVisibility(e){return e?this._show():this._hide()}_toggleVisibility(){}_show(e){var i={jQEvent:e},n=new R().reject().promise();if(this._actions.onShowing(i),i.cancel)return n;var a=this._positionContextMenu(e);if(a){var s;this._overlay||(this._renderContextMenuOverlay(),this._overlay.$content().addClass(this._widgetClass()),this._renderFocusState(),this._attachHoverEvents(),this._attachClickEvent(),this._renderItems(this._dataAdapter.getRootNodes())),this._setOptionWithoutOptionChange("visible",!0),this._overlay.option("position",a),n=this._overlay.show(),e&&e.stopPropagation(),this._setAriaAttributes(),(e==null||(s=e.originalEvent)===null||s===void 0?void 0:s.type)===ci.name&&this.preventShowingDefaultContextMenuAboveOverlay()}return n}_setAriaAttributes(){this._overlayContentId="dx-".concat(new V),this.setAria("owns",this._overlayContentId),this.setAria({id:this._overlayContentId,role:"menu"},this._overlay.$content())}_cleanAriaAttributes(){this._overlay&&this.setAria("id",null,this._overlay.$content()),this.setAria("owns",void 0)}_getTarget(){return this.option("target")||this.option("position").of||d($.getDocument())}_getContextMenuPosition(){return c({},this.option("position"),{of:this._getTarget()})}_positionContextMenu(e){var i=this._getContextMenuPosition(),n=this._isInitialOptionValue("position"),a=this._createActionByOption("onPositioning");e&&e.preventDefault&&n&&(i.of=e);var s={position:i,event:e};return a(s),s.cancel?i=null:s.event&&(s.event.cancel=!0,e.preventDefault()),i}_refresh(){if(!N())super._refresh();else if(this._overlay){var e=this._overlay.option("position");super._refresh(),this._overlay&&this._overlay.option("position",e)}else super._refresh()}_hide(){var e;return this._overlay&&(e=this._overlay.hide(),this._setOptionWithoutOptionChange("visible",!1)),this._cleanAriaAttributes(),this.option("focusedElement",null),e||new R().reject().promise()}toggle(e){var i=this.option("visible");return e=e===void 0?!i:e,this._renderVisibility(e)}show(){return this.toggle(!0)}hide(){return this.toggle(!1)}}A("dxContextMenu",wi);var Sr=Object.freeze(Object.defineProperty({__proto__:null,default:wi},Symbol.toStringTag,{value:"Module"})),Aa="dx-buttongroup",Oa=["dxAutocomplete","dxButton","dxCheckBox","dxDateBox","dxMenu","dxSelectBox","dxTabs","dxTextBox","dxButtonGroup","dxDropDownButton"],xa=function(t){var e=t.data&&t.data(),i=e&&e.dxComponents,n=i&&i[0];return n&&e[n]};function Oe(t,e){var i;if(!!t){var n=t._findItemElementByItem(e);if(!!n.length){var a=t._getItemData(n),s=!!((i=a.options)!==null&&i!==void 0&&i.disabled||a.disabled||t.option("disabled")),{widget:o}=a;if(o&&Oa.indexOf(o)!==-1){var r=n.find(o.toLowerCase().replace("dx",".dx-"));if(r.length){var l,u,h=xa(r);if(!h)return;var _=(l=h._focusTarget)===null||l===void 0?void 0:l.call(h);if(o==="dxDropDownButton")_=_&&_.find(".".concat(Aa));else{var p;_=(p=_)!==null&&p!==void 0?p:d(h.element())}var f=(u=a.options)===null||u===void 0?void 0:u.tabIndex;s?_.attr("tabIndex",-1):_.attr("tabIndex",f!=null?f:0)}}}}}var Ba="dx-toolbar-label";class Da{constructor(e){this._toolbar=e}_initMarkup(){}_updateMenuVisibility(){}_renderMenuItems(){}_renderItem(){}_getMenuItems(){}_getToolbarItems(){var e;return(e=this._toolbar.option("items"))!==null&&e!==void 0?e:[]}_getItemsWidth(){return this._toolbar._getSummaryItemsWidth(this._toolbar.itemElements(),!0)}_arrangeItems(){var e=this._toolbar._$toolbarItemsContainer.find(".".concat(Ba)).eq(0);if(!!e.length){var i=B(this._toolbar.$element()),n=De(e)-B(e);e.css("maxWidth",i-n)}}_hideOverflowItems(){}_dimensionChanged(){}_itemOptionChanged(){}_optionChanged(){}}var Pe="dx-toolbar-menu-action",La="dx-toolbar-hidden-button",yt="dx-toolbar-hidden-button-group",Tt="dx-toolbar-menu-section",Ma="dx-toolbar-menu-custom",Et="dx-toolbar-menu-last-section";class wa extends Gn{_init(){super._init(),this._activeStateUnit=".".concat(Pe,":not(.").concat(yt,")")}_initMarkup(){this._renderSections(),super._initMarkup()}_getSections(){return this._itemContainer().children()}_itemElements(){return this._getSections().children(this._itemSelector())}_renderSections(){var e=this._itemContainer();m(["before","center","after","menu"],(i,n)=>{var a="_$".concat(n,"Section");this[a]||(this[a]=d("<div>").addClass(Tt)),this[a].appendTo(e)})}_renderItems(){super._renderItems.apply(this,arguments),this._updateSections()}_updateSections(){var e=this.$element().find(".".concat(Tt));e.removeClass(Et),e.not(":empty").eq(-1).addClass(Et)}_renderItem(e,i,n,a){var s,o=(s=i.location)!==null&&s!==void 0?s:"menu",r=this["_$".concat(o,"Section")],l=super._renderItem(e,i,r,a);return this._getItemTemplateName({itemData:i})&&l.addClass(Ma),(o==="menu"||i.widget==="dxButton"||i.widget==="dxButtonGroup"||i.isAction)&&l.addClass(Pe),i.widget==="dxButton"&&l.addClass(La),i.widget==="dxButtonGroup"&&l.addClass(yt),l.addClass(i.cssClass),l}_getItemTemplateName(e){var i=super._getItemTemplateName(e),n=e.itemData,a=n&&n.menuItemTemplate;return a||i}_dataSourceOptions(){return{paginate:!1}}_itemClickHandler(e,i,n){d(e.target).closest(".".concat(Pe)).length&&super._itemClickHandler(e,i,n)}_getAriaTarget(){var e;return(e=this.option("_areaTarget"))!==null&&e!==void 0?e:super._getAriaTarget()}_clean(){this._getSections().empty(),super._clean()}}class ka extends ot{_getToolbarName(){return"dxToolbar"}}A("dxPopup",ka);var Ra="dx-dropdownmenu",Na="dx-dropdownmenu-popup",Fa="dx-dropdownmenu-popup-wrapper",$a="dx-dropdownmenu-list",Pa="dx-dropdownmenu-button",Va=10,At=3;class Ga extends Q{_supportedKeys(){var e={};return(!this.option("opened")||!this._list.option("focusedElement"))&&(e=this._button._supportedKeys()),c(super._supportedKeys(),e,{tab:function(){this._popup&&this._popup.hide()}})}_getDefaultOptions(){return c(super._getDefaultOptions(),{items:[],onItemClick:null,dataSource:null,itemTemplate:"item",onButtonClick:null,activeStateEnabled:!0,hoverStateEnabled:!0,opened:!1,onItemRendered:null,closeOnClick:!0,useInkRipple:!1,container:void 0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",to:0}}})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:function(){return E.real().deviceType==="desktop"&&!E.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return Le()},options:{useInkRipple:!0,animation:{show:{type:"pop",duration:200,from:{scale:0},to:{scale:1}},hide:{type:"pop",duration:200,from:{scale:1},to:{scale:0}}}}}])}_init(){super._init(),this.$element().addClass(Ra),this._initItemClickAction(),this._initButtonClickAction()}_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")}_initButtonClickAction(){this._buttonClickAction=this._createActionByOption("onButtonClick")}_initTemplates(){this._templateManager.addDefaultTemplates({content:new pn("content")}),super._initTemplates()}_initMarkup(){this._renderButton(),super._initMarkup()}_render(){super._render(),this.setAria({role:"menubar",haspopup:!0,expanded:this.option("opened")})}_renderContentImpl(){this.option("opened")&&this._renderPopup()}_clean(){this._cleanFocusState(),this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove(),delete this._list,delete this._popup}_renderButton(){var e=this.$element().addClass(Pa);this._button=this._createComponent(e,at,{icon:"overflow",template:"content",useInkRipple:this.option("useInkRipple"),hoverStateEnabled:!1,focusStateEnabled:!1,onClick:i=>{this.option("opened",!this.option("opened")),this._buttonClickAction(i)}})}_toggleActiveState(e,i,n){this._button._toggleActiveState(e,i,n)}_toggleMenuVisibility(e){var i=e!=null?e:!this._popup.option("visible");e&&this._renderPopup(),this._popup.toggle(i),this.setAria("expanded",i)}_renderPopup(){if(!this._$popup){this._$popup=d("<div>").appendTo(this.$element());var{rtlEnabled:e,container:i,animation:n}=this.option();this._popup=this._createComponent(this._$popup,"dxPopup",{onInitialized(a){var{component:s}=a;s.$wrapper().addClass(Fa).addClass(Na)},deferRendering:!1,contentTemplate:a=>this._renderList(a),_ignoreFunctionValueDeprecation:!0,maxHeight:()=>this._getMaxHeight(),position:{my:"top ".concat(e?"left":"right"),at:"bottom ".concat(e?"left":"right"),collision:"fit flip",offset:{v:At},of:this.$element()},animation:n,onOptionChanged:a=>{var{name:s,value:o}=a;s==="visible"&&this.option("opened",o)},container:i,autoResizeEnabled:!1,height:"auto",width:"auto",hideOnOutsideClick:a=>this._closeOutsideDropDownHandler(a),hideOnParentScroll:!0,shading:!1,dragEnabled:!1,showTitle:!1,fullScreen:!1,_fixWrapperPosition:!0})}}_getMaxHeight(){var e=this.$element(),i=e.offset().top,n=Te(_e()),a=Math.max(i,n-i-Te(e));return Math.min(n,a-At-Va)}_closeOutsideDropDownHandler(e){var i=!d(e.target).closest(this.$element()).length;return i}_renderList(e){var i=d(e);i.addClass($a),this._list=this._createComponent(i,wa,{dataSource:this._getListDataSource(),pageLoadMode:"scrollBottom",indicateLoading:!1,noDataText:"",itemTemplate:this.option("itemTemplate"),onItemClick:n=>{this.option("closeOnClick")&&this.option("opened",!1),this._itemClickAction(n)},tabIndex:-1,focusStateEnabled:!1,activeStateEnabled:!0,onItemRendered:this.option("onItemRendered"),_areaTarget:this.$element(),_itemAttributes:{role:"menuitem"}})}_itemOptionChanged(e,i,n){var a;(a=this._list)===null||a===void 0||a._itemOptionChanged(e,i,n),Oe(this._list,e)}_getListDataSource(){var e;return(e=this.option("dataSource"))!==null&&e!==void 0?e:this.option("items")}_setListDataSource(){var e;(e=this._list)===null||e===void 0||e.option("dataSource",this._getListDataSource()),delete this._deferRendering}_getKeyboardListeners(){return super._getKeyboardListeners().concat([this._list])}_toggleVisibility(e){super._toggleVisibility(e),this._button.option("visible",e)}_optionChanged(e){var i,n,a,{name:s,value:o}=e;switch(s){case"items":case"dataSource":this.option("opened")?this._setListDataSource():this._deferRendering=!0;break;case"itemTemplate":(i=this._list)===null||i===void 0||i.option(s,this._getTemplate(o));break;case"onItemClick":this._initItemClickAction();break;case"onButtonClick":this._buttonClickAction();break;case"useInkRipple":this._invalidate();break;case"focusStateEnabled":(n=this._list)===null||n===void 0||n.option(s,o),super._optionChanged(e);break;case"onItemRendered":(a=this._list)===null||a===void 0||a.option(s,o);break;case"opened":this._deferRendering&&this._setListDataSource(),this._toggleMenuVisibility(o),this._updateFocusableItemsTabIndex();break;case"closeOnClick":break;case"container":this._popup&&this._popup.option(s,o);break;case"disabled":this._list&&this._updateFocusableItemsTabIndex();break;default:super._optionChanged(e)}}_updateFocusableItemsTabIndex(){this.option("items").forEach(e=>Oe(this._list,e))}}var Ot="dx-state-invisible",Wa="dx-toolbar-menu-container",Ha="dx-toolbar-button",Se="dx-toolbar-item-auto-hide",Ve="dx-toolbar-item-invisible";class Ka{constructor(e){this._toolbar=e}_initMarkup(){qe(()=>{this._renderOverflowMenu(),this._renderMenuItems()})}_renderOverflowMenu(){if(!!this._hasVisibleMenuItems()){this._renderMenuButtonContainer();var e=d("<div>").appendTo(this._overflowMenuContainer()),i=this._toolbar._createActionByOption("onItemClick"),n=this._toolbar._getTemplateByOption("menuItemTemplate");this._menu=this._toolbar._createComponent(e,Ga,{disabled:this._toolbar.option("disabled"),itemTemplate:()=>n,onItemClick:a=>{i(a)},container:this._toolbar.option("menuContainer"),onOptionChanged:a=>{var{name:s,value:o}=a;s==="opened"&&this._toolbar.option("overflowMenuVisible",o),s==="items"&&this._updateMenuVisibility(o)}})}}renderMenuItems(){this._menu||this._renderOverflowMenu(),this._menu&&this._menu.option("items",this._getMenuItems()),this._menu&&!this._menu.option("items").length&&this._menu.option("opened",!1)}_renderMenuButtonContainer(){this._$overflowMenuContainer=d("<div>").appendTo(this._toolbar._$afterSection).addClass(Ha).addClass(Wa)}_overflowMenuContainer(){return this._$overflowMenuContainer}_updateMenuVisibility(e){var i=e!=null?e:this._getMenuItems(),n=i.length&&this._hasVisibleMenuItems(i);this._toggleMenuVisibility(n)}_toggleMenuVisibility(e){!this._overflowMenuContainer()||this._overflowMenuContainer().toggleClass(Ot,!e)}_renderMenuItems(){qe(()=>{this.renderMenuItems()})}_dimensionChanged(){this.renderMenuItems()}_getToolbarItems(){var e;return Z((e=this._toolbar.option("items"))!==null&&e!==void 0?e:[],i=>!this._toolbar._isMenuItem(i))}_getMenuItems(){var e,i,n=Z((e=this._toolbar.option("items"))!==null&&e!==void 0?e:[],o=>this._toolbar._isMenuItem(o)),a=this._toolbar._itemContainer().children(".".concat(Se,".").concat(Ve)).not(".".concat(Ot));this._restoreItems=(i=this._restoreItems)!==null&&i!==void 0?i:[];var s=[].slice.call(a).map(o=>{var r=this._toolbar._getItemData(o),l=d(o),u=l.children();return c({menuItemTemplate:()=>{this._restoreItems.push({container:l,item:u});var h=d("<div>").addClass(Se);return h.append(u)}},r)});return[...s,...n]}_hasVisibleMenuItems(e){var i=e!=null?e:this._toolbar.option("items"),n=!1,a=J("visible"),s=J("locateInMenu");return m(i,function(o,r){var l=a(r,{functionsAsIs:!0}),u=s(r,{functionsAsIs:!0});(l!==!1&&(u==="auto"||u==="always")||r.location==="menu")&&(n=!0)}),n}_arrangeItems(){var e;this._toolbar._$centerSection.css({margin:"0 auto",float:"none"}),m((e=this._restoreItems)!==null&&e!==void 0?e:[],function(n,a){d(a.container).append(a.item)}),this._restoreItems=[];var i=B(this._toolbar.$element());return this._hideOverflowItems(i),i}_hideOverflowItems(e){var i,n=this._toolbar.$element().find(".".concat(Se));if(!!n.length){e=(i=e)!==null&&i!==void 0?i:B(this._toolbar.$element()),d(n).removeClass(Ve);for(var a=this._getItemsWidth();n.length&&e<a;){var s=n.eq(-1);a-=De(s),s.addClass(Ve),n.splice(-1,1)}}}_getItemsWidth(){return this._toolbar._getSummaryItemsWidth([this._toolbar._$beforeSection,this._toolbar._$centerSection,this._toolbar._$afterSection])}_itemOptionChanged(e,i,n){if(this._toolbar._isMenuItem(e)&&(i==="disabled"||i==="options.disabled")){var a;(a=this._menu)===null||a===void 0||a._itemOptionChanged(e,i,n);return}this.renderMenuItems()}_renderItem(e,i){e.locateInMenu==="auto"&&i.addClass(Se)}_optionChanged(e,i){var n,a,s,o,r;switch(e){case"disabled":(n=this._menu)===null||n===void 0||n.option(e,i);break;case"overflowMenuVisible":(a=this._menu)===null||a===void 0||a.option("opened",i);break;case"onItemClick":(s=this._menu)===null||s===void 0||s.option(e,i);break;case"menuContainer":(o=this._menu)===null||o===void 0||o.option("container",i);break;case"menuItemTemplate":(r=this._menu)===null||r===void 0||r.option("itemTemplate",i)}}}var Ua="dx-toolbar-multiline",za="dx-toolbar-text-auto-hide";class qa extends Wn{_getDefaultOptions(){return c(super._getDefaultOptions(),{menuItemTemplate:"menuItem",menuContainer:void 0,overflowMenuVisible:!1,multiline:!1})}_isMultiline(){return this.option("multiline")}_dimensionChanged(e){e!=="height"&&(super._dimensionChanged(),this._layoutStrategy._dimensionChanged())}_initMarkup(){super._initMarkup(),this._updateFocusableItemsTabIndex(),this._layoutStrategy._initMarkup()}_renderToolbar(){super._renderToolbar(),this._renderLayoutStrategy()}_itemContainer(){return this._isMultiline()?this._$toolbarItemsContainer:super._itemContainer()}_renderLayoutStrategy(){this.$element().toggleClass(Ua,this._isMultiline()),this._layoutStrategy=this._isMultiline()?new Da(this):new Ka(this)}_renderSections(){if(!this._isMultiline())return super._renderSections()}_postProcessRenderItems(){this._layoutStrategy._hideOverflowItems(),this._layoutStrategy._updateMenuVisibility(),super._postProcessRenderItems(),this._layoutStrategy._renderMenuItems()}_renderItem(e,i,n,a){var s=super._renderItem(e,i,n,a);this._layoutStrategy._renderItem(i,s);var{widget:o,showText:r}=i;return o==="dxButton"&&r==="inMenu"&&s.toggleClass(za),s}_getItemsWidth(){return this._layoutStrategy._getItemsWidth()}_getMenuItems(){return this._layoutStrategy._getMenuItems()}_getToolbarItems(){return this._layoutStrategy._getToolbarItems()}_arrangeItems(){if(!this.$element().is(":hidden")){var e=this._layoutStrategy._arrangeItems();this._isMultiline()||super._arrangeItems(e)}}_itemOptionChanged(e,i,n){this._layoutStrategy._itemOptionChanged(e,i,n),this._isMenuItem(e)||super._itemOptionChanged(e,i,n),(i==="disabled"||i==="options.disabled")&&Oe(this,e),i==="location"&&this.repaint()}_updateFocusableItemsTabIndex(){this._getToolbarItems().forEach(e=>Oe(this,e))}_isMenuItem(e){return e.location==="menu"||e.locateInMenu==="always"}_isToolbarItem(e){return e.location===void 0||e.locateInMenu==="never"}_optionChanged(e){var{name:i,value:n}=e;switch(this._layoutStrategy._optionChanged(i,n),i){case"menuContainer":case"menuItemTemplate":case"overflowMenuVisible":break;case"multiline":this._invalidate();break;case"disabled":super._optionChanged.apply(this,arguments),this._updateFocusableItemsTabIndex();break;default:super._optionChanged.apply(this,arguments)}}updateDimensions(){this._dimensionChanged()}}A("dxToolbar",qa);var Ie=_e(),Xa={text:"OK",onClick:function(){return!0}},z="dx-dialog",Ya="".concat(z,"-wrapper"),ja="".concat(z,"-root"),Za="".concat(z,"-content"),Ja="".concat(z,"-message"),Qa="".concat(z,"-buttons"),es="".concat(z,"-button"),xt="dx-button",ts=mn.inherit({ctor:function(t,e){this.callBase(e)},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{width:276}}])}}),is=function(t){var e,i=new R,n=new ts().option();t=c(n,t);var a=d("<div>").addClass(z).appendTo(_i()),s="message"in t,o="messageHtml"in t;s&&ee.log("W1013");var r=String(o?t.messageHtml:t.message),l=d("<div>").addClass(Ja).html(r),u=[];m(t.buttons||[Xa],function(){var p=new vn(this.onClick,{context:h});u.push({toolbar:"bottom",location:E.current().android?"after":"center",widget:"dxButton",options:c({},this,{onClick:function(){var f=p.execute(...arguments);_(f)}})})});var h=new ot(a,c({title:(e=t.title)!==null&&e!==void 0?e:"",showTitle:he(t.showTitle,!0),dragEnabled:he(t.dragEnabled,!0),height:"auto",width:t.width,showCloseButton:t.showCloseButton||!1,ignoreChildEvents:!1,container:a,visualContainer:Ie,dragAndResizeArea:Ie,onContentReady:function(p){p.component.$content().addClass(Za).append(l)},onShowing:function(p){p.component.bottomToolbar().addClass(Qa).find(".".concat(xt)).addClass(es),fn()},onShown:function(p){var f=p.component.bottomToolbar().find(".".concat(xt)).first();g.trigger(f,"focus")},onHiding:function(){i.reject()},toolbarItems:u,animation:{show:{type:"pop",duration:400},hide:{type:"pop",duration:400,to:{opacity:0,scale:0},from:{opacity:1,scale:1}}},rtlEnabled:pi().rtlEnabled,position:{boundaryOffset:{h:10,v:0}}},t.popupOptions));h.$wrapper().addClass(Ya),t.position&&h.option("position",t.position),h.$wrapper().addClass(ja);function _(p){i.resolve(p),h.hide().done(function(){h.$element().remove()})}return{show:function(){if(E.real().platform==="android"){var p=Ee(Ie)>B(Ie),f=p?"80%":"60%";h.option({width:f})}return h.show(),i.promise()},hide:_}};var Ir=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,n=F(t)?t:{title:e,messageHtml:t,showTitle:i,buttons:[{text:U.format("Yes"),onClick:function(){return!0}},{text:U.format("No"),onClick:function(){return!1}}],dragEnabled:i};return is(n).show()};class ki{constructor(){this._map={}}_findWidgetInstance(e){var i;return m(this._map,function(n,a){var{widgetInstance:s,item:o}=a;if(e(o))return i=s,!1}),i}_findFieldByCondition(e,i){var n;return m(this._map,function(a,s){if(e(s))return n=i==="guid"?a:s[i],!1}),n}clear(){this._map={}}removeItemsByItems(e){m(e.getItems(),i=>this.removeItemByKey(i))}removeItemByKey(e){delete this._map[e]}add(e){var i=e.guid||new V;return this._map[i]=e,i}addItemsOrExtendFrom(e){e.each((i,n)=>{this._map[i]?(n.widgetInstance&&(this._map[i].widgetInstance=n.widgetInstance),this._map[i].$itemContainer=n.$itemContainer):this.add({item:n.item,widgetInstance:n.widgetInstance,guid:i,$itemContainer:n.$itemContainer})})}extendRunTimeItemInfoByKey(e,i){this._map[e]&&(this._map[e]=c(this._map[e],i))}findWidgetInstanceByItem(e){return this._findWidgetInstance(i=>i===e)}findGroupOrTabLayoutManagerByPath(e){return this._findFieldByCondition(i=>{var{path:n}=i;return n===e},"layoutManager")}findKeyByPath(e){return this._findFieldByCondition(i=>{var{path:n}=i;return n===e},"guid")}findWidgetInstanceByName(e){return this._findWidgetInstance(i=>e===i.name)}findWidgetInstanceByDataField(e){return this._findWidgetInstance(i=>e===(Xe(i)?i:i.dataField))}findItemContainerByItem(e){for(var i in this._map)if(this._map[i].item===e)return this._map[i].$itemContainer;return null}findItemIndexByItem(e){return this._findFieldByCondition(i=>{var{item:n}=i;return n===e},"itemIndex")}findPreparedItemByItem(e){return this._findFieldByCondition(i=>{var{item:n}=i;return n===e},"preparedItem")}getItems(){return this._map}each(e){m(this._map,function(i,n){e(i,n)})}removeItemsByPathStartWith(e){var i=Object.keys(this._map),n=i.filter(a=>this._map[a].path?this._map[a].path.indexOf(e,0)>-1:!1);n.forEach(a=>this.removeItemByKey(a))}}var ye={move(t,e){mi(t,{left:e})}},Ge={moveTo(t,e,i,n){re.animate(t,{type:"slide",to:{left:e},duration:i,complete:n})},complete(t){re.stop(t,!0)}},ns="dx-multiview",as="dx-multiview-wrapper",ss="dx-multiview-item-container",Bt="dx-multiview-item",os="dx-multiview-item-hidden",rs="dxMultiViewItemData",ls=200,Dt=t=>+t,ds=t=>se(t).left,Ri=yi.inherit({_activeStateUnit:"."+Bt,_supportedKeys:function(){return c(this.callBase(),{pageUp:C,pageDown:C})},_getDefaultOptions:function(){return c(this.callBase(),{selectedIndex:0,swipeEnabled:!0,animationEnabled:!0,loop:!1,deferRendering:!0,_itemAttributes:{role:"tabpanel"},loopItemFocus:!1,selectOnFocus:!0,selectionMode:"single",selectionRequired:!0,selectionByClick:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return E.real().deviceType==="desktop"&&!E.isSimulator()},options:{focusStateEnabled:!0}}])},_itemClass:function(){return Bt},_itemDataKey:function(){return rs},_itemContainer:function(){return this._$itemContainer},_itemElements:function(){return this._itemContainer().children(this._itemSelector())},_itemWidth:function(){return this._itemWidthValue||(this._itemWidthValue=B(this._$wrapper)),this._itemWidthValue},_clearItemWidthCache:function(){delete this._itemWidthValue},_itemsCount:function(){return this.option("items").length},_normalizeIndex:function(t){var e=this._itemsCount();return t<0&&(t+=e),t>=e&&(t-=e),t},_getRTLSignCorrection:function(){return this.option("rtlEnabled")?-1:1},_init:function(){this.callBase.apply(this,arguments);var t=this.$element();t.addClass(ns),this._$wrapper=d("<div>").addClass(as),this._$wrapper.appendTo(t),this._$itemContainer=d("<div>").addClass(ss),this._$itemContainer.appendTo(this._$wrapper),this.option("loopItemFocus",this.option("loop")),this._initSwipeable()},_initMarkup:function(){this._deferredItems=[],this.callBase();var t=this._getSelectedItemIndices();this._updateItemsVisibility(t[0])},_afterItemElementDeleted:function(t,e){this.callBase(t,e),this._deferredItems&&this._deferredItems.splice(e.itemIndex,1)},_beforeItemElementInserted:function(t){this.callBase.apply(this,arguments),this._deferredItems&&this._deferredItems.splice(t.index,0,null)},_executeItemRenderAction:function(t,e,i){t=(this.option("items")||[]).indexOf(e),this.callBase(t,e,i)},_renderItemContent:function(t){var e=new R,i=this,n=this.callBase,a=new R;return a.done(function(){var s=n.call(i,t);e.resolve(s)}),this._deferredItems[t.index]=a,this.option("deferRendering")||a.resolve(),e.promise()},_render:function(){this.callBase(),qe(()=>{var t=this._getSelectedItemIndices();this._updateItems(t[0])})},_updateItems:function(t,e){this._updateItemsPosition(t,e),this._updateItemsVisibility(t,e)},_modifyByChanges:function(){this.callBase.apply(this,arguments);var t=this._getSelectedItemIndices();this._updateItemsVisibility(t[0])},_updateItemsPosition:function(t,e){var i=this._itemElements(),n=v(e)?-this._animationDirection(e,t):void 0,a=i.eq(t);ye.move(a,0),v(e)&&ye.move(i.eq(e),100*n+"%")},_updateItemsVisibility:function(t,e){var i=this._itemElements();i.each(function(n,a){var s=d(a),o=n!==t&&n!==e;o||this._renderSpecificItem(n),s.toggleClass(os,o),this.setAria("hidden",o||void 0,s)}.bind(this))},_renderSpecificItem:function(t){var e=this._itemElements().eq(t),i=e.find(this._itemContentClass()).length>0;v(t)&&!i&&(this._deferredItems[t].resolve(),vi(e))},_refreshItem:function(t,e){this.callBase(t,e),this._updateItemsVisibility(this.option("selectedIndex"))},_setAriaSelected:C,_updateSelection:function(t,e){var i=t[0],n=e[0];Ge.complete(this._$itemContainer),this._updateItems(n,i);var a=this._animationDirection(i,n);this._animateItemContainer(a*this._itemWidth(),function(){ye.move(this._$itemContainer,0),this._updateItems(i),B(this._$itemContainer)}.bind(this))},_animateItemContainer:function(t,e){var i=this.option("animationEnabled")?ls:0;Ge.moveTo(this._$itemContainer,t,i,e)},_animationDirection:function(t,e){var i=ds(this._$itemContainer),n=(e-t)*this._getRTLSignCorrection()*this._getItemFocusLoopSignCorrection(),a=i!==0,s=a?i:n;return ht(s)},_getSwipeDisabledState(){return!this.option("swipeEnabled")||this._itemsCount()<=1},_initSwipeable(){this._createComponent(this.$element(),mt,{disabled:this._getSwipeDisabledState(),elastic:!1,itemSizeFunc:this._itemWidth.bind(this),onStart:t=>this._swipeStartHandler(t.event),onUpdated:t=>this._swipeUpdateHandler(t.event),onEnd:t=>this._swipeEndHandler(t.event)})},_swipeStartHandler:function(t){Ge.complete(this._$itemContainer);var e=this.option("selectedIndex"),i=this.option("loop"),n=this._itemsCount()-1,a=this.option("rtlEnabled");t.maxLeftOffset=Dt(i||(a?e>0:e<n)),t.maxRightOffset=Dt(i||(a?e<n:e>0)),this._swipeDirection=null},_swipeUpdateHandler:function(t){var e=t.offset,i=ht(e)*this._getRTLSignCorrection();if(ye.move(this._$itemContainer,e*this._itemWidth()),i!==this._swipeDirection){this._swipeDirection=i;var n=this.option("selectedIndex"),a=this._normalizeIndex(n-i);this._updateItems(n,a)}},_swipeEndHandler:function(t){var e=t.targetOffset*this._getRTLSignCorrection();if(e){this.option("selectedIndex",this._normalizeIndex(this.option("selectedIndex")-e));var i=this.itemElements().filter(".dx-item-selected");this.option("focusStateEnabled")&&this.option("focusedElement",x(i))}else this._animateItemContainer(0,C)},_getItemFocusLoopSignCorrection:function(){return this._itemFocusLooped?-1:1},_moveFocus:function(){this.callBase.apply(this,arguments),this._itemFocusLooped=!1},_prevItem:function(t){var e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(t.last()),e},_nextItem:function(t){var e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(t.first()),e},_dimensionChanged:function(){this._clearItemWidthCache()},_visibilityChanged:function(t){t&&this._dimensionChanged()},_updateSwipeDisabledState(){var t=this._getSwipeDisabledState();mt.getInstance(this.$element()).option("disabled",t)},_optionChanged:function(t){var e=t.value;switch(t.name){case"loop":this.option("loopItemFocus",e);break;case"animationEnabled":break;case"swipeEnabled":this._updateSwipeDisabledState();break;case"deferRendering":this._invalidate();break;case"items":this._updateSwipeDisabledState(),this.callBase(t);break;default:this.callBase(t)}}});A("dxMultiView",Ri);var us="dx-tabs-item-badge",Lt="dx-badge",hs=nt.inherit({_renderWatchers:function(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this))},_renderBadge:function(t){if(this._$element.children("."+Lt).remove(),!!t){var e=d("<div>").addClass(us).addClass(Lt).text(t);this._$element.append(e)}}}),Mt="dx-tabs-expanded";function Ni(t){return t.scrollWidth-t.clientWidth}function cs(t,e){return Math.round(t)<=e}function _s(t,e,i){return Math.round(Ni(t)-e)<=i}var ps="dx-tabs",ms="dx-tabs-wrapper",wt="dx-tabs-stretched",vs="dx-tabs-scrollable",kt="dx-tabs-nav-buttons",Rt="dx-overflow-hidden",Nt="dx-tab",fs="dx-tab-selected",gs="dx-tabs-nav-button",Cs="dx-tabs-nav-button-left",bs="dx-tabs-nav-button-right",Ss="dx-tab-text",Is="dxTabData",Ft="chevronnext",$t="chevronprev",ys=100,Pt=5,Ts=300,Vt=30,rt=yi.inherit({_activeStateUnit:"."+Nt,_getDefaultOptions:function(){return c(this.callBase(),{hoverStateEnabled:!0,showNavButtons:!0,scrollByContent:!0,scrollingEnabled:!0,selectionMode:"single",activeStateEnabled:!0,selectionRequired:!1,selectOnFocus:!0,loopItemFocus:!1,useInkRipple:!1,badgeExpr:function(t){return t?t.badge:void 0},_itemAttributes:{role:"tab"}})},_defaultOptionsRules:function(){var t=gn();return this.callBase().concat([{device:function(){return E.real().deviceType!=="desktop"},options:{showNavButtons:!1}},{device:{deviceType:"desktop"},options:{scrollByContent:!1}},{device:function(){return E.real().deviceType==="desktop"&&!E.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return Le(t)},options:{useInkRipple:!0,selectOnFocus:!1}}])},_init:function(){this.callBase(),this.setAria("role","tablist"),this.$element().addClass(ps),this._renderWrapper(),this._renderMultiple(),this._feedbackHideTimeout=ys},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Be(function(t,e){F(e)?this._prepareDefaultItemTemplate(e,t):t.text(String(e));var i=de(e.icon);i&&i.prependTo(t),t.wrapInner(d("<span>").addClass(Ss))}.bind(this),["text","html","icon"],this.option("integrationOptions.watchMethod"))})},_createItemByTemplate:function(t,e){var{itemData:i,container:n,index:a}=e;return this._deferredTemplates[a]=new R,t.render({model:i,container:n,index:a,onRendered:()=>this._deferredTemplates[a].resolve()})},_itemClass:function(){return Nt},_selectedItemClass:function(){return fs},_itemDataKey:function(){return Is},_initMarkup:function(){this._deferredTemplates=[],this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.$element().addClass(Rt)},_render:function(){this.callBase(),this._deferRenderScrolling()},_deferRenderScrolling(){Ye.apply(this,this._deferredTemplates).done(()=>this._renderScrolling())},_renderScrolling:function(){var t=[wt,Mt,Rt];if(this.$element().removeClass(t.join(" ")),this.option("scrollingEnabled")&&this._isItemsWidthExceeded()){this._scrollable||(this._renderScrollable(),this._renderNavButtons());var e=this.getScrollable();if(e.update(),this.option("rtlEnabled")){var i=Ni(d(this.getScrollable().container()).get(0));e.scrollTo({left:i})}this._updateNavButtonsVisibility(),this._scrollToItem(this.option("selectedItem"))}this.option("scrollingEnabled")&&this._isItemsWidthExceeded()||(this._cleanScrolling(),this._needStretchItems()&&!this._isItemsWidthExceeded()&&this.$element().addClass(wt),this.$element().removeClass(kt).addClass(Mt))},_isItemsWidthExceeded:function(){var t=this._getSummaryItemsWidth(this._getVisibleItems(),!0);return t-1>B(this.$element())},_needStretchItems:function(){var t=this._getVisibleItems(),e=B(this.$element()),i=[];m(t,(a,s)=>{i.push(De(s,!0))});var n=Math.max.apply(null,i);return n>=e/t.length},_cleanNavButtons:function(){!this._leftButton||!this._rightButton||(this._leftButton.$element().remove(),this._rightButton.$element().remove(),this._leftButton=null,this._rightButton=null)},_cleanScrolling:function(){!this._scrollable||(this._$wrapper.appendTo(this.$element()),this._scrollable.$element().remove(),this._scrollable=null,this._cleanNavButtons())},_renderInkRipple:function(){this._inkRipple=ui()},_toggleActiveState:function(t,e,i){if(this.callBase.apply(this,arguments),!!this._inkRipple){var n={element:t,event:i};e?this._inkRipple.showWave(n):this._inkRipple.hideWave(n)}},_renderMultiple:function(){this.option("selectionMode")==="multiple"&&this.option("selectOnFocus",!1)},_renderWrapper:function(){this._$wrapper=d("<div>").addClass(ms),this.$element().append(this._$wrapper)},_itemContainer:function(){return this._$wrapper},_renderScrollable:function(){var t=this.$element().wrapInner(d("<div>").addClass(vs)).children();this._scrollable=this._createComponent(t,Ti,{direction:"horizontal",showScrollbar:"never",useKeyboard:!1,useNative:!1,scrollByContent:this.option("scrollByContent"),onScroll:()=>{this._updateNavButtonsVisibility()}}),this.$element().append(this._scrollable.$element())},_scrollToItem:function(t){if(!!this._scrollable){var e=this._editStrategy.getItemElement(t);this._scrollable.scrollToElement(e)}},_renderNavButtons:function(){if(this.$element().toggleClass(kt,this.option("showNavButtons")),!!this.option("showNavButtons")){var t=this.option("rtlEnabled");this._leftButton=this._createNavButton(-Vt,t?Ft:$t);var e=this._leftButton.$element();e.addClass(Cs),this.$element().prepend(e),this._rightButton=this._createNavButton(Vt,t?$t:Ft);var i=this._rightButton.$element();i.addClass(bs),this.$element().append(i)}},_updateNavButtonsVisibility:function(){var t=this.getScrollable();this._leftButton&&this._leftButton.option("disabled",cs(t.scrollLeft(),1)),this._rightButton&&this._rightButton.option("disabled",_s(d(t.container()).get(0),t.scrollLeft(),1))},_updateScrollPosition:function(t,e){this._scrollable.update(),this._scrollable.scrollBy(t/e)},_createNavButton:function(t,e){var i=this,n=i._createAction(function(){i._holdInterval=setInterval(function(){i._updateScrollPosition(t,Pt)},Pt)}),a=M(ci.name,"dxNavButton"),s=M(je.up,"dxNavButton"),o=M(je.out,"dxNavButton"),r=this._createComponent(d("<div>").addClass(gs),at,{focusStateEnabled:!1,icon:e,onClick:function(){i._updateScrollPosition(t,1)},integrationOptions:{}}),l=r.$element();return g.on(l,a,{timeout:Ts},function(u){n({event:u})}.bind(this)),g.on(l,s,function(){i._clearInterval()}),g.on(l,o,function(){i._clearInterval()}),r},_clearInterval:function(){this._holdInterval&&clearInterval(this._holdInterval)},_updateSelection:function(t){this._scrollable&&this._scrollable.scrollToElement(this.itemElements().eq(t[0]),{left:1,right:1})},_visibilityChanged:function(t){t&&this._dimensionChanged()},_dimensionChanged:function(){this._renderScrolling()},_itemSelectHandler:function(t){this.option("selectionMode")==="single"&&this.isItemSelected(t.currentTarget)||this.callBase(t)},_clean:function(){this._deferredTemplates=[],this._cleanScrolling(),this.callBase()},_optionChanged:function(t){switch(t.name){case"useInkRipple":case"scrollingEnabled":case"showNavButtons":this._invalidate();break;case"scrollByContent":this._scrollable&&this._scrollable.option(t.name,t.value);break;case"width":this.callBase(t),this._dimensionChanged();break;case"selectionMode":this._renderMultiple(),this.callBase(t);break;case"badgeExpr":this._invalidate();break;default:this.callBase(t)}},_afterItemElementInserted(){this.callBase(),this._deferRenderScrolling()},_afterItemElementDeleted(t,e){this.callBase(t,e),this._renderScrolling()},getScrollable(){return this._scrollable}});rt.ItemClass=hs;A("dxTabs",rt);class Es extends nt{_renderWatchers(){return this._startWatcher("badge",C),super._renderWatchers()}}var As="dx-tabpanel",Os="dx-tabpanel-tabs",xs="dx-tabpanel-container",Bs="dx-tab-text",lt=Ri.inherit({_getDefaultOptions:function(){return c(this.callBase(),{itemTitleTemplate:"title",hoverStateEnabled:!0,showNavButtons:!1,scrollByContent:!0,scrollingEnabled:!0,onTitleClick:null,onTitleHold:null,onTitleRendered:null,badgeExpr:function(t){return t?t.badge:void 0}})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return E.real().deviceType==="desktop"&&!E.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return!Cn},options:{swipeEnabled:!1}},{device:{platform:"generic"},options:{animationEnabled:!1}}])},_init:function(){this.callBase(),this.$element().addClass(As),this.setAria("role","tabpanel")},_initMarkup:function(){this.callBase(),this._createTitleActions(),this._renderLayout()},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({title:new Be(function(t,e){if(F(e)){var i=de(e.icon);i&&t.append(i),v(e.title)&&!F(e.title)&&t.append($.createTextNode(e.title))}else v(e)&&t.text(String(e));t.wrapInner(d("<span>").addClass(Bs))},["title","icon"],this.option("integrationOptions.watchMethod"))})},_createTitleActions:function(){this._createTitleClickAction(),this._createTitleHoldAction(),this._createTitleRenderedAction()},_createTitleClickAction:function(){this._titleClickAction=this._createActionByOption("onTitleClick")},_createTitleHoldAction:function(){this._titleHoldAction=this._createActionByOption("onTitleHold")},_createTitleRenderedAction:function(){this._titleRenderedAction=this._createActionByOption("onTitleRendered")},_renderContent:function(){var t=this;this.callBase(),this.option("templatesRenderAsynchronously")&&(this._resizeEventTimer=setTimeout(function(){t._updateLayout()},0))},_renderLayout:function(){if(this._tabs){this._updateLayout();return}var t=this.$element();this._$tabContainer=d("<div>").addClass(Os).appendTo(t);var e=d("<div>").appendTo(this._$tabContainer);this._tabs=this._createComponent(e,rt,this._tabConfig()),this._$container=d("<div>").addClass(xs).appendTo(t),this._$container.append(this._$wrapper),this._updateLayout()},_updateLayout:function(){if(N()){var t=Te(this._$tabContainer);this._$container.css({marginTop:-t,paddingTop:t})}},_refreshActiveDescendant:function(){if(!!this._tabs){var t=this._tabs,e=t.itemElements(),i=d(e[t.option("selectedIndex")]),n=this.getFocusedItemId();this.setAria("controls",void 0,d(e)),this.setAria("controls",n,i)}},_tabConfig:function(){return{selectOnFocus:!0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),repaintChangesOnly:this.option("repaintChangesOnly"),tabIndex:this.option("tabIndex"),selectedIndex:this.option("selectedIndex"),badgeExpr:this.option("badgeExpr"),onItemClick:this._titleClickAction.bind(this),onItemHold:this._titleHoldAction.bind(this),itemHoldTimeout:this.option("itemHoldTimeout"),onSelectionChanged:function(t){this.option("selectedIndex",t.component.option("selectedIndex")),this._refreshActiveDescendant()}.bind(this),onItemRendered:this._titleRenderedAction.bind(this),itemTemplate:this._getTemplateByOption("itemTitleTemplate"),items:this.option("items"),noDataText:null,scrollingEnabled:this.option("scrollingEnabled"),scrollByContent:this.option("scrollByContent"),showNavButtons:this.option("showNavButtons"),itemTemplateProperty:"tabTemplate",loopItemFocus:this.option("loop"),selectionRequired:!0,onOptionChanged:function(t){if(t.name==="focusedElement")if(t.value){var e=d(t.value),i=this._itemElements().eq(e.index());this.option("focusedElement",x(i))}else this.option("focusedElement",t.value)}.bind(this),onFocusIn:function(t){this._focusInHandler(t.event)}.bind(this),onFocusOut:function(t){this._isFocusOutHandlerExecuting||this._focusOutHandler(t.event)}.bind(this)}},_renderFocusTarget:function(){this._focusTarget().attr("tabIndex",-1)},_updateFocusState:function(t,e){this.callBase(t,e),t.target===this._tabs._focusTarget().get(0)&&this._toggleFocusClass(e,this._focusTarget())},_focusOutHandler:function(t){this._isFocusOutHandlerExecuting=!0,this.callBase.apply(this,arguments),this._tabs._focusOutHandler(t),this._isFocusOutHandlerExecuting=!1},_setTabsOption:function(t,e){this._tabs&&this._tabs.option(t,e)},_visibilityChanged:function(t){t&&(this._tabs._dimensionChanged(),this._updateLayout())},registerKeyHandler:function(t,e){this.callBase(t,e),this._tabs&&this._tabs.registerKeyHandler(t,e)},repaint:function(){this.callBase(),this._tabs.repaint()},_optionChanged:function(t){var e=t.name,i=t.value,n=t.fullName;switch(e){case"dataSource":this.callBase(t);break;case"items":this._setTabsOption(e,this.option(e)),this._updateLayout(),this.option("repaintChangesOnly")||this._tabs.repaint(),this.callBase(t);break;case"width":this.callBase(t),this._tabs.repaint();break;case"selectedIndex":case"selectedItem":if(this._setTabsOption(n,i),this.callBase(t),this.option("focusStateEnabled")===!0){var a=this.option("selectedIndex"),s=this._itemElements().eq(a);this.option("focusedElement",x(s))}break;case"itemHoldTimeout":case"focusStateEnabled":case"hoverStateEnabled":this._setTabsOption(n,i),this.callBase(t);break;case"scrollingEnabled":case"scrollByContent":case"showNavButtons":this._setTabsOption(n,i);break;case"focusedElement":var o=i&&d(i).index(),r=i&&this._tabs._itemElements().eq(o);this._setTabsOption("focusedElement",x(r)),this.callBase(t);break;case"itemTitleTemplate":this._setTabsOption("itemTemplate",this._getTemplateByOption("itemTitleTemplate"));break;case"onTitleClick":this._createTitleClickAction(),this._setTabsOption("onItemClick",this._titleClickAction.bind(this));break;case"onTitleHold":this._createTitleHoldAction(),this._setTabsOption("onItemHold",this._titleHoldAction.bind(this));break;case"onTitleRendered":this._createTitleRenderedAction(),this._setTabsOption("onItemRendered",this._titleRenderedAction.bind(this));break;case"loop":this._setTabsOption("loopItemFocus",i);break;case"badgeExpr":this._invalidate();break;default:this.callBase(t)}},_clean:function(){clearTimeout(this._resizeEventTimer),this.callBase()}});lt.ItemClass=Es;A("dxTabPanel",lt);class q{constructor(e){this._options=e,this._itemsRunTimeInfo=this._options.itemsRunTimeInfo}findInstance(){return this._itemsRunTimeInfo.findWidgetInstanceByItem(this._options.item)}findItemContainer(){return this._itemsRunTimeInfo.findItemContainerByItem(this._options.item)}findPreparedItem(){return this._itemsRunTimeInfo.findPreparedItemByItem(this._options.item)}tryExecute(){ce.abstract()}}var Ze=(t,e)=>"".concat(e?"tabs":"items","[").concat(t,"]"),Fi=(t,e)=>v(t)&&v(e)?"".concat(t,".").concat(e):t||e,Je=t=>t?t.replace(/\s/g,""):void 0,Ds=(t,e)=>t?t.dataField===e||t.name===e||Je(t.title)===e||t.itemType==="group"&&Je(t.caption)===e:!1,oe=(t,e)=>"".concat(t,".").concat(e),Gt=t=>{var e=t.split(".");return e[e.length-1].replace(/\[\d+]/,"")},Ls=t=>{for(var e=t.split("."),i=[...e],n=e.length-1;n>=0;n--){if($i(e[n]))return i.join(".");i.splice(n,1)}return""},$i=t=>t.indexOf("tabs")>-1,Pi=(t,e,i)=>{var n=t.indexOf(e);if(n>-1)return Ze(n,i);for(var a=0;a<t.length;a++){var s=t[a],o=s.tabs||s.items;if(o){var r=Pi(o,e,s.tabs);if(r)return Fi(Ze(a,i),r)}}};function Ms(t){var{form:e,$formElement:i,formOptions:n,items:a,validationGroup:s,extendedLayoutManagerOptions:o,onFieldDataChanged:r,onContentReady:l,onDisposing:u,onFieldItemRendered:h}=t,_={form:e,items:a,$formElement:i,validationGroup:s,onFieldDataChanged:r,onContentReady:l,onDisposing:u,onFieldItemRendered:h,validationBoundary:n.scrollingEnabled?i:void 0,scrollingEnabled:n.scrollingEnabled,showRequiredMark:n.showRequiredMark,showOptionalMark:n.showOptionalMark,requiredMark:n.requiredMark,optionalMark:n.optionalMark,requiredMessage:n.requiredMessage,screenByWidth:n.screenByWidth,layoutData:n.formData,labelLocation:n.labelLocation,customizeItem:n.customizeItem,minColWidth:n.minColWidth,showColonAfterLabel:n.showColonAfterLabel,onEditorEnterKey:n.onEditorEnterKey,labelMode:n.labelMode},p=c(_,{isRoot:o.isRoot,colCount:o.colCount,alignItemLabels:o.alignItemLabels,cssItemClass:o.cssItemClass,colCountByScreen:o.colCountByScreen,onLayoutChanged:o.onLayoutChanged,width:o.width});return p}class ws extends q{tryExecute(){var{value:e}=this._options,i=this.findInstance();return i?(i.option(e),!0):!1}}class Wt extends q{tryExecute(){var e=this.findInstance();if(e){var{optionName:i,item:n,value:a}=this._options,s=this._itemsRunTimeInfo.findItemIndexByItem(n);if(s>=0)return e.option(oe("items[".concat(s,"]"),i),a),!0}return!1}}class ks extends q{tryExecute(){return!1}}class Rs extends q{tryExecute(){var e=this.findPreparedItem();return e!=null&&e._prepareGroupItemTemplate&&e._renderGroupContentTemplate?(e._prepareGroupItemTemplate(this._options.item.template),e._renderGroupContentTemplate(),!0):!1}}class Ns extends q{tryExecute(){var e=this.findInstance();if(e){var{value:i}=this._options;return e.option("dataSource",i),!0}return!1}}class Fs extends q{tryExecute(){var{item:e}=this._options,i=this.findInstance(),n=i&&fi(i.$element()[0],"dxValidator");if(n&&e){var a=r=>r.type==="required",s=(n.option("validationRules")||[]).some(a),o=(e.validationRules||[]).some(a);if(!s&&!o||s&&o)return n.option("validationRules",e.validationRules),!0}return!1}}class $s extends q{tryExecute(){var e=this.findItemContainer(),{previousValue:i,value:n}=this._options;return e?(e.removeClass(i).addClass(n),!0):!1}}var Ps=(t,e)=>{switch(t){case"editorOptions":case"buttonOptions":return new ws(e);case"validationRules":return new Fs(e);case"cssClass":return new $s(e);case"badge":case"disabled":case"icon":case"tabTemplate":case"title":return new Wt(c(e,{optionName:t}));case"tabs":return new Ns(e);case"template":var i,n,a,s=(i=e==null||(n=e.item)===null||n===void 0?void 0:n.itemType)!==null&&i!==void 0?i:(a=e.itemsRunTimeInfo.findPreparedItemByItem(e==null?void 0:e.item))===null||a===void 0?void 0:a.itemType;return s==="simple"?new ks(e):s==="group"?new Rs(e):new Wt(c(e,{optionName:t}));default:return null}},Vi="dx-responsivebox",Ht=Vi+"-screen-",Vs="dx-box-item",Kt="dxBoxItemData",Gs=1920,Gi=xe.inherit({_getDefaultOptions:function(){return c(this.callBase(),{rows:[],cols:[],screenByWidth:null,singleColumnScreen:"",height:"100%",width:"100%",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,onLayoutChanged:null,currentScreenFactor:void 0})},_init:function(){this.option("screenByWidth")||this._options.silent("screenByWidth",gi),this.callBase(),this._initLayoutChangedAction()},_initLayoutChangedAction:function(){this._layoutChangedAction=this._createActionByOption("onLayoutChanged",{excludeValidators:["disabled","readonly"]})},_itemClass:function(){return Vs},_itemDataKey:function(){return Kt},_initMarkup:function(){this.callBase(),this.$element().addClass(Vi)},_renderItems:function(){this._setScreenSize(),this._screenItems=this._itemsByScreen(),this._prepareGrid(),this._spreadItems(),this._layoutItems(),this._linkNodeToItem()},_itemOptionChanged:function(t){var e=this._findItemElementByItem(t);!e.length||(this._refreshItem(e,t),this._clearItemNodeTemplates(),this._update(!0))},_setScreenSize:function(){var t=this._getCurrentScreen();this._removeScreenSizeClass(),this.$element().addClass(Ht+t),this.option("currentScreenFactor",t)},_removeScreenSizeClass:function(){var t=this.option("currentScreenFactor");t&&this.$element().removeClass(Ht+t)},_prepareGrid:function(){var t=this._grid=[];this._prepareRowsAndCols(),m(this._rows,function(){var e=[];t.push(e),m(this._cols,function(){e.push(this._createEmptyCell())}.bind(this))}.bind(this))},getSingleColumnRows:function(){var t=this.option("rows"),e=this._screenItems.length;if(t.length){for(var i=this._filterByScreen(t),n=[],a=0;a<e;a++){var s=this._defaultSizeConfig();a<i.length&&v(i[a].shrink)&&(s.shrink=i[a].shrink),n.push(s)}return n}else return this._defaultSizeConfig(e)},_prepareRowsAndCols:function(){this._isSingleColumnScreen()?(this._prepareSingleColumnScreenItems(),this._rows=this.getSingleColumnRows(),this._cols=this._defaultSizeConfig(1)):(this._rows=this._sizesByScreen(this.option("rows")),this._cols=this._sizesByScreen(this.option("cols")))},_isSingleColumnScreen:function(){return this._screenRegExp().test(this.option("singleColumnScreen"))||!this.option("rows").length||!this.option("cols").length},_prepareSingleColumnScreenItems:function(){this._screenItems.sort(function(t,e){return t.location.row-e.location.row||t.location.col-e.location.col}),m(this._screenItems,function(t,e){c(e.location,{row:t,col:0,rowspan:1,colspan:1})})},_sizesByScreen:function(t){return ue(this._filterByScreen(t),function(e){return c(this._defaultSizeConfig(),e)}.bind(this))},_createDefaultSizeConfig:function(){return{ratio:1,baseSize:0,minSize:0,maxSize:0}},_defaultSizeConfig:function(t){var e=this._createDefaultSizeConfig();if(!arguments.length)return e;for(var i=[],n=0;n<t;n++)i.push(e);return i},_filterByScreen:function(t){var e=this._screenRegExp();return Z(t,function(i){return!i.screen||e.test(i.screen)})},_screenRegExp:function(){var t=this._getCurrentScreen();return new RegExp("(^|\\s)"+t+"($|\\s)","i")},_getCurrentScreen:function(){var t=this._screenWidth();return this.option("screenByWidth")(t)},_screenWidth:function(){return N()?B(_e()):Gs},_createEmptyCell:function(){return{item:{},location:{colspan:1,rowspan:1}}},_spreadItems:function(){m(this._screenItems,function(t,e){var i=e.location||{},n=i.col,a=i.row,s=this._grid[a],o=s&&s[n];this._occupyCells(o,e)}.bind(this))},_itemsByScreen:function(){return this.option("items").reduce((t,e)=>{var i=e.location||{};return i=F(i)?[i]:i,this._filterByScreen(i).forEach(n=>{t.push({item:e,location:c({rowspan:1,colspan:1},n)})}),t},[])},_occupyCells:function(t,e){!t||this._isItemCellOccupied(t,e)||(c(t,e),this._markSpanningCell(t))},_isItemCellOccupied:function(t,e){if(!Ae(t.item))return!0;var i=!1;return this._loopOverSpanning(e.location,function(n){i=i||!Ae(n.item)}),i},_loopOverSpanning:function(t,e){var i=t.row+t.rowspan-1,n=t.col+t.colspan-1,a=Math.min(i,this._rows.length-1),s=Math.min(n,this._cols.length-1);t.rowspan-=i-a,t.colspan-=n-s;for(var o=t.row;o<=a;o++)for(var r=t.col;r<=s;r++)(o!==t.row||r!==t.col)&&e(this._grid[o][r])},_markSpanningCell:function(t){this._loopOverSpanning(t.location,function(e){c(e,{item:t.item,spanningCell:t})})},_linkNodeToItem:function(){m(this._itemElements(),function(t,e){var i=d(e),n=i.data(Kt);n.box||(n.node=i.children())})},_layoutItems:function(){var t=this._grid.length,e=t&&this._grid[0].length;if(!(!t&&!e)){var i=this._layoutBlock({direction:"col",row:{start:0,end:t-1},col:{start:0,end:e-1}}),n=this._prepareBoxConfig(i.box||{direction:"row",items:[c(i,{ratio:1})]});c(n,this._rootBoxConfig(n.items)),this._$root=d("<div>").appendTo(this._itemContainer()),this._createComponent(this._$root,qn,n)}},_rootBoxConfig:function(t){var e=m(t,function(i,n){this._needApplyAutoBaseSize(n)&&c(n,{baseSize:"auto"})}.bind(this));return{width:"100%",height:"100%",items:e,itemTemplate:this._getTemplateByOption("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this._createActionByOption("onItemHold"),onItemClick:this._createActionByOption("onItemClick"),onItemContextMenu:this._createActionByOption("onItemContextMenu"),onItemRendered:this._createActionByOption("onItemRendered")}},_needApplyAutoBaseSize:function(t){return!t.baseSize&&(!t.minSize||t.minSize==="auto")&&(!t.maxSize||t.maxSize==="auto")},_prepareBoxConfig:function(t){return c(t||{},{crossAlign:"stretch",onItemStateChanged:this.option("onItemStateChanged")})},_layoutBlock:function(t){return this._isSingleItem(t)?this._itemByCell(t.row.start,t.col.start):this._layoutDirection(t)},_isSingleItem:function(t){var e=this._grid[t.row.start][t.col.start].location,i=t.row.end-t.row.start===e.rowspan-1,n=t.col.end-t.col.start===e.colspan-1;return i&&n},_itemByCell:function(t,e){var i=this._grid[t][e];return i.spanningCell?null:i.item},_layoutDirection:function(t){for(var e=[],i=t.direction,n=this._crossDirection(i),a;a=this._nextBlock(t);){if(this._isBlockIndivisible(t.prevBlockOptions,a))throw ee.Error("E1025");var s=this._layoutBlock({direction:n,row:a.row,col:a.col,prevBlockOptions:t});s&&(c(s,this._blockSize(a,n)),e.push(s)),t[n].start=a[n].end+1}return{box:this._prepareBoxConfig({direction:i,items:e})}},_isBlockIndivisible:function(t,e){return t&&t.col.start===e.col.start&&t.col.end===e.col.end&&t.row.start===e.row.start&&t.row.end===e.row.end},_crossDirection:function(t){return t==="col"?"row":"col"},_nextBlock:function(t){var e=t.direction,i=this._crossDirection(e),n=t[e].start,a=t[e].end,s=t[i].start;if(s>t[i].end)return null;for(var o=1,r=s;r<s+o;r++){for(var l=1,u=n;u<=a;u++){var h=this._cellByDirection(e,u,r);l=Math.max(l,h.location[i+"span"])}var _=r+l,p=s+o;_>p&&(o+=_-p)}var f={};return f[e]={start:n,end:a},f[i]={start:s,end:s+o-1},f},_cellByDirection:function(t,e,i){return t==="col"?this._grid[i][e]:this._grid[e][i]},_blockSize:function(t,e){for(var i=e==="row"?"auto":0,n=e==="row"?this._rows:this._cols,a=c(this._createDefaultSizeConfig(),{ratio:0}),s=t[e].start;s<=t[e].end;s++){var o=n[s];a.ratio+=o.ratio,a.baseSize+=o.baseSize,a.minSize+=o.minSize,a.maxSize+=o.maxSize,v(o.shrink)&&(a.shrink=o.shrink)}return a.minSize=a.minSize?a.minSize:i,a.maxSize=a.maxSize?a.maxSize:"auto",this._isSingleColumnScreen()&&(a.baseSize="auto"),a},_update:function(t){var e=this._$root;this._renderItems(),e&&(t?e.remove():(e.detach(),this._saveAssistantRoot(e))),this._layoutChangedAction()},_saveAssistantRoot:function(t){this._assistantRoots=this._assistantRoots||[],this._assistantRoots.push(t)},_dispose:function(){this._clearItemNodeTemplates(),this._cleanUnusedRoots(),this.callBase.apply(this,arguments)},_cleanUnusedRoots:function(){!this._assistantRoots||m(this._assistantRoots,function(t,e){d(e).remove()})},_clearItemNodeTemplates:function(){m(this.option("items"),function(){delete this.node})},_attachClickEvent:C,_optionChanged:function(t){switch(t.name){case"rows":case"cols":case"screenByWidth":case"singleColumnScreen":this._clearItemNodeTemplates(),this._invalidate();break;case"width":case"height":this.callBase(t),this._update();break;case"onLayoutChanged":this._initLayoutChangedAction();break;case"itemTemplate":this._clearItemNodeTemplates(),this.callBase(t);break;case"currentScreenFactor":break;default:this.callBase(t)}},_dimensionChanged:function(){this._getCurrentScreen()!==this.option("currentScreenFactor")&&this._update()},repaint:function(){this._update()}});A("dxResponsiveBox",Gi);var Ws="dx-form",We="dx-form-group",Hs="dx-form-group-caption",Ut="dx-col-",Wi="dx-field-item",zt="dx-layout-manager-one-col",Hi="dx-field-item-label-content",Ks="dx-layout-manager",Ki="dx-field-item-label",Qe="dx-field-item-content",Us="dx-single-column-item-content",Ui="dx-root-simple-item",zs="dx-form-group-content",qs="dx-field-item-has-group",Xs="dx-field-item-has-tabs",Ys="dx-form-group-with-caption",qt="dx-field-item-tab",Xt="dx-group-colcount-",Yt="group-col-count",js="dx-form-validation-summary",Zs="dx-form-styling-mode-underlined",et="simple",Js=ce.inherit({ctor(t,e){this.editor=t,this.validator=e,this.validationRequestsCallbacks=[];var i=n=>{this.validationRequestsCallbacks.forEach(a=>a(n))};t.validationRequest.add(i),t.on("disposing",function(){t.validationRequest.remove(i)})},getValue(){return this.editor.option("value")},getCurrentValidationError(){return this.editor.option("validationError")},bypass(){return this.editor.option("disabled")},applyValidationResults(t){this.editor.option({validationErrors:t.brokenRules,validationStatus:t.status})},reset(){this.editor.reset()},focus(){this.editor.focus()}}),Qs="dx-validator",jt="valid",eo="invalid",He="pending",dt=st.inherit({_initOptions:function(t){this.callBase.apply(this,arguments),this.option(S.initValidationOptions(t))},_getDefaultOptions(){return c(this.callBase(),{validationRules:[]})},_init(){this.callBase(),this._initGroupRegistration(),this.focused=bn(),this._initAdapter(),this._validationInfo={result:null,deferred:null,skipValidation:!1}},_initGroupRegistration(){var t=this._findGroup();this._groupWasInit||this.on("disposing",function(e){S.removeRegisteredValidator(e.component._validationGroup,e.component)}),(!this._groupWasInit||this._validationGroup!==t)&&(S.removeRegisteredValidator(this._validationGroup,this),this._groupWasInit=!0,this._validationGroup=t,S.registerValidatorInGroup(t,this))},_setOptionsByReference(){this.callBase(),c(this._optionsByReference,{validationGroup:!0})},_getEditor(){var t=this.$element()[0];return fi(t,"dx-validation-target")},_initAdapter(){var t=this._getEditor(),e=this.option("adapter");if(!e){if(t){e=new Js(t,this),e.validationRequestsCallbacks.push(n=>{this._validationInfo.skipValidation||this.validate(n)}),this.option("adapter",e);return}throw ee.Error("E0120")}var i=e.validationRequestsCallbacks;i&&i.push(n=>{this.validate(n)})},_toggleRTLDirection(t){var e,i,n,a=(e=(i=this.option("adapter"))===null||i===void 0||(n=i.editor)===null||n===void 0?void 0:n.option("rtlEnabled"))!==null&&e!==void 0?e:t;this.callBase(a)},_initMarkup(){this.$element().addClass(Qs),this.callBase()},_render(){this.callBase(),this._toggleAccessibilityAttributes()},_toggleAccessibilityAttributes(){var t=this._getEditor();if(t){var e=this.option("validationRules")||[],i=e.some(n=>{var{type:a}=n;return a==="required"})||null;t.isInitialized()&&t.setAria("required",i),t.option("_onMarkupRendered",()=>{t.setAria("required",i)})}},_visibilityChanged(t){t&&this._initGroupRegistration()},_optionChanged(t){switch(t.name){case"validationGroup":this._initGroupRegistration();return;case"validationRules":this._resetValidationRules(),this._toggleAccessibilityAttributes(),this.option("isValid")!==void 0&&this.validate();return;case"adapter":this._initAdapter();break;case"isValid":case"validationStatus":this.option(S.synchronizeValidationOptions(t,this.option()));break;default:this.callBase(t)}},_getValidationRules(){return this._validationRules||(this._validationRules=ue(this.option("validationRules"),(t,e)=>c({},t,{validator:this,index:e}))),this._validationRules},_findGroup(){var t=this.$element();return this.option("validationGroup")||S.findGroup(t,this._modelByElement(t))},_resetValidationRules(){delete this._validationRules},validate(t){var e=this.option("adapter"),i=this.option("name"),n=e.bypass&&e.bypass(),a=t&&t.value!==void 0?t.value:e.getValue(),s=e.getCurrentValidationError&&e.getCurrentValidationError(),o=this._getValidationRules(),r=this._validationInfo&&this._validationInfo.result;if(r&&r.status===He&&r.value===a)return c({},r);var l;return n?l={isValid:!0,status:jt}:s&&s.editorSpecific?(s.validator=this,l={isValid:!1,status:eo,brokenRule:s,brokenRules:[s]}):l=S.validate(a,o,i),l.id=new V().toString(),this._applyValidationResult(l,e),l.complete&&l.complete.then(u=>{u.id===this._validationInfo.result.id&&this._applyValidationResult(u,e)}),c({},this._validationInfo.result)},reset(){var t=this.option("adapter"),e={id:null,isValid:!0,brokenRule:null,brokenRules:null,pendingRules:null,status:jt,complete:null};this._validationInfo.skipValidation=!0,t.reset(),this._validationInfo.skipValidation=!1,this._resetValidationRules(),this._applyValidationResult(e,t)},_updateValidationResult(t){if(!this._validationInfo.result||this._validationInfo.result.id!==t.id){var e=this._validationInfo.deferred&&this._validationInfo.result.complete;this._validationInfo.result=c({},t,{complete:e})}else for(var i in t)i!=="id"&&i!=="complete"&&(this._validationInfo.result[i]=t[i])},_applyValidationResult(t,e){var i=this._createActionByOption("onValidated",{excludeValidators:["readOnly"]});if(t.validator=this,this._updateValidationResult(t),e.applyValidationResults&&e.applyValidationResults(this._validationInfo.result),this.option({validationStatus:this._validationInfo.result.status}),this._validationInfo.result.status===He){this._validationInfo.deferred||(this._validationInfo.deferred=new R,this._validationInfo.result.complete=this._validationInfo.deferred.promise()),this._eventsStrategy.fireEvent("validating",[this._validationInfo.result]);return}this._validationInfo.result.status!==He&&(i(t),this._validationInfo.deferred&&(this._validationInfo.deferred.resolve(t),this._validationInfo.deferred=null))},focus(){var t=this.option("adapter");t&&t.focus&&t.focus()},_useTemplates:function(){return!1}});A("dxValidator",dt);var to=["dxTagBox","dxRangeSlider"],io=["dxCalendar","dxCheckBox","dxHtmlEditor","dxRadioGroup","dxRangeSlider","dxSlider","dxSwitch"];function no(t){var{$parent:e,rootElementCssClassList:i,formOrLayoutManager:n,createComponentCallback:a,item:s,template:o,labelTemplate:r,name:l,formLabelLocation:u,requiredMessageTemplate:h,validationGroup:_,editorValue:p,canAssignUndefinedValueToEditor:f,editorValidationBoundary:y,editorStylingMode:b,showColonAfterLabel:X,managerLabelLocation:Me,itemId:te,managerMarkOptions:we,labelMode:ve,onLabelTemplateRendered:w}=t,T=v(s.isRequired)?s.isRequired:!!oo(s.validationRules),G=s.itemType===et,W=s.helpText?"dx-"+new V:null,D=ro({item:s,id:te,isRequired:T,managerMarkOptions:we,showColonAfterLabel:X,labelLocation:Me,formLabelMode:ve,labelTemplate:r,onLabelTemplateRendered:w}),ie=D.visible&&(D.text||D.labelTemplate&&G),{location:ne,labelID:fe}=D,ge=ne!=="top"&&["dxTextArea","dxRadioGroup","dxCalendar","dxHtmlEditor"].includes(s.editorType),Ce=so({editorType:s.editorType,editorValue:p,defaultEditorName:s.dataField,canAssignUndefinedValueToEditor:f,externalEditorOptions:s.editorOptions,editorInputId:te,editorValidationBoundary:y,editorStylingMode:b,formLabelMode:ve,labelText:D.textWithoutColon,labelMark:D.markOptions.showRequiredMark?String.fromCharCode(160)+D.markOptions.requiredMark:""}),H=D.markOptions.showOptionalMark&&!D.visible&&Ce.labelMode!=="hidden"&&!v(s.helpText),ke=H?D.markOptions.optionalMark:s.helpText;return{$parent:e,rootElementCssClassList:i,formOrLayoutManager:n,createComponentCallback:a,labelOptions:D,labelNeedBaselineAlign:ge,labelLocation:ne,needRenderLabel:ie,item:s,isSimpleItem:G,isRequired:T,template:o,helpID:W,labelID:fe,name:l,helpText:ke,formLabelLocation:u,requiredMessageTemplate:h,validationGroup:_,editorOptions:Ce}}function ao(t){var{showRequiredMark:e,requiredMark:i,showOptionalMark:n,optionalMark:a}=t;return!e&&!n?"":String.fromCharCode(160)+(e?i:a)}function zi(t,e){var{showRequiredMark:i,requiredMark:n,showOptionalMark:a,optionalMark:s}=t;return{showRequiredMark:i&&e,requiredMark:n,showOptionalMark:a&&!e,optionalMark:s}}function so(t){var{editorType:e,defaultEditorName:i,editorValue:n,canAssignUndefinedValueToEditor:a,externalEditorOptions:s,editorInputId:o,editorValidationBoundary:r,editorStylingMode:l,formLabelMode:u,labelText:h,labelMark:_}=t,p={};(n!==void 0||a)&&(p.value=n),to.indexOf(e)!==-1&&(p.value=p.value||[]);var f=s==null?void 0:s.labelMode;v(f)||(f=u==="outside"?"hidden":u);var y=(s==null?void 0:s.stylingMode)||l,b=c(!0,p,s,{inputAttr:{id:o},validationBoundary:r,stylingMode:y,label:h,labelMode:f,labelMark:_});return s&&(b.dataSource&&(b.dataSource=s.dataSource),b.items&&(b.items=s.items)),i&&!b.name&&(b.name=i),b}function oo(t){var e;return t&&t.length&&m(t,function(i,n){if(n.type==="required")return e=!0,!1}),e}function ro(t){var{item:e,id:i,isRequired:n,managerMarkOptions:a,showColonAfterLabel:s,labelLocation:o,labelTemplate:r,formLabelMode:l,onLabelTemplateRendered:u}=t,h=io.includes(e.editorType),_=c({showColon:s,location:o,id:i,visible:l==="outside"||h&&l!=="hidden",isRequired:n},e?e.label:{},{markOptions:zi(a,n),labelTemplate:r,onLabelTemplateRendered:u});return["dxRadioGroup","dxCheckBox","dxLookup","dxSlider","dxRangeSlider","dxSwitch","dxHtmlEditor"].includes(e.editorType)&&(_.labelID="dx-label-".concat(new V)),!_.text&&e.dataField&&(_.text=Ci(e.dataField)),_.text&&(_.textWithoutColon=_.text,_.text+=_.showColon?":":""),_}var lo="dx-field-item-required-mark",qi="dx-field-item-label-location-",uo="dx-field-item-optional-mark",ho="dx-field-item-label-text";function co(t){var{text:e,id:i,location:n,alignment:a,labelID:s=null,markOptions:o={},labelTemplate:r,labelTemplateData:l,onLabelTemplateRendered:u}=t;if((!v(e)||e.length<=0)&&!v(r))return null;var h=d("<label>").addClass(Ki+" "+qi+n).attr("for",i).attr("id",s).css("textAlign",a),_=d("<span>").addClass(Hi),p=d("<span>").addClass(ho).text(e);return r&&(p=d("<div>").addClass("dx-field-item-custom-label-content"),l.text=e,r.render({container:x(p),model:l,onRendered(){u==null||u()}})),h.append(_.append(p,_o(o)))}function _o(t){var e=ao(t);return e===""?null:d("<span>").addClass(t.showRequiredMark?lo:uo).text(e)}function po(t,e,i){var n="".concat(e," > .").concat(Ki,":not(.").concat(qi,"top) > .").concat(Hi),a=t.find(n),s=a.length,o,r,l=0;for(r=0;r<s;r++)o=mo(a[r]),o>l&&(l=o);for(r=0;r<s;r++)a[r].style.width=l+"px"}function mo(t){for(var e=0,i=t.children.length,n=0;n<i;n++){var a=t.children[n];e+=a.offsetWidth}return e}var vo="dx-flex-layout",fo="dx-field-item-optional",go="dx-field-item-required",Xi="dx-field-item-content-wrapper",Co="dx-field-item-content-location-",bo="dx-field-item-label-align",So="dx-field-item-help-text",Io="dx-label-v-align",yo="dx-label-h-align",To="dx-template-wrapper",tt="dx-validation-target",Eo="dx-invalid";function Ao(t){var{$parent:e,rootElementCssClassList:i,formOrLayoutManager:n,createComponentCallback:a,labelOptions:s,labelNeedBaselineAlign:o,labelLocation:r,needRenderLabel:l,formLabelLocation:u,item:h,editorOptions:_,isSimpleItem:p,isRequired:f,template:y,helpID:b,labelID:X,name:Me,helpText:te,requiredMessageTemplate:we,validationGroup:ve}=t,w=d("<div>").addClass(i.join(" ")).appendTo(e);w.addClass(f?go:fo),p&&w.addClass(vo),p&&o&&w.addClass(bo);var T=d("<div>");T.data("dx-form-item",h),T.addClass(Qe).addClass(Co+{right:"left",left:"right",top:"bottom"}[u]);var G=null;l&&(s.labelTemplate&&(s.labelTemplateData=Qt(h,_,n)),G=co(s)),G?(w.append(G),(r==="top"||r==="left")&&w.append(T),r==="right"&&w.prepend(T),r==="top"?w.addClass(Io):w.addClass(yo),(h.editorType==="dxCheckBox"||h.editorType==="dxSwitch")&&g.on(G,ze,function(){g.trigger(T.children(),ze)})):w.append(T);var W;if(y)y.render({container:x(T),model:Qt(h,_,n),onRendered(){var Re=Zt(T),Qi=Oo(Re);Jt(Qi)}});else{var D=d("<div>").appendTo(T);try{W=a(D,h.editorType,_),W.setAria("describedby",b),X&&W.setAria("labelledby",X),W.setAria("required",f)}catch(Re){ee.log("E1035",Re.message)}}var ie=Zt(T),ne=ie&&ie.data(tt);if(ne){var fe=h.label&&h.label.text,ge=fe?null:Me,Ce=fe?h.label.text:ge&&Ci(ge),H;if(p)if(h.validationRules)H=h.validationRules;else{var ke=Sn(we,Ce||"");H=h.isRequired?[{type:"required",message:ke}]:null}Array.isArray(H)&&H.length&&a(ie,dt,{validationRules:H,validationGroup:ve,dataGetter:function(){return{formItem:h}}}),Jt(ne)}if(te&&p){var Ji=T.parent();Ji.append(d("<div>").addClass(Xi).append(T).append(d("<div>").addClass(So).attr("id",b).text(te)))}return{$fieldEditorContainer:T,$rootElement:w,widgetInstance:W}}function Zt(t){var e=t.children().first();return e.hasClass(To)?e.children().first():e}function Oo(t){var e,i;return(t==null?void 0:t.data(tt))||(t==null||(e=t.parent)===null||e===void 0||(i=e.call(t))===null||i===void 0?void 0:i.data(tt))}function Jt(t){if(t&&Le()){var e=".".concat(Xi),i=n=>{var{element:a,component:s}=n,{isValid:o,validationMessageMode:r}=s.option();d(a).parents(e).toggleClass(Eo,o===!1&&(s._isFocused()||r==="always"))};t.on("optionChanged",n=>{n.name==="isValid"&&i(n)}),t.on("focusIn",i).on("focusOut",i).on("enterKey",i)}}function Qt(t,e,i){return{dataField:t.dataField,editorType:t.editorType,editorOptions:e,component:i,name:t.name}}var xo="dx-field-button-item";function Bo(t){var{item:e,$parent:i,rootElementCssClassList:n,validationGroup:a,createComponentCallback:s}=t,o=d("<div>").appendTo(i).addClass(n.join(" ")).addClass(xo).css("textAlign",Do(e.horizontalAlignment));i.css("justifyContent",Lo(e.verticalAlignment));var r=d("<div>").appendTo(o);return{$rootElement:o,buttonInstance:s(r,"dxButton",c({validationGroup:a},e.buttonOptions))}}function Do(t){return v(t)?t:"right"}function Lo(t){switch(t){case"center":return"center";case"bottom":return"flex-end";default:return"flex-start"}}var Mo="dx-field-empty-item";function ei(t){var{$parent:e,rootElementCssClassList:i}=t;return d("<div>").addClass(Mo).html("&nbsp;").addClass(i.join(" ")).appendTo(e)}var wo="dxTextBox",ko="dx-first-row",Ro="dx-last-row",No="dx-first-col",Fo="dx-last-col",$o=Q.inherit({_getDefaultOptions:function(){return c(this.callBase(),{layoutData:{},readOnly:!1,colCount:1,colCountByScreen:void 0,labelLocation:"left",onFieldDataChanged:null,onEditorEnterKey:null,customizeItem:null,alignItemLabels:!0,minColWidth:200,showRequiredMark:!0,screenByWidth:null,showOptionalMark:!1,requiredMark:"*",labelMode:"outside",optionalMark:U.format("dxForm-optionalMark"),requiredMessage:U.getFormatter("dxForm-requiredMessage")})},_setOptionsByReference:function(){this.callBase(),c(this._optionsByReference,{layoutData:!0,validationGroup:!0})},_init:function(){var t=this.option("layoutData");this.callBase(),this._itemWatchers=[],this._itemsRunTimeInfo=new ki,this._updateReferencedOptions(t),this._initDataAndItems(t)},_dispose:function(){this.callBase(),this._cleanItemWatchers()},_initDataAndItems:function(t){this._syncDataWithItems(),this._updateItems(t)},_syncDataWithItems:function(){var t=this.option("layoutData"),e=this.option("items");v(e)&&e.forEach(i=>{if(i.dataField&&this._getDataByField(i.dataField)===void 0){var n;i.editorOptions&&(n=i.editorOptions.value),(v(n)||i.dataField in t)&&this._updateFieldValue(i.dataField,n)}})},_getDataByField:function(t){return t?this.option("layoutData."+t):null},_isCheckboxUndefinedStateEnabled:function(t){var{allowIndeterminateState:e,editorType:i,dataField:n}=t;if(e===!0&&i==="dxCheckBox"){var a=["layoutData",...n.split(".")],s=a.pop(),o=this.option(a.join("."));return o&&s in o}return!1},_updateFieldValue:function(t,e){var i=this.option("layoutData"),n=e;!ae.isWrapped(i[t])&&v(t)?this.option("layoutData."+t,n):ae.isWritableWrapped(i[t])&&(n=L(n)?n():n,i[t](n)),this._triggerOnFieldDataChanged({dataField:t,value:n})},_triggerOnFieldDataChanged:function(t){this._createActionByOption("onFieldDataChanged")(t)},_updateItems:function(t){var e=this,i=this.option("items"),n=v(i),a=e.option("customizeItem"),s=n?i:this._generateItemsByData(t);if(v(s)){var o=[];m(s,function(r,l){e._isAcceptableItem(l)&&(l=e._processItem(l),a&&a(l),I(l)&&ae.unwrap(l.visible)!==!1&&o.push(l))}),(!e._itemWatchers.length||!n)&&e._updateItemWatchers(s),this._setItems(o),this._sortItems()}},_cleanItemWatchers:function(){this._itemWatchers.forEach(function(t){t()}),this._itemWatchers=[]},_updateItemWatchers:function(t){var e=this,i=e._getWatch();t.forEach(function(n){I(n)&&v(n.visible)&&L(i)&&e._itemWatchers.push(i(function(){return ae.unwrap(n.visible)},function(){e._updateItems(e.option("layoutData")),e.repaint()},{skipImmediate:!0}))})},_generateItemsByData:function(t){var e=[];return v(t)&&m(t,function(i){e.push({dataField:i})}),e},_isAcceptableItem:function(t){var e=t.dataField||t,i=this._getDataByField(e);return!(L(i)&&!ae.isWrapped(i))},_processItem:function(t){if(typeof t=="string"&&(t={dataField:t}),typeof t=="object"&&!t.itemType&&(t.itemType=et),!v(t.editorType)&&v(t.dataField)){var e=this._getDataByField(t.dataField);t.editorType=v(e)?this._getEditorTypeByDataType(In(e)):wo}if(t.editorType==="dxCheckBox"){var i;t.allowIndeterminateState=(i=t.allowIndeterminateState)!==null&&i!==void 0?i:!0}return t},_getEditorTypeByDataType:function(t){switch(t){case"number":return"dxNumberBox";case"date":return"dxDateBox";case"boolean":return"dxCheckBox";default:return"dxTextBox"}},_sortItems:function(){yn(this._items,"visibleIndex"),this._sortIndexes()},_sortIndexes:function(){this._items.sort(function(t,e){var i=t.visibleIndex,n=e.visibleIndex,a;return i>n?a=1:i<n?a=-1:a=0,a})},_initMarkup:function(){this._itemsRunTimeInfo.clear(),this.$element().addClass(Ks),this.callBase(),this._renderResponsiveBox()},_renderResponsiveBox:function(){var t=[];if(this._items&&this._items.length){var e=this._getColCount(),i=d("<div>").appendTo(this.$element());this._prepareItemsWithMerging(e);var n=this._generateLayoutItems();this._responsiveBox=this._createComponent(i,Gi,this._getResponsiveBoxConfig(n,e,t)),N()||this._renderTemplates(t)}},_itemStateChangedHandler:function(t){this._refresh()},_renderTemplates:function(t){var e=this,i=0;t.forEach(n=>{var a,{item:s}=n;s!=null&&(a=s.label)!==null&&a!==void 0&&a.template&&i++}),m(t,function(n,a){switch(a.itemType){case"empty":ei(a);break;case"button":e._renderButtonItem(a);break;default:e._renderFieldItem(a,i)}})},_getResponsiveBoxConfig:function(t,e,i){var n=this,a=n.option("colCountByScreen"),s=a&&a.xs;return{onItemStateChanged:this._itemStateChangedHandler.bind(this),onLayoutChanged:function(){var o=n.option("onLayoutChanged"),r=n.isSingleColumnMode();o&&(n.$element().toggleClass(zt,r),o(r))},onContentReady:function(o){N()&&n._renderTemplates(i),n.option("onLayoutChanged")&&n.$element().toggleClass(zt,n.isSingleColumnMode(o.component))},itemTemplate:function(o,r,l){if(!!o.location){var u=d(l),h=o.location.row*e,_=n._items[o.location.col+h];if(!!_){var p=[_.cssClass];u.toggleClass(Us,n.isSingleColumnMode(this)),o.location.row===0&&p.push(ko),o.location.col===0&&p.push(No),_.itemType===et&&n.option("isRoot")&&u.addClass(Ui);var f=o.location.col===e-1||o.location.col+o.location.colspan===e,y=n._getRowsCount(),b=o.location.row===y-1;f&&p.push(Fo),b&&p.push(Ro),_.itemType!=="empty"&&(p.push(Wi),p.push(n.option("cssItemClass")),v(_.col)&&p.push("dx-col-"+_.col)),i.push({itemType:_.itemType,item:_,$parent:u,rootElementCssClassList:p})}}},cols:n._generateRatio(e),rows:n._generateRatio(n._getRowsCount(),!0),dataSource:t,screenByWidth:n.option("screenByWidth"),singleColumnScreen:s?!1:"xs"}},_getColCount:function(){var t=this.option("colCount"),e=this.option("colCountByScreen");if(e){var i=this.option("form").getTargetScreenFactor();i||(i=N()?bi(this.option("screenByWidth")):"lg"),t=e[i]||t}if(t==="auto"){if(this._cashedColCount)return this._cashedColCount;this._cashedColCount=t=this._getMaxColCount()}return t<1?1:t},_getMaxColCount:function(){if(!N())return 1;var t=this.option("minColWidth"),e=B(this.$element()),i=this._items.length,n=Math.floor(e/t)||1;return i<n?i:n},isCachedColCountObsolete:function(){return this._cashedColCount&&this._getMaxColCount()!==this._cashedColCount},_prepareItemsWithMerging:function(t){var e=this._items.slice(0),i,n,a=[],s,o;for(o=0;o<e.length;o++)if(i=e[o],a.push(i),(this.option("alignItemLabels")||i.alignItemLabels||i.colSpan)&&(i.col=this._getColByIndex(a.length-1,t)),i.colSpan>1&&i.col+i.colSpan<=t){for(n=[],s=0;s<i.colSpan-1;s++)n.push({merged:!0});a=a.concat(n)}else delete i.colSpan;this._setItems(a)},_getColByIndex:function(t,e){return t%e},_setItems:function(t){this._items=t,this._cashedColCount=null},_generateLayoutItems:function(){var t=this._items,e=this._getColCount(),i=[],n,a;for(a=0;a<t.length;a++)if(n=t[a],!n.merged){var s={location:{row:parseInt(a/e),col:this._getColByIndex(a,e)}};v(n.disabled)&&(s.disabled=n.disabled),v(n.visible)&&(s.visible=n.visible),v(n.colSpan)&&(s.location.colspan=n.colSpan),v(n.rowSpan)&&(s.location.rowspan=n.rowSpan),i.push(s)}return i},_renderEmptyItem:function(t){ei({$container:t})},_renderButtonItem:function(t){var{item:e,$parent:i,rootElementCssClassList:n}=t,{$rootElement:a,buttonInstance:s}=Bo({item:e,$parent:i,rootElementCssClassList:n,validationGroup:this.option("validationGroup"),createComponentCallback:this._createComponent.bind(this)});this._itemsRunTimeInfo.add({item:e,widgetInstance:s,guid:e.guid,$itemContainer:a})},_renderFieldItem:function(t,e){var i,n,{item:a,$parent:s,rootElementCssClassList:o}=t,r=this._getDataByField(a.dataField),l=!1;if(r===void 0){var{allowIndeterminateState:u,editorType:h,dataField:_}=a;l=this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:u,editorType:h,dataField:_})}var p=a.dataField||a.name,f=this._getFormOrThis(),{$fieldEditorContainer:y,widgetInstance:b,$rootElement:X}=Ao(no({$parent:s,rootElementCssClassList:o,item:a,name:p,editorValue:r,canAssignUndefinedValueToEditor:l,formOrLayoutManager:this._getFormOrThis(),createComponentCallback:this._createComponent.bind(this),formLabelLocation:this.option("labelLocation"),requiredMessageTemplate:this.option("requiredMessage"),validationGroup:this.option("validationGroup"),editorValidationBoundary:this.option("validationBoundary"),editorStylingMode:this.option("form")&&this.option("form").option("stylingMode"),showColonAfterLabel:this.option("showColonAfterLabel"),managerLabelLocation:this.option("labelLocation"),template:a.template?this._getTemplate(a.template):null,labelTemplate:(i=a.label)!==null&&i!==void 0&&i.template?this._getTemplate(a.label.template):null,itemId:this.option("form")&&this.option("form").getItemID(p),managerMarkOptions:this._getMarkOptions(),labelMode:this.option("labelMode"),onLabelTemplateRendered:()=>{this._incTemplateRenderedCallCount(),this._shouldAlignLabelsOnTemplateRendered(f,e)&&f._alignLabels(this,this.isSingleColumnMode(f))}}));(n=this.option("onFieldItemRendered"))===null||n===void 0||n(),b&&a.dataField&&this._bindDataField(b,a.dataField,a.editorType,y),this._itemsRunTimeInfo.add({item:a,widgetInstance:b,guid:a.guid,$itemContainer:X})},_incTemplateRenderedCallCount(){var t;this._labelTemplateRenderedCallCount=((t=this._labelTemplateRenderedCallCount)!==null&&t!==void 0?t:0)+1},_shouldAlignLabelsOnTemplateRendered(t,e){return t.option("templatesRenderAsynchronously")&&this._labelTemplateRenderedCallCount===e},_getMarkOptions:function(){return{showRequiredMark:this.option("showRequiredMark"),requiredMark:this.option("requiredMark"),showOptionalMark:this.option("showOptionalMark"),optionalMark:this.option("optionalMark")}},_getFormOrThis:function(){return this.option("form")||this},_bindDataField:function(t,e,i,n){var a=this._getFormOrThis();t.on("enterKey",function(s){a._createActionByOption("onEditorEnterKey")(c(s,{dataField:e}))}),this._createWatcher(t,n,e),this.linkEditorToDataField(t,e,i)},_createWatcher:function(t,e,i){var n=this,a=n._getWatch();if(!!L(a)){var s=a(function(){return n._getDataByField(i)},function(){var o=n._getDataByField(i);if(t.NAME==="dxTagBox"){var r=t.option("value");if(o!==r&&function(l,u){if(!Array.isArray(l)||!Array.isArray(u)||l.length!==u.length)return!1;for(var h=0;h<l.length;h++)if(l[h]!==u[h])return!1;return!0}(o,r))return}t.option("value",o)},{deep:!0,skipImmediate:!0});g.on(e,Tn,s)}},_getWatch:function(){if(!v(this._watch)){var t=this.option("form");this._watch=t&&t.option("integrationOptions.watchMethod")}return this._watch},_createComponent:function(t,e,i){var n=this.option("readOnly"),a=this.callBase(t,e,i);return n&&a.option("readOnly",n),this.on("optionChanged",function(s){s.name==="readOnly"&&!v(i.readOnly)&&a.option(s.name,s.value)}),a},_generateRatio:function(t,e){var i=[],n,a;for(a=0;a<t;a++)n={ratio:1},e&&(n.baseSize="auto"),i.push(n);return i},_getRowsCount:function(){return Math.ceil(this._items.length/this._getColCount())},_updateReferencedOptions:function(t){var e=this.option("layoutData");I(e)&&Object.getOwnPropertyNames(e).forEach(i=>delete this._optionsByReference["layoutData."+i]),I(t)&&Object.getOwnPropertyNames(t).forEach(i=>this._optionsByReference["layoutData."+i]=!0)},_resetWidget(t){this._disableEditorValueChangedHandler=!0,t.reset(),this._disableEditorValueChangedHandler=!1,t.option("isValid",!0)},_optionChanged(t){if(t.fullName.search("layoutData.")!==0)switch(t.name){case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":this._cashedRequiredConfig=null,this._invalidate();break;case"layoutData":this._updateReferencedOptions(t.value),this.option("items")?Ae(t.value)||this._itemsRunTimeInfo.each((e,i)=>{if(v(i.item)){var n=i.item.dataField;if(n&&v(i.widgetInstance)){var a=J(n),s=a(t.value),{allowIndeterminateState:o,editorType:r}=i.item;s!==void 0||this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:o,editorType:r,dataField:n})?i.widgetInstance.option("value",s):this._resetWidget(i.widgetInstance)}}}):(this._initDataAndItems(t.value),this._invalidate());break;case"items":this._cleanItemWatchers(),this._initDataAndItems(t.value),this._invalidate();break;case"alignItemLabels":case"labelLocation":case"labelMode":case"requiredMessage":this._invalidate();break;case"customizeItem":this._updateItems(this.option("layoutData")),this._invalidate();break;case"colCount":this._resetColCount();break;case"minColWidth":this.option("colCount")==="auto"&&this._resetColCount();break;case"readOnly":break;case"width":this.callBase(t),this.option("colCount")==="auto"&&this._resetColCount();break;case"onFieldDataChanged":break;default:this.callBase(t)}},_resetColCount:function(){this._cashedColCount=null,this._invalidate()},linkEditorToDataField(t,e){this.on("optionChanged",i=>{i.fullName==="layoutData.".concat(e)&&t._setOptionWithoutOptionChange("value",i.value)}),t.on("valueChanged",i=>{var n=I(i.value)||Array.isArray(i.value);!this._disableEditorValueChangedHandler&&!(n&&i.value===i.previousValue)&&this._updateFieldValue(e,i.value)})},_dimensionChanged:function(){this.option("colCount")==="auto"&&this.isCachedColCountObsolete()&&this._eventsStrategy.fireEvent("autoColCountChanged")},updateData:function(t,e){var i=this;I(t)?m(t,function(n,a){i._updateFieldValue(n,a)}):typeof t=="string"&&i._updateFieldValue(t,e)},getEditor:function(t){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(t)||this._itemsRunTimeInfo.findWidgetInstanceByName(t)},isSingleColumnMode:function(t){var e=this._responsiveBox||t;if(e)return e.option("currentScreenFactor")===e.option("singleColumnScreen")},getItemsRunTimeInfo:function(){return this._itemsRunTimeInfo}});A("dxLayoutManager",$o);var ut="dx-validationsummary",Po=ut+"-item",Vo=ut+"-item-data",Yi=xe.inherit({_getDefaultOptions(){return c(this.callBase(),{focusStateEnabled:!1,noDataText:null})},_setOptionsByReference(){this.callBase(),c(this._optionsByReference,{validationGroup:!0})},_init(){this.callBase(),this._initGroupRegistration()},_initGroupRegistration(){var t=this.$element(),e=this.option("validationGroup")||S.findGroup(t,this._modelByElement(t)),i=S.addGroup(e);this._unsubscribeGroup(),this._groupWasInit=!0,this._validationGroup=e,this.groupSubscription=this._groupValidationHandler.bind(this),i.on("validated",this.groupSubscription)},_unsubscribeGroup(){var t=S.getGroupConfig(this._validationGroup);t&&t.off("validated",this.groupSubscription)},_getOrderedItems(t,e){var i=[];return m(t,function(n,a){var s=Z(e,function(o){if(o.validator===a)return!0});s.length&&(i=i.concat(s))}),i},_groupValidationHandler(t){var e=this._getOrderedItems(t.validators,ue(t.brokenRules,function(i){return{text:i.message,validator:i.validator,index:i.index}}));this.validators=t.validators,m(this.validators,(i,n)=>{if(n._validationSummary!==this){var a=this._itemValidationHandler.bind(this);n.on("validated",a),n.on("disposing",function(){n.off("validated",a),n._validationSummary=null,a=null}),n._validationSummary=this}}),this.option("items",e)},_itemValidationHandler(t){for(var{isValid:e,validator:i,brokenRules:n}=t,a=this.option("items"),s=!1,o=0,r=function(){var u=a[o];if(u.validator===i){var h=Z(n||[],function(_){return _.index===u.index})[0];if(e||!h)return a.splice(o,1),s=!0,"continue";h.message!==u.text&&(u.text=h.message,s=!0)}o++};o<a.length;)var l=r();m(n,function(u,h){var _=Z(a,function(p){return p.validator===i&&p.index===h.index})[0];_||(a.push({text:h.message,validator:i,index:h.index}),s=!0)}),s&&(a=this._getOrderedItems(this.validators,a),this.option("items",a))},_initMarkup(){this.$element().addClass(ut),this.callBase()},_optionChanged(t){switch(t.name){case"validationGroup":this._initGroupRegistration();break;default:this.callBase(t)}},_itemClass:()=>Po,_itemDataKey:()=>Vo,_postprocessRenderItem(t){g.on(t.itemElement,"click",function(){t.itemData.validator&&t.itemData.validator.focus&&t.itemData.validator.focus()})},_dispose(){this.callBase(),this._unsubscribeGroup()},refreshValidationGroup(){this._initGroupRegistration()}});A("dxValidationSummary",Yi);var ti="dx-validationgroup",Go="dx-validator",Wo="dx-validationsummary";class Ho extends st{_getDefaultOptions(){return super._getDefaultOptions()}_init(){super._init(),S.addGroup(this)}_initMarkup(){var e=this.$element();e.addClass(ti),e.find(".".concat(Go)).each(function(i,n){dt.getInstance(d(n))._initGroupRegistration()}),e.find(".".concat(Wo)).each(function(i,n){Yi.getInstance(d(n)).refreshValidationGroup()}),super._initMarkup()}validate(){return S.validateGroup(this)}reset(){return S.resetGroup(this)}_dispose(){S.removeGroup(this),this.$element().removeClass(ti),super._dispose()}_useTemplates(){return!1}}A("dxValidationGroup",Ho);var ii="dx-state-focused",Ko=["items","isRequired","validationRules","visible"],Uo=Q.inherit({_init:function(){this.callBase(),this._cachedColCountOptions=[],this._itemsRunTimeInfo=new ki,this._groupsColCount=[],this._attachSyncSubscriptions()},_getDefaultOptions:function(){return c(this.callBase(),{formID:"dx-"+new V,formData:{},colCount:1,screenByWidth:gi,colCountByScreen:void 0,labelLocation:"left",readOnly:!1,onFieldDataChanged:null,customizeItem:null,onEditorEnterKey:null,minColWidth:200,alignItemLabels:!0,alignItemLabelsInAllGroups:!0,alignRootItemLabels:!0,showColonAfterLabel:!0,showRequiredMark:!0,showOptionalMark:!1,requiredMark:"*",optionalMark:U.format("dxForm-optionalMark"),requiredMessage:U.getFormatter("dxForm-requiredMessage"),showValidationSummary:!1,items:void 0,scrollingEnabled:!1,validationGroup:void 0,stylingMode:pi().editorStylingMode,labelMode:"outside"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return Le()},options:{showColonAfterLabel:!1,labelLocation:"top"}}])},_setOptionsByReference:function(){this.callBase(),c(this._optionsByReference,{formData:!0,validationGroup:!0})},_getGroupColCount:function(t){return parseInt(t.attr(Yt))},_applyLabelsWidthByCol:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,a=i.inOneColumn?Wi:Ut+e,s=i.excludeTabbed?":not(.".concat(qt,")"):"";po(t,".".concat(a).concat(s),n)},_applyLabelsWidth:function(t,e,i,n,a){n=i?1:n||this._getGroupColCount(t);var s={excludeTabbed:e,inOneColumn:i},o;for(o=0;o<n;o++)this._applyLabelsWidthByCol(t,o,s,a)},_getGroupElementsInColumn:function(t,e,i){var n=v(i)?"."+Xt+i:"",a="."+Ut+e+" > ."+Qe+" > ."+We+n;return t.find(a)},_applyLabelsWidthWithGroups:function(t,e,i,n){if(this.option("alignRootItemLabels")===!0)for(var a=t.find(".".concat(Ui)),s=0;s<e;s++)this._applyLabelsWidthByCol(a,s,i,n);var o=this.option("alignItemLabelsInAllGroups");if(o)this._applyLabelsWidthWithNestedGroups(t,e,i,n);else{var r=this.$element().find("."+We),l;for(l=0;l<r.length;l++)this._applyLabelsWidth(r.eq(l),i,void 0,void 0,n)}},_applyLabelsWidthWithNestedGroups:function(t,e,i,n){var a={excludeTabbed:i},s,o,r,l;for(s=0;s<e;s++)for(l=this._getGroupElementsInColumn(t,s),this._applyLabelsWidthByCol(l,0,a,n),o=0;o<this._groupsColCount.length;o++){l=this._getGroupElementsInColumn(t,s,this._groupsColCount[o]);var u=this._getGroupColCount(l);for(r=1;r<u;r++)this._applyLabelsWidthByCol(l,r,a,n)}},_labelLocation:function(){return this.option("labelLocation")},_alignLabelsInColumn:function(t){var{layoutManager:e,inOneColumn:i,$container:n,excludeTabbed:a,items:s}=t;if(!(!N()||this._labelLocation()==="top")){var o=zi(e._getMarkOptions());i?this._applyLabelsWidth(n,a,!0,void 0,o):this._checkGrouping(s)?this._applyLabelsWidthWithGroups(n,e._getColCount(),a,o):this._applyLabelsWidth(n,a,!1,e._getColCount(),o)}},_prepareFormData:function(){v(this.option("formData"))||this.option("formData",{})},_setStylingModeClass:function(){this.option("stylingMode")==="underlined"&&this.$element().addClass(Zs)},_initMarkup:function(){S.addGroup(this._getValidationGroup()),this._clearCachedInstances(),this._prepareFormData(),this.$element().addClass(Ws),this._setStylingModeClass(),this.callBase(),this.setAria("role","form",this.$element()),this.option("scrollingEnabled")&&this._renderScrollable(),this._renderLayout(),this._renderValidationSummary(),this._lastMarkupScreenFactor=this._targetScreenFactor||this._getCurrentScreenFactor()},_getCurrentScreenFactor:function(){return N()?bi(this.option("screenByWidth")):"lg"},_clearCachedInstances:function(){this._itemsRunTimeInfo.clear(),this._cachedLayoutManagers=[]},_alignLabels:function(t,e){this._alignLabelsInColumn({$container:this.$element(),layoutManager:t,excludeTabbed:!0,items:this.option("items"),inOneColumn:e}),vi(this.$element().find(".".concat(Hn)))},_clean:function(){this._clearValidationSummary(),this.callBase(),this._groupsColCount=[],this._cachedColCountOptions=[],this._lastMarkupScreenFactor=void 0},_renderScrollable:function(){var t=this.option("useNativeScrolling");this._scrollable=new Ti(this.$element(),{useNative:!!t,useSimulatedScrollbar:!t,useKeyboard:!1,direction:"both",bounceEnabled:!1})},_getContent:function(){return this.option("scrollingEnabled")?d(this._scrollable.content()):this.$element()},_clearValidationSummary:function(){var t;(t=this._$validationSummary)===null||t===void 0||t.remove(),this._$validationSummary=void 0,this._validationSummary=void 0},_renderValidationSummary:function(){this._clearValidationSummary(),this.option("showValidationSummary")&&(this._$validationSummary=d("<div>").addClass(js).appendTo(this._getContent()),this._validationSummary=this._$validationSummary.dxValidationSummary({validationGroup:this._getValidationGroup()}).dxValidationSummary("instance"))},_prepareItems(t,e,i,n){if(t){for(var a=[],s=0;s<t.length;s++){var o=t[s],r=Fi(i,Ze(s,n)),l={item:o,itemIndex:s,path:r},u=this._itemsRunTimeInfo.add(l);if(Xe(o)&&(o={dataField:o}),I(o)){var h=Si({},o);l.preparedItem=h,h.guid=u,this._tryPrepareGroupItem(h),this._tryPrepareTabbedItem(h,r),this._tryPrepareItemTemplate(h),e&&(h.cssItemClass=qt),h.items&&(h.items=this._prepareItems(h.items,e,r)),a.push(h)}else a.push(o)}return a}},_tryPrepareGroupItem:function(t){t.itemType==="group"&&(t.alignItemLabels=he(t.alignItemLabels,!0),t._prepareGroupItemTemplate=e=>{t.template&&(t.groupContentTemplate=this._getTemplate(e)),t.template=this._itemGroupTemplate.bind(this,t)},t._prepareGroupItemTemplate(t.template))},_tryPrepareTabbedItem:function(t,e){t.itemType==="tabbed"&&(t.template=this._itemTabbedTemplate.bind(this,t),t.tabs=this._prepareItems(t.tabs,!0,e,!0))},_tryPrepareItemTemplate:function(t){t.template&&(t.template=this._getTemplate(t.template))},_checkGrouping:function(t){if(t)for(var e=0;e<t.length;e++){var i=t[e];if(i.itemType==="group")return!0}},_renderLayout:function(){var t=this,e=t.option("items"),i=t._getContent();e=t._prepareItems(e),t._rootLayoutManager=t._renderLayoutManager(i,this._createLayoutManagerOptions(e,{isRoot:!0,colCount:t.option("colCount"),alignItemLabels:t.option("alignItemLabels"),screenByWidth:this.option("screenByWidth"),colCountByScreen:this.option("colCountByScreen"),onLayoutChanged:function(n){t._alignLabels.bind(t)(t._rootLayoutManager,n)},onContentReady:function(n){t._alignLabels(n.component,n.component.isSingleColumnMode())}}))},_tryGetItemsForTemplate:function(t){return t.items||[]},_itemTabbedTemplate:function(t,e,i){var n=d("<div>").appendTo(i),a=c({},t.tabPanelOptions,{dataSource:t.tabs,onItemRendered:r=>{var l,u;(l=t.tabPanelOptions)===null||l===void 0||(u=l.onItemRendered)===null||u===void 0||u.call(l,r),En(r.itemElement)},itemTemplate:(r,l,u)=>{var h=d(u),_=he(r.alignItemLabels,!0),p=this._renderLayoutManager(h,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(r),{colCount:r.colCount,alignItemLabels:_,screenByWidth:this.option("screenByWidth"),colCountByScreen:r.colCountByScreen,cssItemClass:r.cssItemClass,onLayoutChanged:f=>{this._alignLabelsInColumn({$container:h,layoutManager:p,items:r.items,inOneColumn:f})}}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(r.guid,{layoutManager:p}),_&&this._alignLabelsInColumn({$container:h,layoutManager:p,items:r.items,inOneColumn:p.isSingleColumnMode()})}}),s=(r,l)=>{Array.isArray(r)&&r.forEach(u=>this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(u.guid,{widgetInstance:l}))},o=this._createComponent(n,lt,a);d(i).parent().addClass(Xs),o.on("optionChanged",r=>{r.fullName==="dataSource"&&s(r.value,r.component)}),s([{guid:t.guid},...t.tabs],o)},_itemGroupTemplate:function(t,e,i){var n=d("<div>").toggleClass(Ys,v(t.caption)&&t.caption.length).addClass(We).appendTo(i);d(i).parent().addClass(qs);var a,s;t.caption&&d("<span>").addClass(Hs).text(t.caption).appendTo(n);var o=d("<div>").addClass(zs).appendTo(n);t.groupContentTemplate?(t._renderGroupContentTemplate=()=>{o.empty();var r={formData:this.option("formData"),component:this};t.groupContentTemplate.render({model:r,container:x(o)})},t._renderGroupContentTemplate()):(s=this._renderLayoutManager(o,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(t),{colCount:t.colCount,colCountByScreen:t.colCountByScreen,alignItemLabels:t.alignItemLabels,cssItemClass:t.cssItemClass})),this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(t.guid,{layoutManager:s}),a=s._getColCount(),this._groupsColCount.includes(a)||this._groupsColCount.push(a),n.addClass(Xt+a),n.attr(Yt,a))},_createLayoutManagerOptions:function(t,e){return Ms({form:this,formOptions:this.option(),$formElement:this.$element(),items:t,validationGroup:this._getValidationGroup(),extendedLayoutManagerOptions:e,onFieldDataChanged:i=>{this._isDataUpdating||this._triggerOnFieldDataChanged(i)},onContentReady:i=>{this._itemsRunTimeInfo.addItemsOrExtendFrom(i.component._itemsRunTimeInfo),e.onContentReady&&e.onContentReady(i)},onDisposing:i=>{var{component:n}=i,a=n.getItemsRunTimeInfo();this._itemsRunTimeInfo.removeItemsByItems(a)},onFieldItemRendered:()=>{var i;(i=this._validationSummary)===null||i===void 0||i.refreshValidationGroup()}})},_renderLayoutManager:function(t,e){var i={lg:e.colCount,md:e.colCount,sm:e.colCount,xs:1};this._cachedColCountOptions.push({colCountByScreen:c(i,e.colCountByScreen)});var n=d("<div>");n.appendTo(t);var a=this._createComponent(n,"dxLayoutManager",e);return a.on("autoColCountChanged",()=>{this._clearAutoColCountChangedTimeout(),this.autoColCountChangedTimeoutId=setTimeout(()=>!this._disposed&&this._refresh(),0)}),this._cachedLayoutManagers.push(a),a},_getValidationGroup:function(){return this.option("validationGroup")||this},_createComponent:function(t,e,i){return i=i||{},this._extendConfig(i,{readOnly:this.option("readOnly")}),this.callBase(t,e,i)},_attachSyncSubscriptions:function(){var t=this;t.on("optionChanged",function(e){var i=e.fullName;i==="formData"&&(v(e.value)||t._options.silent("formData",e.value={}),t._triggerOnFieldDataChangedByDataSet(e.value)),t._cachedLayoutManagers.length&&m(t._cachedLayoutManagers,function(n,a){i==="formData"&&(t._isDataUpdating=!0,a.option("layoutData",e.value),t._isDataUpdating=!1),(e.name==="readOnly"||e.name==="disabled")&&a.option(i,e.value)})})},_optionChanged:function(t){var e=t.fullName.split(".");e.length>1&&e[0].search("items")!==-1&&this._itemsOptionChangedHandler(t)||e.length>1&&e[0].search("formData")!==-1&&this._formDataOptionChangedHandler(t)||this._defaultOptionChangedHandler(t)},_defaultOptionChangedHandler:function(t){switch(t.name){case"formData":this.option("items")?Ae(t.value)&&this._resetValues():this._invalidate();break;case"onFieldDataChanged":break;case"items":case"colCount":case"onEditorEnterKey":case"labelLocation":case"labelMode":case"alignItemLabels":case"showColonAfterLabel":case"customizeItem":case"alignItemLabelsInAllGroups":case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":case"requiredMessage":case"scrollingEnabled":case"formID":case"colCountByScreen":case"screenByWidth":case"stylingMode":this._invalidate();break;case"showValidationSummary":this._renderValidationSummary();break;case"minColWidth":this.option("colCount")==="auto"&&this._invalidate();break;case"alignRootItemLabels":case"readOnly":break;case"width":this.callBase(t),this._rootLayoutManager.option(t.name,t.value),this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode());break;case"validationGroup":S.removeGroup(t.previousValue||this),this._invalidate();break;default:this.callBase(t)}},_itemsOptionChangedHandler:function(t){var e=t.fullName.split("."),i=t.value,n=this._getItemPath(e),a=this.option(n),s=t.fullName.replace(n+".",""),o=s.split(".")[0].replace(/\[\d+]/,""),r=this._tryCreateItemOptionAction(o,a,a[o],t.previousValue,n),l=this._tryExecuteItemOptionAction(r)||this._tryChangeLayoutManagerItemOption(t.fullName,i);if(!l&&a){this._changeItemOption(a,s,i);var u=this._generateItemsFromData(this.option("items"));this.option("items",u),l=!0}return l},_formDataOptionChangedHandler:function(t){var e=t.fullName.split("."),i=t.value,n=e.slice(1).join("."),a=this.getEditor(n);return a?a.option("value",i):this._triggerOnFieldDataChanged({dataField:n,value:i}),!0},_tryCreateItemOptionAction:function(t,e,i,n,a){return t==="tabs"&&(this._itemsRunTimeInfo.removeItemsByPathStartWith("".concat(a,".tabs")),i=this._prepareItems(i,!0,a,!0)),Ps(t,{item:e,value:i,previousValue:n,itemsRunTimeInfo:this._itemsRunTimeInfo})},_tryExecuteItemOptionAction:function(t){return t&&t.tryExecute()},_updateValidationGroupAndSummaryIfNeeded:function(t){var e=Gt(t);if(Ko.indexOf(e)>-1&&(S.addGroup(this._getValidationGroup()),this.option("showValidationSummary"))){var i;(i=this._validationSummary)===null||i===void 0||i.refreshValidationGroup()}},_setLayoutManagerItemOption(t,e,i,n){if(this._updateLockCount>0){!t._updateLockCount&&t.beginUpdate();var a=this._itemsRunTimeInfo.findKeyByPath(n);this.postponedOperations.add(a,()=>(!t._disposed&&t.endUpdate(),new R().resolve()))}var s=o=>{if(o.component.off("contentReady",s),$i(n)){var r=Ls(n),l=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(r);l&&this._alignLabelsInColumn({items:l.option("items"),layoutManager:l,$container:l.$element(),inOneColumn:l.isSingleColumnMode()})}else this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())};t.on("contentReady",s),t.option(e,i),this._updateValidationGroupAndSummaryIfNeeded(e)},_tryChangeLayoutManagerItemOption(t,e){var i=t.split("."),n=Gt(t);if(n==="items"&&i.length>1){var a=this._getItemPath(i),s=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(a);if(s){this._itemsRunTimeInfo.removeItemsByItems(s.getItemsRunTimeInfo());var o=this._prepareItems(e,!1,a);return this._setLayoutManagerItemOption(s,n,o,a),!0}}else if(i.length>2){var r=i.length-2,l=this._getItemPath(i.slice(0,r)),u=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(l);if(u){var h=oe(i[r],n);if(n==="editorType"&&u.option(h)!==e)return!1;if(n==="visible"){var _=this.option(oe(l,"items"));if(_&&_.length){var p=u.option("items");_.forEach((f,y)=>{var b=p[y];b.visibleIndex=f.visibleIndex})}}return this._setLayoutManagerItemOption(u,h,e,l),!0}}return!1},_tryChangeLayoutManagerItemOptions(t,e){var i;return this.beginUpdate(),m(e,(n,a)=>{if(i=this._tryChangeLayoutManagerItemOption(oe(t,n),a),!i)return!1}),this.endUpdate(),i},_getItemPath:function(t){var e=t[0],i;for(i=1;i<t.length&&t[i].search(/items\[\d+]|tabs\[\d+]/)!==-1;i++)e+="."+t[i];return e},_triggerOnFieldDataChanged:function(t){this._createActionByOption("onFieldDataChanged")(t)},_triggerOnFieldDataChangedByDataSet:function(t){var e=this;t&&I(t)&&m(t,function(i,n){e._triggerOnFieldDataChanged({dataField:i,value:n})})},_updateFieldValue:function(t,e){if(v(this.option("formData"))){var i=this.getEditor(t);if(this.option("formData."+t,e),i){var n=i.option("value");n!==e&&i.option("value",e)}}},_generateItemsFromData:function(t){var e=this.option("formData"),i=[];return!t&&v(e)&&m(e,function(n){i.push({dataField:n})}),t&&m(t,function(n,a){I(a)?i.push(a):i.push({dataField:a})}),i},_getItemByField:function(t,e){var i=this,n=I(t)?t:i._getFieldParts(t),a=n.fieldName,s=n.fieldPath,o;return e.length&&m(e,function(r,l){var u=l.itemType;if(s.length){var h=s.slice();l=i._getItemByFieldPath(h,a,l)}else if(u==="group"&&!(l.caption||l.name)||u==="tabbed"&&!l.name){var _=i._getSubItemField(u);l.items=i._generateItemsFromData(l.items),l=i._getItemByField({fieldName:a,fieldPath:s},l[_])}if(Ds(l,a))return o=l,!1}),o},_getFieldParts:function(t){for(var e=t,i=e.indexOf("."),n=[];i!==-1;)n.push(e.substr(0,i)),e=e.substr(i+1),i=e.indexOf(".");return{fieldName:e,fieldPath:n.reverse()}},_getItemByFieldPath:function(t,e,i){var n=i.itemType,a=this._getSubItemField(n),s=n==="group"||n==="tabbed"||i.title,o;do if(s){var r=i.name||i.caption||i.title,l=v(r),u=Je(r),h=void 0;if(i[a]=this._generateItemsFromData(i[a]),l&&(h=t.pop()),!t.length&&(o=this._getItemByField(e,i[a]),o))break;(!l||l&&u===h)&&t.length&&(o=this._searchItemInEverySubItem(t,e,i[a]))}else break;while(t.length&&!v(o));return o},_getSubItemField:function(t){return t==="tabbed"?"tabs":"items"},_searchItemInEverySubItem:function(t,e,i){var n=this,a;return m(i,function(s,o){if(a=n._getItemByFieldPath(t.slice(),e,o),a)return!1}),a||(a=!1),a},_changeItemOption:function(t,e,i){I(t)&&(t[e]=i)},_dimensionChanged:function(){var t=this._getCurrentScreenFactor();this._lastMarkupScreenFactor!==t&&(this._isColCountChanged(this._lastMarkupScreenFactor,t)&&(this._targetScreenFactor=t,this._refresh(),this._targetScreenFactor=void 0),this._lastMarkupScreenFactor=t)},_isColCountChanged:function(t,e){var i=!1;return m(this._cachedColCountOptions,function(n,a){if(a.colCountByScreen[t]!==a.colCountByScreen[e])return i=!0,!1}),i},_refresh:function(){var t="."+ii+" input, ."+ii+" textarea";g.trigger(this.$element().find(t),"change"),this.callBase()},_resetValues:function(){this._itemsRunTimeInfo.each(function(t,e){v(e.widgetInstance)&&An.isEditor(e.widgetInstance)&&(e.widgetInstance.reset(),e.widgetInstance.option("isValid",!0))}),S.resetGroup(this._getValidationGroup())},_updateData:function(t,e,i){var n=this,a=i?e:t;I(a)?m(a,function(s,o){n._updateData(i?t+"."+s:s,o,I(o))}):Xe(t)&&n._updateFieldValue(t,e)},registerKeyHandler:function(t,e){this.callBase(t,e),this._itemsRunTimeInfo.each(function(i,n){v(n.widgetInstance)&&n.widgetInstance.registerKeyHandler(t,e)})},_focusTarget:function(){return this.$element().find("."+Qe+" [tabindex]").first()},_visibilityChanged:function(){this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())},_clearAutoColCountChangedTimeout:function(){this.autoColCountChangedTimeoutId&&(clearTimeout(this.autoColCountChangedTimeoutId),this.autoColCountChangedTimeoutId=void 0)},_dispose:function(){this._clearAutoColCountChangedTimeout(),S.removeGroup(this._getValidationGroup()),this.callBase()},resetValues:function(){this._resetValues()},updateData:function(t,e){this._updateData(t,e)},getEditor:function(t){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(t)||this._itemsRunTimeInfo.findWidgetInstanceByName(t)},getButton:function(t){return this._itemsRunTimeInfo.findWidgetInstanceByName(t)},updateDimensions:function(){var t=this,e=new R;return t._scrollable?t._scrollable.update().done(function(){e.resolveWith(t)}):e.resolveWith(t),e.promise()},itemOption:function(t,e,i){var n=this._generateItemsFromData(this.option("items")),a=this._getItemByField(t,n),s=Pi(n,a);if(!!a)switch(arguments.length){case 1:return a;case 3:var o=this._tryCreateItemOptionAction(e,a,i,a[e],s);this._changeItemOption(a,e,i);var r=oe(s,e);!this._tryExecuteItemOptionAction(o)&&!this._tryChangeLayoutManagerItemOption(r,i)&&this.option("items",n);break;default:if(I(e)&&!this._tryChangeLayoutManagerItemOptions(s,e)){var l;m(e,(u,h)=>{var _=this._tryCreateItemOptionAction(u,a,h,a[u],s);this._changeItemOption(a,u,h),!l&&!this._tryExecuteItemOptionAction(_)&&(l=!0)}),l&&this.option("items",n)}}},validate:function(){return S.validateGroup(this._getValidationGroup())},getItemID:function(t){return"dx_"+this.option("formID")+"_"+(t||new V)},getTargetScreenFactor:function(){return this._targetScreenFactor}});A("dxForm",Uo);var me="dx-buttongroup",zo=me+"-wrapper",ji=me+"-item",qo=me+"-first-item",Xo=me+"-last-item",ni=ji+"-has-width",Yo="dx-shape-standard",jo=xe.inherit({_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Be((t,e,i)=>{this._prepareItemStyles(t);var n=this.option("buttonTemplate");this._createComponent(t,at,c({},i,e,this._getBasicButtonOptions(),{_templateData:this._hasCustomTemplate(n)?i:{},template:i.template||n}))},["text","type","icon","disabled","visible","hint"],this.option("integrationOptions.watchMethod"))})},_getBasicButtonOptions(){return{focusStateEnabled:!1,onClick:null,hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode")}},_getDefaultOptions:function(){return c(this.callBase(),{itemTemplateProperty:null})},_hasCustomTemplate(t){return L(t)||this.option("integrationOptions.templates")[t]},_prepareItemStyles(t){var e=t.data("dxItemIndex");e===0&&t.addClass(qo);var i=this.option("items");i&&e===i.length-1&&t.addClass(Xo),t.addClass(Yo)},_renderItemContent(t){return t.container=d(t.container).parent(),this.callBase(t)},_renderItemContentByNode:function(t,e){return t.container=d(t.container.children().first()),this.callBase(t,e)},_focusTarget(){return this.$element().parent()},_keyboardEventBindingTarget(){return this._focusTarget()},_refreshContent(){this._prepareContent(),this._renderContent()},_itemClass:()=>ji,_itemSelectHandler:function(t){this.option("selectionMode")==="single"&&this.isItemSelected(t.currentTarget)||this.callBase(t)}}),Zi=Q.inherit({_getDefaultOptions(){return c(this.callBase(),{hoverStateEnabled:!0,focusStateEnabled:!0,selectionMode:"single",selectedItems:[],selectedItemKeys:[],stylingMode:"contained",keyExpr:"text",items:[],buttonTemplate:"content",onSelectionChanged:null,onItemClick:null})},_init(){this.callBase(),this._createItemClickAction()},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initMarkup(){this.setAria("role","group"),this.$element().addClass(me),this._renderButtons(),this._syncSelectionOptions(),this.callBase()},_fireSelectionChangeEvent:function(t,e){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:t,removedItems:e})},_renderButtons(){var t=d("<div>").addClass(zo).appendTo(this.$element()),e=this.option("selectedItems"),i={selectionMode:this.option("selectionMode"),items:this.option("items"),keyExpr:this.option("keyExpr"),buttonTemplate:this.option("buttonTemplate"),scrollingEnabled:!1,selectedItemKeys:this.option("selectedItemKeys"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode"),accessKey:this.option("accessKey"),tabIndex:this.option("tabIndex"),noDataText:"",selectionRequired:!1,onItemRendered:n=>{var a=this.option("width");v(a)&&d(n.itemElement).addClass(ni)},onSelectionChanged:n=>{this._syncSelectionOptions(),this._fireSelectionChangeEvent(n.addedItems,n.removedItems)},onItemClick:n=>{this._itemClickAction(n)}};v(e)&&e.length&&(i.selectedItems=e),this._buttonsCollection=this._createComponent(t,jo,i)},_syncSelectionOptions(){this._setOptionWithoutOptionChange("selectedItems",this._buttonsCollection.option("selectedItems")),this._setOptionWithoutOptionChange("selectedItemKeys",this._buttonsCollection.option("selectedItemKeys"))},_optionChanged(t){switch(t.name){case"stylingMode":case"selectionMode":case"keyExpr":case"buttonTemplate":case"items":case"activeStateEnabled":case"focusStateEnabled":case"hoverStateEnabled":case"tabIndex":this._invalidate();break;case"selectedItemKeys":case"selectedItems":this._buttonsCollection.option(t.name,t.value);break;case"onItemClick":this._createItemClickAction();break;case"onSelectionChanged":break;case"width":this.callBase(t),this._buttonsCollection.itemElements().toggleClass(ni,!!t.value);break;default:this.callBase(t)}}});A("dxButtonGroup",Zi);var ai="dx-dropdownbutton",Zo="dx-dropdownbutton-content",si="dx-dropdownbutton-action",oi="dx-dropdownbutton-toggle",Jo="dx-dropdownbutton-has-arrow",Qo="dx-dropdownbutton-popup-wrapper",er="dx-dropdowneditor-overlay",tr="dx-button-text",ir="dx-icon-right",nr=Q.inherit({_getDefaultOptions(){return c(this.callBase(),{itemTemplate:"item",keyExpr:"this",displayExpr:void 0,selectedItem:null,selectedItemKey:null,stylingMode:"outlined",deferRendering:!0,noDataText:U.format("dxCollectionWidget-noDataText"),useSelectMode:!1,splitButton:!1,showArrowIcon:!0,text:"",icon:void 0,onButtonClick:null,onSelectionChanged:null,onItemClick:null,opened:!1,items:null,dataSource:null,focusStateEnabled:!0,hoverStateEnabled:!0,dropDownOptions:{},dropDownContentTemplate:"content",wrapItemText:!1,useItemTextAsTitle:!0,grouped:!1,groupTemplate:"group",buttonGroupOptions:{}})},_setOptionsByReference(){this.callBase(),c(this._optionsByReference,{selectedItem:!0})},_init(){this.callBase(),this._createItemClickAction(),this._createActionClickAction(),this._createSelectionChangedAction(),this._initDataSource(),this._compileKeyGetter(),this._compileDisplayGetter(),this._itemsToDataSource(this.option("items")),this._options.cache("buttonGroupOptions",this.option("buttonGroupOptions")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_initTemplates(){this._templateManager.addDefaultTemplates({content:new On(t=>{var e=d(t.container),i=d("<div>").appendTo(e);this._list=this._createComponent(i,Kn,this._listOptions()),this._list.registerKeyHandler("escape",this._escHandler.bind(this)),this._list.registerKeyHandler("tab",this._escHandler.bind(this)),this._list.registerKeyHandler("leftArrow",this._escHandler.bind(this)),this._list.registerKeyHandler("rightArrow",this._escHandler.bind(this))})}),this.callBase()},_itemsToDataSource:function(t){this._dataSource||(this._dataSource=new xn({store:new Bn({key:this._getKey(),data:t}),pageSize:0}))},_getKey:function(){var t,e=this.option("keyExpr"),i=(t=this._dataSource)===null||t===void 0?void 0:t.key();return v(i)&&(!v(e)||e==="this")?i:e},_compileKeyGetter(){this._keyGetter=J(this._getKey())},_compileDisplayGetter(){this._displayGetter=J(this.option("displayExpr"))},_initMarkup(){this.callBase(),this.$element().addClass(ai),this._renderButtonGroup(),this._updateArrowClass(),v(this.option("selectedItemKey"))&&this._loadSelectedItem().done(this._updateActionButton.bind(this))},_renderFocusTarget:C,_render(){(!this.option("deferRendering")||this.option("opened"))&&this._renderPopup(),this.callBase()},_renderContentImpl(){return this._popup&&this._renderPopupContent(),this.callBase()},_loadSelectedItem(){var t;(t=this._loadSingleDeferred)===null||t===void 0||t.reject();var e=new R;if(this._list&&this._lastSelectedItemData!==void 0){var i=this.option("useSelectMode")?this._list.option("selectedItem"):this._lastSelectedItemData;return e.resolve(i)}this._lastSelectedItemData=void 0;var n=this.option("selectedItemKey");return this._loadSingle(this._getKey(),n).done(e.resolve).fail(()=>{e.resolve(null)}),this._loadSingleDeferred=e,e.promise()},_createActionClickAction(){this._actionClickAction=this._createActionByOption("onButtonClick")},_createSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged")},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_fireSelectionChangedAction(t){var{previousValue:e,value:i}=t;this._selectionChangedAction({item:i,previousItem:e})},_fireItemClickAction(t){var{event:e,itemElement:i,itemData:n}=t;return this._itemClickAction({event:e,itemElement:i,itemData:this._actionItem||n})},_actionButtonConfig(){return{text:this.option("text"),icon:this.option("icon"),elementAttr:{class:si}}},_getButtonGroupItems(){var t=[];return t.push(this._actionButtonConfig()),this.option("splitButton")&&t.push({icon:"spindown",elementAttr:{class:oi}}),t},_buttonGroupItemClick(t){var{event:e,itemData:i}=t,n=i.elementAttr.class===si,a=i.elementAttr.class===oi;a?this.toggle():n&&(this._actionClickAction({event:e,selectedItem:this.option("selectedItem")}),this.option("splitButton")||this.toggle())},_buttonGroupOptions(){var{splitButton:t,showArrowIcon:e,focusStateEnabled:i,hoverStateEnabled:n,stylingMode:a,accessKey:s,tabIndex:o}=this.option(),r=t||!e?"content":(l,u)=>{var{text:h,icon:_}=l,p=de(_),f=h?d("<span>").text(h).addClass(tr):void 0,y=de("spindown").addClass(ir);d(u).append(p,f,y)};return c({items:this._getButtonGroupItems(),onItemClick:this._buttonGroupItemClick.bind(this),width:"100%",height:"100%",selectionMode:"none",onKeyboardHandled:l=>this._keyboardHandler(l),buttonTemplate:r,focusStateEnabled:i,hoverStateEnabled:n,stylingMode:a,accessKey:s,tabIndex:o},this._options.cache("buttonGroupOptions"))},_renderPopupContent(){var t=this._popup.$content(),e=this._getTemplateByOption("dropDownContentTemplate");return t.empty(),this._popupContentId="dx-"+new V,this.setAria("id",this._popupContentId,t),e.render({container:x(t),model:this.option("items")||this._dataSource})},_popupOptions(){var t=this.option("rtlEnabled")?"right":"left";return c({dragEnabled:!1,focusStateEnabled:!1,deferRendering:this.option("deferRendering"),hideOnOutsideClick:e=>{var i=this.$element(),n=d(e.target).closest(".".concat(ai));return!n.is(i)},showTitle:!1,animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},_ignoreFunctionValueDeprecation:!0,width:()=>pt(this.$element()),height:"auto",shading:!1,position:{of:this.$element(),collision:"flipfit",my:t+" top",at:t+" bottom"},_wrapperClassExternal:er},this._options.cache("dropDownOptions"),{visible:this.option("opened")})},_listOptions(){var t=this.option("selectedItemKey"),e=this.option("useSelectMode");return{selectionMode:e?"single":"none",wrapItemText:this.option("wrapItemText"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:()=>this._fireContentReadyAction(),selectedItemKeys:v(t)&&e?[t]:[],grouped:this.option("grouped"),groupTemplate:this.option("groupTemplate"),keyExpr:this._getKey(),noDataText:this.option("noDataText"),displayExpr:this.option("displayExpr"),itemTemplate:this.option("itemTemplate"),items:this.option("items"),dataSource:this._dataSource,onItemClick:i=>{this.option("useSelectMode")||(this._lastSelectedItemData=i.itemData),this.option("selectedItemKey",this._keyGetter(i.itemData));var n=this._fireItemClickAction(i);n!==!1&&(this.toggle(!1),this._buttonGroup.focus())}}},_upDownKeyHandler(){return this._popup&&this._popup.option("visible")&&this._list?this._list.focus():this.open(),!0},_escHandler(){return this.close(),this._buttonGroup.focus(),!0},_tabHandler(){return this.close(),!0},_renderPopup(){var t=d("<div>");this.$element().append(t),this._popup=this._createComponent(t,ot,this._popupOptions()),this._popup.$content().addClass(Zo),this._popup.$wrapper().addClass(Qo),this._popup.on("hiding",this._popupHidingHandler.bind(this)),this._popup.on("showing",this._popupShowingHandler.bind(this)),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_popupHidingHandler(){this.option("opened",!1),this._setAriaExpanded(!1)},_popupOptionChanged:function(t){var e=Q.getOptionsFromContainer(t);this._setPopupOption(e);var i=Object.keys(e);(i.indexOf("width")!==-1||i.indexOf("height")!==-1)&&this._dimensionChanged()},_dimensionChanged:function(){var t=Un(this.option("dropDownOptions.width"));t===void 0&&this._setPopupOption("width",()=>pt(this.$element()))},_setPopupOption:function(t,e){this._setWidgetOption("_popup",arguments)},_popupShowingHandler(){this.option("opened",!0),this._setAriaExpanded(!0)},_setAriaExpanded(t){this._ariaExpandedElements.forEach(e=>{this.setAria({expanded:t,owns:t?this._popupContentId:void 0},d(e))})},_renderButtonGroup(){var t=this._buttonGroup&&this._buttonGroup.$element()||d("<div>");this._buttonGroup||this.$element().append(t),this._buttonGroup=this._createComponent(t,Zi,this._buttonGroupOptions());var e=this._buttonGroup.$element().find(".dx-button").toArray();this._ariaExpandedElements=[...e,this.$element()],this._buttonGroup.registerKeyHandler("downArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("tab",this._tabHandler.bind(this)),this._buttonGroup.registerKeyHandler("upArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("escape",this._escHandler.bind(this)),this._bindInnerWidgetOptions(this._buttonGroup,"buttonGroupOptions"),this._setAriaExpanded(this.option("opened"))},_updateArrowClass(){var t=this.option("splitButton")||this.option("showArrowIcon");this.$element().toggleClass(Jo,t)},toggle(t){return this._popup||(this._renderPopup(),this._renderContent()),this._popup.toggle(t)},open(){return this.toggle(!0)},close(){return this.toggle(!1)},_setListOption(t,e){this._list&&this._list.option(t,e)},_getDisplayValue(t){var e=!F(t),i=e?t:this._displayGetter(t);return F(i)?"":String(he(i,""))},_updateActionButton(t){this.option("useSelectMode")&&this.option({text:this._getDisplayValue(t),icon:F(t)?t.icon:void 0}),this._setOptionWithoutOptionChange("selectedItem",t),this._setOptionWithoutOptionChange("selectedItemKey",this._keyGetter(t))},_clean(){this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove()},_selectedItemKeyChanged(t){this._setListOption("selectedItemKeys",this.option("useSelectMode")&&v(t)?[t]:[]);var e=this.option("selectedItem");this._loadSelectedItem().done(i=>{this._updateActionButton(i),this._displayGetter(e)!==this._displayGetter(i)&&this._fireSelectionChangedAction({previousValue:e,value:i})})},_actionButtonOptionChanged(t){var{name:e,value:i}=t,n={};n[e]=i,this._buttonGroup.option("items[0]",c({},this._actionButtonConfig(),n)),this._popup&&this._popup.repaint()},_selectModeChanged(t){if(t){this._setListOption("selectionMode","single");var e=this.option("selectedItemKey");this._setListOption("selectedItemKeys",v(e)?[e]:[]),this._selectedItemKeyChanged(this.option("selectedItemKey"))}else this._setListOption("selectionMode","none"),this.option({selectedItemKey:void 0,selectedItem:void 0}),this._actionButtonOptionChanged({text:this.option("text")})},_updateItemCollection(t){var e=this.option("selectedItemKey");this._setListOption("selectedItem",null),this._setWidgetOption("_list",[t]),v(e)&&this._loadSelectedItem().done(i=>{this._setListOption("selectedItemKeys",[e]),this._setListOption("selectedItem",i)}).fail(i=>{this._setListOption("selectedItemKeys",[])}).always(this._updateActionButton.bind(this))},_updateDataSource:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._dataSource.items();this._dataSource=void 0,this._itemsToDataSource(t),this._updateKeyExpr()},_updateKeyExpr:function(){this._compileKeyGetter(),this._setListOption("keyExpr",this._getKey())},focus:function(){this._buttonGroup.focus()},_optionChanged(t){var e,{name:i,value:n}=t;switch(i){case"useSelectMode":this._selectModeChanged(n);break;case"splitButton":this._updateArrowClass(),this._renderButtonGroup();break;case"displayExpr":this._compileDisplayGetter(),this._setListOption(i,n),this._updateActionButton(this.option("selectedItem"));break;case"keyExpr":this._updateDataSource();break;case"buttonGroupOptions":this._innerWidgetOptionChanged(this._buttonGroup,t);break;case"dropDownOptions":if(t.fullName==="dropDownOptions.visible")break;t.value.visible!==void 0&&delete t.value.visible,this._popupOptionChanged(t),this._innerWidgetOptionChanged(this._popup,t);break;case"opened":this.toggle(n);break;case"focusStateEnabled":case"hoverStateEnabled":this._setListOption(i,n),this._buttonGroup.option(i,n),this.callBase(t);break;case"items":this._updateDataSource(this.option("items")),this._updateItemCollection(i);break;case"dataSource":Array.isArray(n)?this._updateDataSource(this.option("dataSource")):(this._initDataSource(),this._updateKeyExpr()),this._updateItemCollection(i);break;case"icon":case"text":this._actionButtonOptionChanged(t);break;case"showArrowIcon":this._updateArrowClass(),this._renderButtonGroup(),this._popup&&this._popup.repaint();break;case"width":case"height":this.callBase(t),(e=this._popup)===null||e===void 0||e.repaint();break;case"stylingMode":this._buttonGroup.option(i,n);break;case"itemTemplate":case"grouped":case"noDataText":case"groupTemplate":case"wrapItemText":case"useItemTextAsTitle":this._setListOption(i,n);break;case"dropDownContentTemplate":this._renderContent();break;case"selectedItemKey":this._selectedItemKeyChanged(n);break;case"selectedItem":break;case"onItemClick":this._createItemClickAction();break;case"onButtonClick":this._createActionClickAction();break;case"onSelectionChanged":this._createSelectionChangedAction();break;case"deferRendering":this.toggle(this.option("opened"));break;case"tabIndex":this._buttonGroup.option(i,n);break;default:this.callBase(t)}}}).include(Dn);A("dxDropDownButton",nr);var ri=_e(),P="dxDraggable",ar=M(Ln,P),sr=M(Mn,P),or=M(wn,P),rr=M(kn,P),lr=M(Rn,P),dr=M(je.down,P),li="clone",Ke,Ue,ur="content",it=t=>({x:t.pageX-d(ri).scrollLeft(),y:t.pageY-d(ri).scrollTop()}),hr="dx-gesture-cover",cr="dx-overlay-wrapper",_r="dx-overlay-content";class di{constructor(e,i){this._preventScroll=!0,this._component=i,e==="vertical"?(this._scrollValue="scrollTop",this._overFlowAttr="overflowY",this._sizeAttr="height",this._scrollSizeProp="scrollHeight",this._clientSizeProp="clientHeight",this._limitProps={start:"top",end:"bottom"}):(this._scrollValue="scrollLeft",this._overFlowAttr="overflowX",this._sizeAttr="width",this._scrollSizeProp="scrollWidth",this._clientSizeProp="clientWidth",this._limitProps={start:"left",end:"right"})}updateScrollable(e,i){var n=!1;e.some(a=>{var s=d(a),o=s.hasClass(cr),r=s.hasClass(_r);return o||r?!0:(n=this._trySetScrollable(a,i),n)}),n||(this._$scrollableAtPointer=null,this._scrollSpeed=0)}isScrolling(){return!!this._scrollSpeed}isScrollable(e){return(e.css(this._overFlowAttr)==="auto"||e.hasClass("dx-scrollable-container"))&&e.prop(this._scrollSizeProp)>Math.ceil(this._sizeAttr==="width"?B(e):Ee(e))}_trySetScrollable(e,i){var n=d(e),a,s=this._component.option("scrollSensitivity"),o=this.isScrollable(n);return o&&(a=this._calculateDistanceToBorders(n,i),s>a[this._limitProps.start]?this._preventScroll||(this._scrollSpeed=-this._calculateScrollSpeed(a[this._limitProps.start]),this._$scrollableAtPointer=n):s>a[this._limitProps.end]?this._preventScroll||(this._scrollSpeed=this._calculateScrollSpeed(a[this._limitProps.end]),this._$scrollableAtPointer=n):(o=!1,this._preventScroll=!1)),o}_calculateDistanceToBorders(e,i){var n=e.get(0),a;return n?(a=ct(n),{left:i.x-a.left,top:i.y-a.top,right:a.right-i.x,bottom:a.bottom-i.y}):{}}_calculateScrollSpeed(e){var i=this._component,n=i.option("scrollSensitivity"),a=i.option("scrollSpeed");return Math.ceil(Math.pow((n-e)/n,2)*a)}scrollByStep(){if(this._$scrollableAtPointer&&this._scrollSpeed){if(this._$scrollableAtPointer.hasClass("dx-scrollable-container")){var e=this._$scrollableAtPointer.closest(".dx-scrollable"),i=e.data("dxScrollable")||e.data("dxScrollView");if(i){var n=i.scrollOffset()[this._limitProps.start]+this._scrollSpeed;i.scrollTo({[this._limitProps.start]:n})}}else{var a=this._$scrollableAtPointer[this._scrollValue]()+this._scrollSpeed;this._$scrollableAtPointer[this._scrollValue](a)}var s=this._component._dragMoveArgs;s&&this._component._dragMoveHandler(s)}}reset(){this._$scrollableAtPointer=null,this._scrollSpeed=0,this._preventScroll=!0}isOutsideScrollable(e,i){if(!e)return!1;var n=ct(e.get(0)),a=n[this._limitProps.start],s=n[this._sizeAttr],o=it(i),r=this._sizeAttr==="width"?o.x:o.y;return r<a||r>a+s}}var pr=zn.inherit({ctor:function(t){this.callBase(),this._strategy=t},_step:function(){var t=this._strategy._horizontalScrollHelper,e=this._strategy._verticalScrollHelper;t&&t.scrollByStep(),e&&e.scrollByStep()}}),mr=st.inherit({reset:C,dragMove:C,dragEnter:C,dragLeave:C,dragEnd:function(t){var e=this._getSourceDraggable();return e._fireRemoveEvent(t),new R().resolve()},_fireRemoveEvent:C,_getDefaultOptions:function(){return c(this.callBase(),{onDragStart:null,onDragMove:null,onDragEnd:null,onDragEnter:null,onDragLeave:null,onDrop:null,immediate:!0,dragDirection:"both",boundary:void 0,boundOffset:0,allowMoveByClick:!1,itemData:null,container:void 0,dragTemplate:void 0,contentTemplate:"content",handle:"",filter:"",clone:!1,autoScroll:!0,scrollSpeed:30,scrollSensitivity:60,group:void 0,data:void 0})},_setOptionsByReference:function(){this.callBase.apply(this,arguments),c(this._optionsByReference,{component:!0,group:!0,itemData:!0,data:!0})},_init:function(){this.callBase(),this._attachEventHandlers(),this._scrollAnimator=new pr(this),this._horizontalScrollHelper=new di("horizontal",this),this._verticalScrollHelper=new di("vertical",this)},_normalizeCursorOffset:function(t){return I(t)&&(t={h:t.x,v:t.y}),t=Nn(t).map(e=>parseFloat(e)),{left:t[0],top:t.length===1?t[0]:t[1]}},_getNormalizedCursorOffset:function(t,e){return L(t)&&(t=t.call(this,e)),this._normalizeCursorOffset(t)},_calculateElementOffset:function(t){var e,i,n=t.event,a=d(t.itemElement),s=d(t.dragElement),o=this._dragElementIsCloned(),r=this.option("cursorOffset"),l={left:0,top:0},u=this._initialLocate=se(s);return(o||t.initialOffset||r)&&(e=t.initialOffset||a.offset(),r&&(l=this._getNormalizedCursorOffset(r,t),isFinite(l.left)&&(e.left=n.pageX),isFinite(l.top)&&(e.top=n.pageY)),i=s.offset(),e.top-=i.top+(l.top||0)-u.top,e.left-=i.left+(l.left||0)-u.left),e},_initPosition:function(t){var e=d(t.dragElement),i=this._calculateElementOffset(t);i&&this._move(i,e),this._startPosition=se(e)},_startAnimator:function(){this._scrollAnimator.inProgress()||this._scrollAnimator.start()},_stopAnimator:function(){this._scrollAnimator.stop()},_addWidgetPrefix:function(t){var e=this.NAME;return Fn(e)+(t?"-"+t:"")},_getItemsSelector:function(){return this.option("filter")||""},_$content:function(){var t=this.$element(),e=t.children(".dx-template-wrapper");return e.length?e:t},_attachEventHandlers:function(){if(!this.option("disabled")){var t=this._$content(),e=this._getItemsSelector(),i=this.option("allowMoveByClick"),n={direction:this.option("dragDirection"),immediate:this.option("immediate"),checkDropTarget:(a,s)=>{var o=this.option("group"),r=this._getSourceDraggable().option("group"),l=this._getScrollable(a);return this._verticalScrollHelper.isOutsideScrollable(l,s)||this._horizontalScrollHelper.isOutsideScrollable(l,s)?!1:r&&r===o}};i&&(t=this._getArea(),g.on(t,dr,n,this._pointerDownHandler.bind(this))),e[0]===">"&&(e=e.slice(1)),g.on(t,ar,e,n,this._dragStartHandler.bind(this)),g.on(t,sr,n,this._dragMoveHandler.bind(this)),g.on(t,or,n,this._dragEndHandler.bind(this)),g.on(t,rr,n,this._dragEnterHandler.bind(this)),g.on(t,lr,n,this._dragLeaveHandler.bind(this))}},_dragElementIsCloned:function(){return this._$dragElement&&this._$dragElement.hasClass(this._addWidgetPrefix(li))},_getDragTemplateArgs:function(t,e){return{container:x(e),model:{itemData:this.option("itemData"),itemElement:x(t)}}},_createDragElement:function(t){var e=t,i=this.option("clone"),n=this._getContainer(),a=this.option("dragTemplate");return a?(a=this._getTemplate(a),e=d("<div>").appendTo(n),a.render(this._getDragTemplateArgs(t,e))):i&&(e=d("<div>").appendTo(n),t.clone().css({width:t.css("width"),height:t.css("height")}).appendTo(e)),e.toggleClass(this._addWidgetPrefix(li),e.get(0)!==t.get(0)).toggleClass("dx-rtl",this.option("rtlEnabled"))},_resetDragElement:function(){this._dragElementIsCloned()?this._$dragElement.remove():this._toggleDraggingClass(!1),this._$dragElement=null},_resetSourceElement:function(){this._toggleDragSourceClass(!1),this._$sourceElement=null},_detachEventHandlers:function(){g.off(this._$content(),"."+P),g.off(this._getArea(),"."+P)},_move:function(t,e){mi(e||this._$dragElement,t)},_getDraggableElement:function(t){var e=this._getSourceElement();if(e)return e;var i=this.option("allowMoveByClick");if(i)return this.$element();var n=d(t&&t.target),a=this._getItemsSelector();if(a[0]===">"){var s=this._$content().find(a);s.is(n)||(n=n.closest(s))}return n},_getSourceElement:function(){var t=this._getSourceDraggable();return t._$sourceElement},_pointerDownHandler:function(t){if(!$n(t)){var e={},i=this.$element(),n=this.option("dragDirection");(n==="horizontal"||n==="both")&&(e.left=t.pageX-i.offset().left+se(i).left-B(i)/2),(n==="vertical"||n==="both")&&(e.top=t.pageY-i.offset().top+se(i).top-Ee(i)/2),this._move(e,i),this._getAction("onDragMove")(this._getEventArgs(t))}},_isValidElement:function(t,e){var i=this.option("handle"),n=d(t.originalEvent&&t.originalEvent.target);return i&&!n.closest(i).length||!e.length?!1:!e.is(".dx-state-disabled, .dx-state-disabled *")},_dragStartHandler:function(t){var e=this._getDraggableElement(t);if(!this._isValidElement(t,e)){t.cancel=!0;return}if(!this._$sourceElement){var i=this._getDragStartArgs(t,e);if(this._getAction("onDragStart")(i),i.cancel){t.cancel=!0;return}this.option("itemData",i.itemData),this._setSourceDraggable(),this._$sourceElement=e;var n=e.offset(),a=this._$dragElement=this._createDragElement(e);this._toggleDraggingClass(!0),this._toggleDragSourceClass(!0),this._setGestureCoverCursor(a.children());var s=a.css("position")==="fixed";this._initPosition(c({},i,{dragElement:a.get(0),initialOffset:s&&n})),this._getAction("onDraggableElementShown")(Si({},i,{dragElement:a}));var o=this._getArea(),r=this._getAreaOffset(o),l=this._getBoundOffset(),u=De(o),h=Te(o),_=B(a),p=Ee(a),f=a.offset().left-r.left,y=a.offset().top-r.top;o.length&&(t.maxLeftOffset=f-l.left,t.maxRightOffset=u-f-_-l.right,t.maxTopOffset=y-l.top,t.maxBottomOffset=h-y-p-l.bottom),this.option("autoScroll")&&this._startAnimator()}},_getAreaOffset:function(t){var e=t&&hi.offset(t);return e||{left:0,top:0}},_toggleDraggingClass:function(t){this._$dragElement&&this._$dragElement.toggleClass(this._addWidgetPrefix("dragging"),t)},_toggleDragSourceClass:function(t,e){var i=e||this._$sourceElement;i&&i.toggleClass(this._addWidgetPrefix("source"),t)},_setGestureCoverCursor:function(t){d(".".concat(hr)).css("cursor",t.css("cursor"))},_getBoundOffset:function(){var t=this.option("boundOffset");return L(t)&&(t=t.call(this)),Pn(t)},_getArea:function(){var t=this.option("boundary");return L(t)&&(t=t.call(this)),d(t)},_getContainer:function(){var t=this.option("container");return t===void 0&&(t=_i()),d(t)},_dragMoveHandler:function(t,e){if(this._dragMoveArgs=t,!this._$dragElement){t.cancel=!0;return}var i=t.offset,n=this._startPosition;this._move({left:n.left+i.x,top:n.top+i.y}),e||this._updateScrollable(t);var a=this._getEventArgs(t);if(this._getAction("onDragMove")(a),a.cancel!==!0){var s=this._getTargetDraggable();s.dragMove(t,e)}},_updateScrollable:function(t){if(this.option("autoScroll")){var e=it(t),i=$.elementsFromPoint(e.x,e.y,this.$element().get(0));this._verticalScrollHelper.updateScrollable(i,e),this._horizontalScrollHelper.updateScrollable(i,e)}},_getScrollable:function(t){var e;return t.parents().toArray().some(i=>{var n=d(i);if(this._horizontalScrollHelper.isScrollable(n)||this._verticalScrollHelper.isScrollable(n))return e=n,!0}),e},_defaultActionArgs:function(){var t=this.callBase.apply(this,arguments),e=this.option("component");return e&&(t.component=e,t.element=e.element()),t},_getEventArgs:function(t){var e=this._getSourceDraggable(),i=this._getTargetDraggable();return{event:t,itemData:e.option("itemData"),itemElement:x(e._$sourceElement),fromComponent:e.option("component")||e,toComponent:i.option("component")||i,fromData:e.option("data"),toData:i.option("data")}},_getDragStartArgs:function(t,e){var i=this._getEventArgs(t);return{event:i.event,itemData:i.itemData,itemElement:e,fromData:i.fromData}},_revertItemToInitialPosition:function(){!this._dragElementIsCloned()&&this._move(this._initialLocate,this._$sourceElement)},_dragEndHandler:function(t){var e=new R,i=this._getEventArgs(t),n=this._getEventArgs(t),a=this._getTargetDraggable(),s=!0;try{this._getAction("onDragEnd")(i)}finally{Ye(_t(i.cancel)).done(o=>{if(!o&&(a!==this&&a._getAction("onDrop")(n),!n.cancel)){s=!1,Ye(_t(a.dragEnd(i))).always(e.resolve);return}e.resolve()}).fail(e.resolve),e.done(()=>{s&&this._revertItemToInitialPosition(),this.reset(),a.reset(),this._stopAnimator(),this._horizontalScrollHelper.reset(),this._verticalScrollHelper.reset(),this._resetDragElement(),this._resetSourceElement(),this._resetTargetDraggable(),this._resetSourceDraggable()})}},_isTargetOverAnotherDraggable:function(t){var e=this._getSourceDraggable();if(this===e)return!1;var i=e._$dragElement,n=e.$element(),a=this.$element(),s=it(t),o=$.elementsFromPoint(s.x,s.y,this.element()),r=o.filter(_=>{var p=d(_);if(p.hasClass(this._addWidgetPrefix()))return!p.closest(i).length})[0],l=this._getSourceElement(),u=r===n.get(0),h=d(r).closest(l).length;return!r||r===a.get(0)&&!u&&!h},_dragEnterHandler:function(t){this._fireDragEnterEvent(t),this._isTargetOverAnotherDraggable(t)&&this._setTargetDraggable();var e=this._getSourceDraggable();e.dragEnter(t)},_dragLeaveHandler:function(t){this._fireDragLeaveEvent(t),this._resetTargetDraggable(),this!==this._getSourceDraggable()&&this.reset();var e=this._getSourceDraggable();e.dragLeave(t)},_getAction:function(t){return this["_"+t+"Action"]||this._createActionByOption(t)},_getAnonymousTemplateName:function(){return ur},_initTemplates:function(){!this.option("contentTemplate")||(this._templateManager.addDefaultTemplates({content:new Vn}),this.callBase.apply(this,arguments))},_render:function(){this.callBase(),this.$element().addClass(this._addWidgetPrefix());var t=this._templateManager.anonymousTemplateName===this.option("contentTemplate"),e=this._getTemplateByOption("contentTemplate");e&&d(e.render({container:this.element(),transclude:t}))},_optionChanged:function(t){var e=t.name;switch(e){case"onDragStart":case"onDragMove":case"onDragEnd":case"onDrop":case"onDragEnter":case"onDragLeave":case"onDraggableElementShown":this["_"+e+"Action"]=this._createActionByOption(e);break;case"dragTemplate":case"contentTemplate":case"container":case"clone":break;case"allowMoveByClick":case"dragDirection":case"disabled":case"boundary":case"filter":case"immediate":this._resetDragElement(),this._detachEventHandlers(),this._attachEventHandlers();break;case"autoScroll":this._verticalScrollHelper.reset(),this._horizontalScrollHelper.reset();break;case"scrollSensitivity":case"scrollSpeed":case"boundOffset":case"handle":case"group":case"data":case"itemData":break;default:this.callBase(t)}},_getTargetDraggable:function(){return Ke||this},_getSourceDraggable:function(){return Ue||this},_setTargetDraggable:function(){var t=this.option("group"),e=this._getSourceDraggable();t&&t===e.option("group")&&(Ke=this)},_setSourceDraggable:function(){Ue=this},_resetSourceDraggable:function(){Ue=null},_resetTargetDraggable:function(){Ke=null},_dispose:function(){this.callBase(),this._detachEventHandlers(),this._resetDragElement(),this._resetTargetDraggable(),this._resetSourceDraggable(),this._$sourceElement=null,this._stopAnimator()},_fireDragEnterEvent:function(t){var e=this._getEventArgs(t);this._getAction("onDragEnter")(e)},_fireDragLeaveEvent:function(t){var e=this._getEventArgs(t);this._getAction("onDragLeave")(e)}});A(P,mr);export{Zi as B,wi as C,Ei as D,Uo as F,ea as H,Oi as M,qa as T,dt as V,mr as a,Sr as b,is as c,Ir as d};
