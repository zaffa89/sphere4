import{d as i,ar as h,o as n,c as m,u as s,H as b,w as r,f as t,I as g,J as c,_ as y,e as u,U as w,a as C,B as E,C as F}from"./app.ff11f486.js";import{a as v}from"./response.70bff4ea.js";import{l as U,D as d,b as k}from"./check-box.3d57f674.js";import{b5 as f}from"./check_box.a3b61762.js";import{D as x}from"./select-box.667df2dc.js";import{D as B}from"./text-area.170595cb.js";import"./select_box.d813d406.js";const I=i("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),D={class:"fixed inset-0 z-50 overflow-y-auto"},$={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},j={key:0,class:"flex justify-center items-center"},z=i("svg",{class:"animate-spin h-5 w-5 text-gray-900",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),A=[z],V={key:1},M={class:"flex flex-col gap-1"},S={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},T={class:"flex flex-col gap-1"},N=i("div",{class:"relative"},[i("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[i("div",{class:"w-full border-t border-gray-300"})]),i("div",{class:"relative flex justify-center"},[i("span",{class:"bg-white px-2 text-sm text-gray-500"},"Dati anagrafici")])],-1),P={class:"flex flex-col gap-1"},H=i("div",{class:"relative"},[i("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[i("div",{class:"w-full border-t border-gray-300"})]),i("div",{class:"relative flex justify-center"},[i("span",{class:"bg-white px-2 text-sm text-gray-500"},"Parametri medico")])],-1),G={class:"flex justify-end items-center gap-2"},J=i("span",{class:"text-gray-700"},"Attivo",-1),O={class:"mt-5 sm:mt-6 flex flex-col sm:flex-row sm:justify-around gap-4"},R=i("button",{class:"opacity-0 absolute bottom-0"},null,-1),q={props:["medicoId"],emits:["update","store","close"],data(){return{fetching:!1,saving:!1,errors:null,medico:{},colori:[{id:1,text:"Blu"},{id:2,text:"Giallo"},{id:3,text:"Verde"},{id:4,text:"Rosso"}]}},computed:{disabledElement(){return this.fetching||this.saving},open(){return this.medicoId!==null}},async created(){U("it-IT"),this.medicoId==="new"?(this.fetching=!0,await axios.get("api/sphere/medico/create").then(o=>{this.medico=o.data}).catch(o=>{this.$emit("close")}),this.fetching=!1):(this.fetching=!0,await axios.get(`api/sphere/medico/${this.medicoId}/edit`).then(o=>{this.medico=o.data}).catch(o=>{this.$emit("close")}),this.fetching=!1)},methods:{errorFor(o){return!!(this.errors!==null&&this.errors[o])},salvaMedico(){this.medico.id?this.update():this.store()},async update(){this.errors=null,this.saving=!0,await axios.put(`api/sphere/medico/${this.medico.id}`,this.medico).then(o=>{this.$emit("update",o.data)}).catch(o=>{v(o)&&(this.errors=o.response.data.errors),this.saving=!1}),this.saving=!1},async store(){this.errors=null,this.saving=!0,await axios.post("api/sphere/medico",this.medico).then(o=>{this.$emit("store",o.data)}).catch(o=>{v(o)&&(this.errors=o.response.data.errors),this.saving=!1}),this.saving=!1}}},_=Object.assign(q,{__name:"ModalMedico",setup(o){return(e,a)=>{const p=h("AlertErrors");return n(),m(s(b),{as:"template",show:e.open},{default:r(()=>[t(s(g),{as:"div",class:"relative z-50"},{default:r(()=>[t(s(c),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[I]),_:1}),i("div",D,[i("div",$,[t(s(c),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:r(()=>[t(s(y),{class:"relative transform rounded-lg bg-white px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl sm:p-6"},{default:r(()=>[e.fetching?(n(),u("div",j,A)):(n(),u("div",V,[t(s(w),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900 text-center"},{default:r(()=>[C(E(e.medico.id?"Anagrafica medico: "+e.medico.ragione_sociale:"Nuovo medico"),1)]),_:1}),i("div",M,[i("div",S,[i("div",T,[N,t(s(d),{value:e.medico.ragione_sociale,"onUpdate:value":a[0]||(a[0]=l=>e.medico.ragione_sociale=l),label:"Cognome e nome","label-mode":"floating",placeholder:"Cognome e nome","show-clear-button":!0,"is-valid":!e.errorFor("ragione_sociale"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),t(s(d),{value:e.medico.codice_fiscale,"onUpdate:value":a[1]||(a[1]=l=>e.medico.codice_fiscale=l),label:"Codice Fiscale","label-mode":"floating",placeholder:"Codice Fiscale","show-clear-button":!0,"is-valid":!e.errorFor("codice_fiscale"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),t(s(d),{value:e.medico.telefono,"onUpdate:value":a[2]||(a[2]=l=>e.medico.telefono=l),label:"Cellulare","label-mode":"floating",placeholder:"Cellulare","show-clear-button":!0,"is-valid":!e.errorFor("telefono"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),t(s(d),{value:e.medico.telefono_fisso,"onUpdate:value":a[3]||(a[3]=l=>e.medico.telefono_fisso=l),label:"Telefono fisso","label-mode":"floating",placeholder:"Telefono fisso","show-clear-button":!0,"is-valid":!e.errorFor("telefono_fisso"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),t(s(d),{value:e.medico.email,"onUpdate:value":a[4]||(a[4]=l=>e.medico.email=l),label:"Indirizzo email","label-mode":"floating",placeholder:"indirizzo email","show-clear-button":!0,"is-valid":!e.errorFor("email"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),t(s(x),{value:e.medico.colore,"onUpdate:value":a[5]||(a[5]=l=>e.medico.colore=l),"data-source":e.colori,"value-expr":"id","display-expr":"text",label:"Colore","label-mode":"floating",placeholder:"Colore",disabled:e.disabledElement,"is-valid":!e.errorFor("colore")},null,8,["value","data-source","disabled","is-valid"])]),i("div",P,[H,t(s(d),{value:e.medico.partita_iva,"onUpdate:value":a[6]||(a[6]=l=>e.medico.partita_iva=l),label:"Partita IVA","label-mode":"floating",placeholder:"Partita IVA","show-clear-button":!0,"is-valid":!e.errorFor("partita_iva"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),t(s(d),{value:e.medico.identificativo_fmsi,"onUpdate:value":a[7]||(a[7]=l=>e.medico.identificativo_fmsi=l),label:"Codice identificativo FMSI","label-mode":"floating",placeholder:"Codice FMSI","show-clear-button":!0,"is-valid":!e.errorFor("identificativo_fmsi"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),t(s(d),{value:e.medico.codice_tracciato,"onUpdate:value":a[8]||(a[8]=l=>e.medico.codice_tracciato=l),label:"Codice per tracciati","label-mode":"floating",placeholder:"Codice tracciato","show-clear-button":!0,"is-valid":!e.errorFor("codice_tracciato"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),t(s(B),{value:e.medico.timbro,"onUpdate:value":a[9]||(a[9]=l=>e.medico.timbro=l),placeholder:"Timbro del medico",spellcheck:!1},null,8,["value"]),i("div",G,[J,t(s(k),{value:e.medico.attivo,"onUpdate:value":a[10]||(a[10]=l=>e.medico.attivo=l)},null,8,["value"])])])])]),i("div",O,[t(s(f),{width:"100%",text:"Chiudi",type:"danger",icon:"close","styling-mode":"contained",disabled:e.saving,onClick:a[11]||(a[11]=l=>e.$emit("close"))},null,8,["disabled"]),t(s(f),{id:"saveButton",width:"100%",text:e.saving?"Salvataggio...":e.disabledElement?"Non modificabile":"Salva modifiche",icon:"save",type:"success","styling-mode":"contained",disabled:e.disabledElement||e.saving,onClick:a[12]||(a[12]=l=>e.salvaMedico())},null,8,["text","disabled"])])]))]),_:1})]),_:1})])]),R,e.errors?(n(),m(p,{key:0,errors:e.errors},null,8,["errors"])):F("",!0)]),_:1})]),_:1},8,["show"])}}});export{_ as default};
