import{cQ as Zi,H as c,$ as r,a3 as $t,c as d,m as E,C as p,c2 as vi,c3 as mi,c4 as gi,ag as K,P as vt,z as B,a7 as A,a5 as lt,a9 as Ee,a1 as mt,a2 as $,ak as Si,a as f,p as L,T as C,_ as ue,cJ as be,t as at,ac as Qi,ay as Te,am as Q,a6 as Ae,a8 as Le,y as D,u as P,al as Ci,D as T,A as _,k as ht,B as Ei,i as w,aA as V,W as Z,X as bi,cR as Ji,o as J,aa as tn,ab as en,cS as nn,bg as re,cT as sn,l as S,ai as Ti,av as Ai,a$ as Wt,O as _e,cU as Ie,M as x,az as on,cV as an,cW as rn,cX as ln,cY as hn,cZ as cn,c_ as De,cl as Ft,bH as dn,I as le,bf as un,bS as Oe,b as gt,a4 as _n,F as Mt,G as Li,ad as Be,cA as pn,ax as Ii,cr as fn,au as Ut,bK as vn,q as Di,be as tt,c0 as U,c$ as mn,d0 as gn,ct as Sn,aj as Oi,d1 as yt,d2 as Cn,cj as j,a_ as y,bE as St,d3 as En,d4 as bn,d5 as ft,aR as Tn,bx as he,bt as Pt,d6 as we,J as ce,aY as An,br as Ln,bj as Ht,ah as In,ck as nt,Q as Y,bJ as Dn,bs as On,d7 as xe,d8 as Bn,d9 as wn,h as xn,bO as yn,af as Rn,cs as $n,c1 as Pn,ci as ye,cu as Hn,as as kn,E as Mn,bG as Re,e as $e,b1 as Nn,b0 as Vn}from"./check_box.9d1619d3.js";var zn="dx-dropdowneditor-button",Wn="dx-dropdowneditor-button-visible",Fn="dxDropDownEditor-selectLabel";class Un extends Zi{constructor(e,i,n){super(e,i,n),this.currentTemplate=null}_attachEvents(e){var{editor:i}=this;e.option("onClick",n=>{!i.option("openOnFieldClick")&&i._openHandler(n)}),c.on(e.$element(),"mousedown",n=>{i.$element().is(".dx-state-focused")&&n.preventDefault()})}_create(){var{editor:e}=this,i=r("<div>"),n=this._getOptions();this._addToContainer(i);var s=e._createComponent(i,$t,d({},n,{elementAttr:{"aria-label":E.format(Fn)}}));return this._legacyRender(e.$element(),i,n.visible),{$element:i,instance:s}}_getOptions(){var{editor:e}=this,i=this._isVisible(),n=e.option("readOnly"),s={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:n,visible:i};return this._addTemplate(s),s}_isVisible(){var{editor:e}=this;return super._isVisible()&&e.option("showDropDownButton")}_legacyRender(e,i,n){e.toggleClass(Wn,n),i&&i.removeClass("dx-button").addClass(zn)}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(e){this._isSameTemplate()||(e.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){var e=super.update();if(e){var{editor:i,instance:n}=this,s=i.$element(),o=this._getOptions();n==null||n.option(o),this._legacyRender(s,n==null?void 0:n.$element(),o.visible)}}}var Et=5;class Gn{constructor(e){this.init(e)}init(e){var{dragEnabled:i,handle:n,draggableElement:s,positionController:o}=e;this._positionController=o,this._draggableElement=s,this._handle=n,this._dragEnabled=i,this.unsubscribe(),i&&this.subscribe()}moveDown(e){this._moveTo(Et,0,e)}moveUp(e){this._moveTo(-Et,0,e)}moveLeft(e){this._moveTo(0,-Et,e)}moveRight(e){this._moveTo(0,Et,e)}subscribe(){var e=this._getEventNames();c.on(this._handle,e.startEventName,i=>{this._dragStartHandler(i)}),c.on(this._handle,e.updateEventName,i=>{this._dragUpdateHandler(i)}),c.on(this._handle,e.endEventName,i=>{this._dragEndHandler(i)})}unsubscribe(){var e=this._getEventNames();c.off(this._handle,e.startEventName),c.off(this._handle,e.updateEventName),c.off(this._handle,e.endEventName)}_getEventNames(){var e=p(vi,"overlayDrag"),i=p(mi,"overlayDrag"),n=p(gi,"overlayDrag");return{startEventName:e,updateEventName:i,endEventName:n}}_dragStartHandler(e){var i=this._getAllowedOffsets();this._prevOffset={x:0,y:0},e.targetElements=[],e.maxTopOffset=i.top,e.maxBottomOffset=i.bottom,e.maxLeftOffset=i.left,e.maxRightOffset=i.right}_dragUpdateHandler(e){var i={top:e.offset.y-this._prevOffset.y,left:e.offset.x-this._prevOffset.x};this._moveByOffset(i),this._prevOffset=e.offset}_dragEndHandler(e){this._positionController.dragHandled(),this._positionController.detectVisualPositionChange(e)}_moveTo(e,i,n){if(!!this._dragEnabled){n.preventDefault(),n.stopPropagation();var s=this._fitOffsetIntoAllowedRange(e,i);this._moveByOffset(s),this._dragEndHandler(n)}}_fitOffsetIntoAllowedRange(e,i){var n=this._getAllowedOffsets();return{top:K(e,-n.top,n.bottom),left:K(i,-n.left,n.right)}}_getContainerDimensions(){var e=vt.getDocument(),i=this._positionController.$dragResizeContainer.get(0),n=B(i),s=A(i);return lt(i)&&(s=Math.max(e.body.clientHeight,s),n=Math.max(e.body.clientWidth,n)),{width:n,height:s}}_getContainerPosition(){var e=this._positionController.$dragResizeContainer.get(0);return lt(e)?{top:0,left:0}:Ee(e)}_getElementPosition(){return Ee(this._draggableElement)}_getInnerDelta(){var e=this._getContainerDimensions(),i=this._getElementDimensions();return{x:e.width-i.width,y:e.height-i.height}}_getOuterDelta(){var{width:e,height:i}=this._getElementDimensions(),n=this._positionController.outsideDragFactor;return{x:e*n,y:i*n}}_getFullDelta(){var e=this._getInnerDelta(),i=this._getOuterDelta();return{x:e.x+i.x,y:e.y+i.y}}_getElementDimensions(){return{width:this._draggableElement.offsetWidth,height:this._draggableElement.offsetHeight}}_getAllowedOffsets(){var e=this._getFullDelta(),i=e.y>=0&&e.x>=0;if(!i)return{top:0,bottom:0,left:0,right:0};var n=this._getElementPosition(),s=this._getContainerPosition(),o=this._getOuterDelta();return{top:n.top-s.top+o.y,bottom:-n.top+s.top+e.y,left:n.left-s.left+o.x,right:-n.left+s.left+e.x}}_moveByOffset(e){var i=mt(this._draggableElement),n={left:i.left+e.left,top:i.top+e.top};$(this._draggableElement,n)}}var Nt="dxResizable",Kn="dx-resizable",Yn="dx-resizable-resizing",bt="dx-resizable-handle",qn="dx-resizable-handle-top",Xn="dx-resizable-handle-bottom",jn="dx-resizable-handle-left",Zn="dx-resizable-handle-right",Tt="dx-resizable-handle-corner",Qn=p(vi,Nt),Jn=p(mi,Nt),ts=p(gi,Nt),es={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},Bi=Si.inherit({_getDefaultOptions:function(){return d(this.callBase(),{handles:"all",step:"1",stepPrecision:"simple",area:void 0,minWidth:30,maxWidth:1/0,minHeight:30,maxHeight:1/0,onResizeStart:null,onResize:null,onResizeEnd:null,roundStepValue:!0,keepAspectRatio:!0})},_init:function(){this.callBase(),this.$element().addClass(Kn)},_initMarkup:function(){this.callBase(),this._renderHandles()},_render:function(){this.callBase(),this._renderActions()},_renderActions:function(){this._resizeStartAction=this._createActionByOption("onResizeStart"),this._resizeEndAction=this._createActionByOption("onResizeEnd"),this._resizeAction=this._createActionByOption("onResize")},_renderHandles:function(){this._handles=[];var t=this.option("handles");if(!(t==="none"||!t)){var e=t==="all"?["top","bottom","left","right"]:t.split(" "),i={};f(e,(n,s)=>{i[s]=!0,this._renderHandle(s)}),i.bottom&&i.right&&this._renderHandle("corner-bottom-right"),i.bottom&&i.left&&this._renderHandle("corner-bottom-left"),i.top&&i.right&&this._renderHandle("corner-top-right"),i.top&&i.left&&this._renderHandle("corner-top-left"),this._attachEventHandlers()}},_renderHandle:function(t){var e=r("<div>").addClass(bt).addClass(bt+"-"+t).appendTo(this.$element());this._handles.push(e)},_attachEventHandlers:function(){if(!this.option("disabled")){var t={};t[Qn]=this._dragStartHandler.bind(this),t[Jn]=this._dragHandler.bind(this),t[ts]=this._dragEndHandler.bind(this),this._handles.forEach(e=>{c.on(e,t,{direction:"both",immediate:!0})})}},_detachEventHandlers:function(){this._handles.forEach(t=>{c.off(t)})},_toggleEventHandlers:function(t){t?this._attachEventHandlers():this._detachEventHandlers()},_getElementSize:function(){var t=this.$element();return t.css("boxSizing")==="border-box"?{width:B(t),height:A(t)}:{width:L(t),height:C(t)}},_dragStartHandler:function(t){var e=this.$element();if(e.is(".dx-state-disabled, .dx-state-disabled *")){t.cancel=!0;return}this._toggleResizingClass(!0),this._movingSides=this._getMovingSides(t),this._elementLocation=mt(e),this._elementSize=this._getElementSize(),this._renderDragOffsets(t),this._resizeStartAction({event:t,width:this._elementSize.width,height:this._elementSize.height,handles:this._movingSides}),t.targetElements=null},_toggleResizingClass:function(t){this.$element().toggleClass(Yn,t)},_renderDragOffsets:function(t){var e=this._getArea();if(!!e){var i=r(t.target).closest("."+bt),n=B(i),s=A(i),o=i.offset(),a=e.offset,l=this._getAreaScrollOffset();t.maxLeftOffset=this._leftMaxOffset=o.left-a.left-l.scrollX,t.maxRightOffset=this._rightMaxOffset=a.left+e.width-o.left-n+l.scrollX,t.maxTopOffset=this._topMaxOffset=o.top-a.top-l.scrollY,t.maxBottomOffset=this._bottomMaxOffset=a.top+e.height-o.top-s+l.scrollY}},_getBorderWidth:function(t,e){if(lt(t.get(0)))return 0;var i=t.css(es[e]);return parseInt(i)||0},_proportionate:function(t,e){var i=this._elementSize,n=t==="x"?i.width/i.height:i.height/i.width;return e*n},_getProportionalDelta:function(t){var{x:e,y:i}=t,n=this._proportionate("y",e);if(n>=i)return{x:e,y:n};var s=this._proportionate("x",i);return s>=e?{x:s,y:i}:{x:0,y:0}},_getDirectionName:function(t){var e=this._movingSides;return t==="x"?e.left?"left":"right":e.top?"top":"bottom"},_fitIntoArea:function(t,e){var i,n=this._getDirectionName(t);return Math.min(e,(i=this["_".concat(n,"MaxOffset")])!==null&&i!==void 0?i:1/0)},_fitDeltaProportionally:function(t){var e=ue({},t),i=this._elementSize,{minWidth:n,minHeight:s,maxWidth:o,maxHeight:a}=this.option(),l=()=>i.width+e.x,h=()=>i.height+e.y,u=H=>e[H]===this._fitIntoArea(H,e[H]),v=()=>be(l(),n,o)&&u("x"),m=()=>be(h(),s,a)&&u("y");if(!v()){var g=this._fitIntoArea("x",K(l(),n,o)-i.width);e={x:g,y:this._proportionate("y",g)}}if(!m()){var O=this._fitIntoArea("y",K(h(),s,a)-i.height);e={x:this._proportionate("x",O),y:O}}return v()&&m()?e:{x:0,y:0}},_fitDelta:function(t){var{x:e,y:i}=t,n=this._elementSize,{minWidth:s,minHeight:o,maxWidth:a,maxHeight:l}=this.option();return{x:K(n.width+e,s,a)-n.width,y:K(n.height+i,o,l)-n.height}},_getDeltaByOffset:function(t){var e=this._movingSides,i=this._isCornerHandler(e)&&this.option("keepAspectRatio"),n={x:t.x*(e.left?-1:1),y:t.y*(e.top?-1:1)};if(i){var s=this._getProportionalDelta(n),o=this._fitDeltaProportionally(s);n=o}else{var a=this._fitDelta(n),l=this._roundByStep(a);n=l}return n},_updatePosition:function(t,e){var{width:i,height:n}=e,s=this._elementLocation,o=this._movingSides,a=this.$element(),l=this._getElementSize(),h=t.y*(o.top?-1:1)-((l.height||n)-n),u=t.x*(o.left?-1:1)-((l.width||i)-i);$(a,{top:s.top+(o.top?h:0),left:s.left+(o.left?u:0)})},_dragHandler:function(t){var e=this._getOffset(t),i=this._getDeltaByOffset(e),n=this._updateDimensions(i);this._updatePosition(i,n),this._triggerResizeAction(t,n)},_updateDimensions:function(t){var e=u=>u.substring(u.length-2)==="px",i=this.option("stepPrecision")==="strict",n=this._elementSize,s=n.width+t.x,o=n.height+t.y,a=this.$element().get(0).style,l=t.x||i||e(a.width),h=t.y||i||e(a.height);return l&&this.option({width:s}),h&&this.option({height:o}),{width:l?s:n.width,height:h?o:n.height}},_triggerResizeAction:function(t,e){var{width:i,height:n}=e;this._resizeAction({event:t,width:this.option("width")||i,height:this.option("height")||n,handles:this._movingSides}),at(this.$element())},_isCornerHandler:t=>Object.values(t).reduce((e,i)=>e^i,0)===0,_getOffset:function(t){var e=t.offset,i=this._movingSides;return!i.left&&!i.right&&(e.x=0),!i.top&&!i.bottom&&(e.y=0),e},_roundByStep:function(t){return this.option("stepPrecision")==="strict"?this._roundStrict(t):this._roundNotStrict(t)},_getSteps:function(){return Qi(this.option("step"),!this.option("roundStepValue"))},_roundNotStrict:function(t){var e=this._getSteps();return{x:t.x-t.x%e.h,y:t.y-t.y%e.v}},_roundStrict:function(t){var e=this._movingSides,i={x:t.x*(e.left?-1:1),y:t.y*(e.top?-1:1)},n=this._getSteps(),s=this._elementLocation,o=this._elementSize,a=e.left?s.left:s.left+o.width,l=e.top?s.top:s.top+o.height,h=(a+i.x)%n.h,u=(l+i.y)%n.v,v=Math.sign||(I=>(I=+I,I===0||isNaN(I)?I:I>0?1:-1)),m=(I,q)=>(1+.2*v(q))%1*I,g=(I,q)=>Math.abs(I)<.2*q,O=i.x-h,H=i.y-u;h>m(n.h,i.x)&&(O+=n.h),u>m(n.v,i.y)&&(H+=n.v);var Ct=(e.left||e.right)&&!g(i.x,n.h)?O:0,it=(e.top||e.bottom)&&!g(i.y,n.v)?H:0;return{x:Ct*(e.left?-1:1),y:it*(e.top?-1:1)}},_getMovingSides:function(t){var e=r(t.target),i=e.hasClass(Tt+"-top-left"),n=e.hasClass(Tt+"-top-right"),s=e.hasClass(Tt+"-bottom-left"),o=e.hasClass(Tt+"-bottom-right");return{top:e.hasClass(qn)||i||n,left:e.hasClass(jn)||i||s,bottom:e.hasClass(Xn)||s||o,right:e.hasClass(Zn)||n||o}},_getArea:function(){var t=this.option("area");return Te(t)&&(t=t.call(this)),Q(t)?this._getAreaFromObject(t):this._getAreaFromElement(t)},_getAreaScrollOffset:function(){var t=this.option("area"),e=!Te(t)&&!Q(t),i={scrollY:0,scrollX:0};if(e){var n=r(t)[0];lt(n)&&(i.scrollX=n.pageXOffset,i.scrollY=n.pageYOffset)}return i},_getAreaFromObject:function(t){var e={width:t.right-t.left,height:t.bottom-t.top,offset:{left:t.left,top:t.top}};return this._correctAreaGeometry(e),e},_getAreaFromElement:function(t){var e=r(t),i;return e.length&&(i={width:Ae(e),height:Le(e),offset:d({top:0,left:0},lt(e[0])?{}:e.offset())},this._correctAreaGeometry(i,e)),i},_correctAreaGeometry:function(t,e){var i=e?this._getBorderWidth(e,"left"):0,n=e?this._getBorderWidth(e,"top"):0;t.offset.left+=i+this._getBorderWidth(this.$element(),"left"),t.offset.top+=n+this._getBorderWidth(this.$element(),"top"),t.width-=B(this.$element())-Ae(this.$element()),t.height-=A(this.$element())-Le(this.$element())},_dragEndHandler:function(t){var e=this.$element();this._resizeEndAction({event:t,width:B(e),height:A(e),handles:this._movingSides}),this._toggleResizingClass(!1)},_renderWidth:function(t){this.option("width",K(t,this.option("minWidth"),this.option("maxWidth")))},_renderHeight:function(t){this.option("height",K(t,this.option("minHeight"),this.option("maxHeight")))},_optionChanged:function(t){switch(t.name){case"disabled":this._toggleEventHandlers(!t.value),this.callBase(t);break;case"handles":this._invalidate();break;case"minWidth":case"maxWidth":D()&&this._renderWidth(B(this.$element()));break;case"minHeight":case"maxHeight":D()&&this._renderHeight(A(this.$element()));break;case"onResize":case"onResizeStart":case"onResizeEnd":this._renderActions();break;case"area":case"stepPrecision":case"step":case"roundStepValue":case"keepAspectRatio":break;default:this.callBase(t)}},_clean:function(){this.$element().find("."+bt).remove()},_useTemplates:function(){return!1}});P(Nt,Bi);var is=Ci.inherit({_initMarkup(){this._deferredItems=[],this.callBase()},_renderItemContent(t){var e=new T,i=new T;this._deferredItems[t.index]=i;var n=this.callBase.call(this,t);return i.done(()=>{e.resolve(n)}),e.promise()},_createItemByTemplate(t,e){return t.render({model:e.itemData,container:e.container,index:e.index,onRendered:()=>{this._deferredItems[e.index].resolve()}})},_postProcessRenderItems:_,_renderItemsAsync(){var t=new T;return ht.apply(this,this._deferredItems).done(()=>{this._postProcessRenderItems(),t.resolve()}),t.promise()},_clean(){this.callBase(),this._deferredItems=[]}}),ns="dx-toolbar",Gt="dx-toolbar-before",ss="dx-toolbar-center",Pe="dx-toolbar-after",os="dx-toolbar-mini",as="dx-toolbar-item",ct="dx-toolbar-label",rs="dx-toolbar-button",ls="dx-toolbar-items-container",hs="dx-toolbar-group",He="dx-toolbar-compact",ke="text",cs="default",ds="contained",us="dxToolbarItemDataKey",_s=15;class ps extends is{_getSynchronizableOptionsForCreateComponent(){return super._getSynchronizableOptionsForCreateComponent().filter(e=>e!=="disabled")}_initTemplates(){super._initTemplates();var e=new Ei(function(i,n,s){if(Q(n)){var{text:o,html:a,widget:l}=n;if(o&&i.text(o).wrapInner("<div>"),a&&i.html(a),l==="dxDropDownButton"){var h;n.options=(h=n.options)!==null&&h!==void 0?h:{},w(n.options.stylingMode)||(n.options.stylingMode=this.option("useFlatButtons")?ke:ds)}if(l==="dxButton"){if(this.option("useFlatButtons")){var u,v;n.options=(u=n.options)!==null&&u!==void 0?u:{},n.options.stylingMode=(v=n.options.stylingMode)!==null&&v!==void 0?v:ke}if(this.option("useDefaultButtons")){var m,g;n.options=(m=n.options)!==null&&m!==void 0?m:{},n.options.type=(g=n.options.type)!==null&&g!==void 0?g:cs}}}else i.text(String(n));this._getTemplate("dx-polymorph-widget").render({container:i,model:s,parent:this})}.bind(this),["text","html","widget","options"],this.option("integrationOptions.watchMethod"));this._templateManager.addDefaultTemplates({item:e,menuItem:e})}_getDefaultOptions(){return d(super._getDefaultOptions(),{renderAs:"topToolbar",grouped:!1,useFlatButtons:!1,useDefaultButtons:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:function(){return V()},options:{useFlatButtons:!0}}])}_itemContainer(){return this._$toolbarItemsContainer.find([".".concat(Gt),".".concat(ss),".".concat(Pe)].join(","))}_itemClass(){return as}_itemDataKey(){return us}_dimensionChanged(){this._arrangeItems(),this._applyCompactMode()}_initMarkup(){this._renderToolbar(),this._renderSections(),super._initMarkup()}_render(){super._render(),this._renderItemsAsync(),this._updateDimensionsInMaterial()}_postProcessRenderItems(){this._arrangeItems()}_renderToolbar(){this.$element().addClass(ns),this._$toolbarItemsContainer=r("<div>").addClass(ls).appendTo(this.$element()),this.setAria("role","toolbar")}_renderSections(){var e=this._$toolbarItemsContainer;f(["before","center","after"],(i,n)=>{var s="dx-toolbar-".concat(n),o=e.find(".".concat(s));o.length||(this["_$".concat(n,"Section")]=r("<div>").addClass(s).appendTo(e))})}_arrangeItems(e){var i;e=(i=e)!==null&&i!==void 0?i:L(this.$element()),this._$centerSection.css({margin:"0 auto",float:"none"});var n=Z(this._$beforeSection.get(0)),s=Z(this._$afterSection.get(0));this._alignCenterSection(n,s,e);var o=this._$toolbarItemsContainer.find(".".concat(ct)).eq(0),a=o.parent();if(!!o.length){var l=n.width?n.width:o.position().left,h=a.hasClass(Gt)?0:l,u=a.hasClass(Pe)?0:s.width,v=0;a.children().not(".".concat(ct)).each(function(){v+=B(this)});var m=e-v,g=Math.max(m-h-u,0);if(a.hasClass(Gt))this._alignSection(this._$beforeSection,g);else{var O=B(o)-L(o);o.css("maxWidth",g-O)}}}_alignCenterSection(e,i,n){this._alignSection(this._$centerSection,n-e.width-i.width);var s=this.option("rtlEnabled"),o=s?i:e,a=s?e:i,l=Z(this._$centerSection.get(0));(o.right>l.left||l.right>a.left)&&this._$centerSection.css({marginLeft:o.width,marginRight:a.width,float:o.width>a.width?"none":"right"})}_alignSection(e,i){var n=e.find(".".concat(ct)),s=n.toArray();i-=this._getCurrentLabelsPaddings(s);var o=this._getCurrentLabelsWidth(s),a=Math.abs(o-i);i<o?(s=s.reverse(),this._alignSectionLabels(s,a,!1)):this._alignSectionLabels(s,a,!0)}_alignSectionLabels(e,i,n){for(var s=function(v){return Z(v).width},o=0;o<e.length;o++){var a=r(e[o]),l=Math.ceil(s(e[o])),h=void 0;n&&a.css("maxWidth","inherit");var u=Math.ceil(n?s(e[o]):l);if(u<i)h=n?u:0,i-=u;else{h=n?l+i:l-i,a.css("maxWidth",h);break}a.css("maxWidth",h)}}_applyCompactMode(){var e=this.$element();e.removeClass(He),this.option("compactMode")&&this._getSummaryItemsWidth(this.itemElements(),!0)>L(e)&&e.addClass(He)}_getCurrentLabelsWidth(e){var i=0;return e.forEach(function(n,s){i+=B(n)}),i}_getCurrentLabelsPaddings(e){var i=0;return e.forEach(function(n,s){i+=B(n)-L(n)}),i}_renderItem(e,i,n,s){var o,a,l=(o=i.location)!==null&&o!==void 0?o:"center",h=n!=null?n:this["_$".concat(l,"Section")],u=!!((a=i.text)!==null&&a!==void 0?a:i.html),v=super._renderItem(e,i,h,s);return v.toggleClass(rs,!u).toggleClass(ct,u).addClass(i.cssClass),v}_renderGroupedItems(){f(this.option("items"),(e,i)=>{var n,s=i.items,o=r("<div>").addClass(hs),a=(n=i.location)!==null&&n!==void 0?n:"center";!s||!s.length||(f(s,(l,h)=>{this._renderItem(l,h,o,null)}),this._$toolbarItemsContainer.find(".dx-toolbar-".concat(a)).append(o))})}_renderItems(e){var i=this.option("grouped")&&e.length&&e[0].items;i?this._renderGroupedItems():super._renderItems(e)}_getToolbarItems(){var e;return(e=this.option("items"))!==null&&e!==void 0?e:[]}_renderContentImpl(){var e=this._getToolbarItems();this.$element().toggleClass(os,e.length===0),this._renderedItemsCount?this._renderItems(e.slice(this._renderedItemsCount)):this._renderItems(e),this._applyCompactMode()}_renderEmptyMessage(){}_clean(){this._$toolbarItemsContainer.children().empty(),this.$element().empty(),delete this._$beforeSection,delete this._$centerSection,delete this._$afterSection}_visibilityChanged(e){e&&this._arrangeItems()}_isVisible(){return L(this.$element())>0&&C(this.$element())>0}_getIndexByItem(e){return this._getToolbarItems().indexOf(e)}_itemOptionChanged(e,i,n){super._itemOptionChanged.apply(this,[e,i,n]),this._arrangeItems()}_optionChanged(e){var{name:i,value:n}=e;switch(i){case"width":super._optionChanged.apply(this,arguments),this._dimensionChanged();break;case"renderAs":case"useFlatButtons":case"useDefaultButtons":this._invalidate();break;case"compactMode":this._applyCompactMode();break;case"grouped":break;default:super._optionChanged.apply(this,arguments)}}_dispose(){super._dispose(),clearTimeout(this._waitParentAnimationTimeout)}_updateDimensionsInMaterial(){V()&&Promise.all([(()=>new Promise(e=>{var i=()=>{var s=!0;return this.$element().parents().each((o,a)=>{if(bi.isAnimating(r(a)))return s=!1,!1}),s&&e(),s},n=()=>{clearTimeout(this._waitParentAnimationTimeout),this._waitParentAnimationTimeout=setTimeout(()=>i()||n(),_s)};n()}))(),(()=>{var e=this.$element().find(".".concat(ct)),i=[];return e.each((n,s)=>{var o=r(s).text(),a=r(s).css("fontWeight");i.push(Ji(o,a))}),Promise.all(i)})()]).then(()=>{this._dimensionChanged()})}}P("dxToolbarBase",ps);var fs=["fullScreen","forceApplyBindings","dragOutsideBoundary","dragAndResizeArea","outsideDragFactor"],Kt=J();class vs extends tn{constructor(e){var{fullScreen:i,forceApplyBindings:n,dragOutsideBoundary:s,dragAndResizeArea:o,outsideDragFactor:a}=e,l=en(e,fs);super(l),this._props=ue({},this._props,{fullScreen:i,forceApplyBindings:n,dragOutsideBoundary:s,dragAndResizeArea:o,outsideDragFactor:a}),this._$dragResizeContainer=void 0,this._outsideDragFactor=void 0,this._lastPositionBeforeFullScreen=void 0,this._updateDragResizeContainer(),this._updateOutsideDragFactor()}set fullScreen(e){this._props.fullScreen=e,e?this._fullScreenEnabled():this._fullScreenDisabled()}get $dragResizeContainer(){return this._$dragResizeContainer}get outsideDragFactor(){return this._outsideDragFactor}set dragAndResizeArea(e){this._props.dragAndResizeArea=e,this._updateDragResizeContainer()}set dragOutsideBoundary(e){this._props.dragOutsideBoundary=e,this._updateDragResizeContainer(),this._updateOutsideDragFactor()}set outsideDragFactor(e){this._props.outsideDragFactor=e,this._updateOutsideDragFactor()}updateContainer(e){super.updateContainer(e),this._updateDragResizeContainer()}dragHandled(){this.restorePositionOnNextRender(!1)}resizeHandled(){this.restorePositionOnNextRender(!1)}positionContent(){if(this._props.fullScreen)$(this._$content,{top:0,left:0}),this.detectVisualPositionChange();else{var e,i;(e=(i=this._props).forceApplyBindings)===null||e===void 0||e.call(i),!this._shouldRenderContentInitialPosition&&this._lastPositionBeforeFullScreen?($(this._$content,this._lastPositionBeforeFullScreen),this._lastPositionBeforeFullScreen=void 0,this.detectVisualPositionChange()):super.positionContent()}}_updateOutsideDragFactor(){this._outsideDragFactor=this._getOutsideDragFactor()}_getOutsideDragFactor(){return this._props.dragOutsideBoundary?1:this._props.outsideDragFactor}_updateDragResizeContainer(){this._$dragResizeContainer=this._getDragResizeContainer()}_getDragResizeContainer(){if(this._props.dragOutsideBoundary)return r(Kt);if(this._props.dragAndResizeArea)return r(this._props.dragAndResizeArea);var e=nn().get(0)||this._props.container;return e?this._$markupContainer:r(Kt)}_getVisualContainer(){return this._props.fullScreen?r(Kt):super._getVisualContainer()}_fullScreenEnabled(){this.restorePositionOnNextRender(!1),this._lastPositionBeforeFullScreen=this._visualPosition}_fullScreenDisabled(){this.restorePositionOnNextRender(!1)}}var ms=J(),Yt="dx-popup",Me="dx-popup-wrapper",gs="dx-popup-fullscreen",Ss="dx-popup-fullscreen-width",Cs="dx-popup-normal",Es="dx-popup-content",bs="dx-state-disabled",Ts="dx-popup-draggable",Ne="dx-popup-title",As="dx-closebutton",Ve="dx-popup-bottom",Ls="dx-has-close-button",Is="dx-template-wrapper",Ds="dx-popup-flex-height",Os="dx-popup-inherit-height",ze=["cancel","clear","done"],Bs="default",ws="normal",xs="text",ys="contained",Rs=re.safari&&sn(re.version,[11])<0,G={static:"",inherit:Os,flex:Ds},$s=t=>{var e=S.current(),i=e.platform,n="bottom",s="before";if(i==="ios")switch(t){case"cancel":n="top";break;case"clear":n="top",s="after";break;case"done":s="after"}else if(i==="android")switch(t){case"cancel":case"done":s="after"}return{toolbar:n,location:s}},wi=Ti.inherit({_supportedKeys:function(){return d(this.callBase(),{upArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveUp(t)},downArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveDown(t)},leftArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveLeft(t)},rightArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveRight(t)}})},_getDefaultOptions:function(){return d(this.callBase(),{fullScreen:!1,title:"",showTitle:!0,titleTemplate:"title",onTitleRendered:null,dragOutsideBoundary:!1,dragEnabled:!1,dragAndResizeArea:void 0,outsideDragFactor:0,onResizeStart:null,onResize:null,onResizeEnd:null,resizeEnabled:!1,toolbarItems:[],showCloseButton:!1,bottomTemplate:"bottom",useDefaultToolbarButtons:!1,useFlatToolbarButtons:!1,autoResizeEnabled:!0})},_defaultOptionsRules:function(){var t=Ai();return this.callBase().concat([{device:{platform:"ios"},options:{animation:this._iosAnimation}},{device:{platform:"android"},options:{animation:this._androidAnimation}},{device:{platform:"generic"},options:{showCloseButton:!0}},{device:function(e){return S.real().deviceType==="desktop"&&e.platform==="generic"},options:{dragEnabled:!0}},{device:function(){return S.real().deviceType==="desktop"&&!S.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return V(t)},options:{useDefaultToolbarButtons:!0,useFlatToolbarButtons:!0,showCloseButton:!1}}])},_iosAnimation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom"}},to:{position:{my:"center",at:"center"}}},hide:{type:"slide",duration:400,from:{opacity:1,position:{my:"center",at:"center"}},to:{opacity:1,position:{my:"top",at:"bottom"}}}},_androidAnimation:function(){return this.option("fullScreen")?{show:{type:"slide",duration:300,from:{top:"30%",opacity:0},to:{top:0,opacity:1}},hide:{type:"slide",duration:300,from:{top:0,opacity:1},to:{top:"30%",opacity:0}}}:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}}},_init:function(){var t=this.option("_wrapperClassExternal"),e=t?"".concat(Me," ").concat(t):Me;this.callBase(),this._updateResizeCallbackSkipCondition(),this.$element().addClass(Yt),this.$wrapper().addClass(e),this._$popupContent=this._$content.wrapInner(r("<div>").addClass(Es)).children().eq(0)},_render:function(){var t=this.option("fullScreen");this._toggleFullScreenClass(t),this.callBase()},_toggleFullScreenClass:function(t){this.$overlayContent().toggleClass(gs,t).toggleClass(Cs,!t)},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({title:new Wt,bottom:new Wt})},_getActionsList:function(){return this.callBase().concat(["onResizeStart","onResize","onResizeEnd"])},_contentResizeHandler:function(t){this._shouldSkipContentResize(t)||this._renderGeometry({shouldOnlyReposition:!0})},_doesShowAnimationChangeDimensions:function(){var t=this.option("animation");return["to","from"].some(e=>{var i,n=t==null||(i=t.show)===null||i===void 0?void 0:i[e];return _e(n)&&("width"in n||"height"in n)})},_updateResizeCallbackSkipCondition(){var t=this._doesShowAnimationChangeDimensions();this._shouldSkipContentResize=e=>t&&this._showAnimationProcessing||this._areContentDimensionsRendered(e)},_observeContentResize:function(t){if(!!this.option("useResizeObserver")){var e=this._$content.get(0);t?Ie.observe(e,i=>{this._contentResizeHandler(i)}):Ie.unobserve(e)}},_areContentDimensionsRendered:function(t){var e,i,n,s=(e=t.contentBoxSize)===null||e===void 0?void 0:e[0];if(s){var o,a;return parseInt(s.inlineSize,10)===((o=this._renderedDimensions)===null||o===void 0?void 0:o.width)&&parseInt(s.blockSize,10)===((a=this._renderedDimensions)===null||a===void 0?void 0:a.height)}var l=t.contentRect;return parseInt(l.width,10)===((i=this._renderedDimensions)===null||i===void 0?void 0:i.width)&&parseInt(l.height,10)===((n=this._renderedDimensions)===null||n===void 0?void 0:n.height)},_renderContentImpl:function(){this._renderTitle(),this.callBase(),this._renderResize(),this._renderBottom()},_renderTitle:function(){var t=this._getToolbarItems("top"),e=this.option("title"),i=this.option("showTitle");if(i&&!!e&&t.unshift({location:S.current().ios?"center":"before",text:e}),i||t.length>0){this._$title&&this._$title.remove();var n=r("<div>").addClass(Ne).insertBefore(this.$content());this._$title=this._renderTemplateByType("titleTemplate",t,n).addClass(Ne),this._renderDrag(),this._executeTitleRenderAction(this._$title),this._$title.toggleClass(Ls,this._hasCloseButton())}else this._$title&&this._$title.detach()},_renderTemplateByType:function(t,e,i,n){var{rtlEnabled:s,useDefaultToolbarButtons:o,useFlatToolbarButtons:a,disabled:l}=this.option(),h=this._getTemplateByOption(t),u=h instanceof Wt;if(u){var v=d({},this.option("integrationOptions"),{skipTemplates:["content","title"]}),m=d(n,{items:e,rtlEnabled:s,useDefaultButtons:o,useFlatButtons:a,disabled:l,integrationOptions:v});this._getTemplate("dx-polymorph-widget").render({container:i,model:{widget:this._getToolbarName(),options:m}});var g=i.children("div");return i.replaceWith(g),g}else{var O=r(h.render({container:x(i)}));return O.hasClass(Is)&&(i.replaceWith(O),i=O),i}},_getToolbarName:function(){return"dxToolbarBase"},_renderVisibilityAnimate:function(t){return this._observeContentResize(t),this.callBase(t)},_executeTitleRenderAction:function(t){this._getTitleRenderAction()({titleElement:x(t)})},_getTitleRenderAction:function(){return this._titleRenderAction||this._createTitleRenderAction()},_createTitleRenderAction:function(){return this._titleRenderAction=this._createActionByOption("onTitleRendered",{element:this.element(),excludeValidators:["disabled","readOnly"]})},_getCloseButton:function(){return{toolbar:"top",location:"after",template:this._getCloseButtonRenderer()}},_getCloseButtonRenderer:function(){return(t,e,i)=>{var n=r("<div>").addClass(As);this._createComponent(n,$t,{icon:"close",onClick:this._createToolbarItemAction(void 0),stylingMode:"text",integrationOptions:{}}),r(i).append(n)}},_getToolbarItems:function(t){var e=this.option("toolbarItems"),i=[];this._toolbarItemClasses=[];var n=S.current().platform,s=0;return f(e,(o,a)=>{var l=w(a.shortcut),h=l?$s(a.shortcut):a;if(l&&n==="ios"&&s<2&&(h.toolbar="top",s++),h.toolbar=a.toolbar||h.toolbar||"top",h&&h.toolbar===t){l&&d(h,{location:a.location},this._getToolbarItemByAlias(a));var u=n==="generic";a.shortcut==="done"&&u||a.shortcut==="cancel"&&!u?i.unshift(h):i.push(h)}}),t==="top"&&this._hasCloseButton()&&i.push(this._getCloseButton()),i},_hasCloseButton(){return this.option("showCloseButton")&&this.option("showTitle")},_getLocalizationKey:t=>t.toLowerCase()==="done"?"OK":on(t,!0),_getToolbarItemByAlias:function(t){var e=this,i=t.shortcut;if(!ze.includes(i))return!1;var n=d({text:E.format(this._getLocalizationKey(i)),onClick:this._createToolbarItemAction(t.onClick),integrationOptions:{},type:e.option("useDefaultToolbarButtons")?Bs:ws,stylingMode:e.option("useFlatToolbarButtons")?xs:ys},t.options||{}),s=Yt+"-"+i;return this._toolbarItemClasses.push(s),{template:function(o,a,l){var h=r("<div>").addClass(s).appendTo(l);e._createComponent(h,$t,n)}}},_createToolbarItemAction:function(t){return this._createAction(t,{afterExecute:function(e){e.component.hide()}})},_renderBottom:function(){var t=this._getToolbarItems("bottom");if(t.length){this._$bottom&&this._$bottom.remove();var e=r("<div>").addClass(Ve).insertAfter(this.$content());this._$bottom=this._renderTemplateByType("bottomTemplate",t,e,{compactMode:!0}).addClass(Ve),this._toggleClasses()}else this._$bottom&&this._$bottom.detach()},_toggleDisabledState:function(t){this.callBase(...arguments),this.$content().toggleClass(bs,Boolean(t))},_toggleClasses:function(){var t=ze;f(t,(e,i)=>{var n=Yt+"-"+i;this._toolbarItemClasses.includes(n)?(this.$wrapper().addClass(n+"-visible"),this._$bottom.addClass(n)):(this.$wrapper().removeClass(n+"-visible"),this._$bottom.removeClass(n))})},_toggleFocusClass(t,e){if(this.callBase(t,e),t&&!an(this._zIndex)){var i=rn(this._zIndexInitValue());ln(this._zIndex),this._zIndex=i,this._$wrapper.css("zIndex",i),this._$content.css("zIndex",i)}},_getPositionControllerConfig(){var{fullScreen:t,forceApplyBindings:e,dragOutsideBoundary:i,dragAndResizeArea:n,outsideDragFactor:s}=this.option();return d({},this.callBase(),{fullScreen:t,forceApplyBindings:e,dragOutsideBoundary:i,dragAndResizeArea:n,outsideDragFactor:s})},_initPositionController(){this._positionController=new vs(this._getPositionControllerConfig())},_getDragTarget:function(){return this.topToolbar()},_renderGeometry:function(t){var{visible:e,useResizeObserver:i}=this.option();if(e&&D()){var n=this._showAnimationProcessing,s=n&&!(t!=null&&t.forceStopAnimation)&&i;this._isAnimationPaused=s||void 0,this._stopAnimation(),t!=null&&t.shouldOnlyReposition?this._renderPosition(!1):this._renderGeometryImpl(t==null?void 0:t.isDimensionChange),s&&(this._animateShowing(),this._isAnimationPaused=void 0)}},_cacheDimensions:function(){!this.option("useResizeObserver")||(this._renderedDimensions={width:parseInt(L(this._$content),10),height:parseInt(C(this._$content),10)})},_renderGeometryImpl:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;t||this._resetContentHeight(),this.callBase(),this._cacheDimensions(),this._setContentHeight()},_resetContentHeight:function(){var t=this._getOptionValue("height");t==="auto"&&this.$content().css({height:"auto",maxHeight:"none"})},_renderDrag:function(){var t=this._getDragTarget(),e=this.option("dragEnabled");if(!!t){var i={dragEnabled:e,handle:t.get(0),draggableElement:this._$content.get(0),positionController:this._positionController};this._drag?this._drag.init(i):this._drag=new Gn(i),this.$overlayContent().toggleClass(Ts,e)}},_renderResize:function(){this._resizable=this._createComponent(this._$content,Bi,{handles:this.option("resizeEnabled")?"all":"none",onResizeEnd:t=>{this._resizeEndHandler(t),this._observeContentResize(!0)},onResize:t=>{this._setContentHeight(),this._actions.onResize(t)},onResizeStart:t=>{this._observeContentResize(!1),this._actions.onResizeStart(t)},minHeight:100,minWidth:100,area:this._positionController.$dragResizeContainer,keepAspectRatio:!1})},_resizeEndHandler:function(t){var e=this._resizable.option("width"),i=this._resizable.option("height");e&&this._setOptionWithoutOptionChange("width",e),i&&this._setOptionWithoutOptionChange("height",i),this._cacheDimensions(),this._positionController.resizeHandled(),this._positionController.detectVisualPositionChange(t.event),this._actions.onResizeEnd(t)},_setContentHeight:function(){(this.option("forceApplyBindings")||_)();var t=this.$overlayContent().get(0),e=this._chooseHeightStrategy(t);this.$content().css(this._getHeightCssStyles(e,t)),this._setHeightClasses(this.$overlayContent(),e)},_heightStrategyChangeOffset:function(t,e){return t===G.flex?-e:0},_chooseHeightStrategy:function(t){var e=t.style.width==="auto"||t.style.width==="",i=G.static;return this._isAutoHeight()&&this.option("autoResizeEnabled")&&(e||Rs?i=G.inherit:i=G.flex),i},_getHeightCssStyles:function(t,e){var i={},n=this._getOptionValue("maxHeight",e),s=this._getOptionValue("minHeight",e),o=this._splitPopupHeight(),a=o.header+o.footer+o.contentVerticalOffsets+o.popupVerticalOffsets+this._heightStrategyChangeOffset(t,o.popupVerticalPaddings);if(t===G.static){if(!this._isAutoHeight()||n||s){var l=this.option("fullScreen")?Math.min(Z(e).height,J().innerHeight):Z(e).height,h=l-a;i={height:Math.max(0,h),minHeight:"auto",maxHeight:"auto"}}}else{var u=r(this._positionController.$visualContainer).get(0),v=hn(n,-a,u),m=cn(s,-a,u);i={height:"auto",minHeight:m,maxHeight:v}}return i},_setHeightClasses:function(t,e){var i="";for(var n in G)G[n]!==e&&(i+=" "+G[n]);t.removeClass(i).addClass(e)},_isAutoHeight:function(){return this.$overlayContent().get(0).style.height==="auto"},_splitPopupHeight:function(){var t=this.topToolbar(),e=this.bottomToolbar();return{header:De(t&&t.get(0)),footer:De(e&&e.get(0)),contentVerticalOffsets:Ft(this.$overlayContent().get(0),!0),popupVerticalOffsets:Ft(this.$content().get(0),!0),popupVerticalPaddings:Ft(this.$content().get(0),!1)}},_isAllWindowCovered:function(){return this.callBase()||this.option("fullScreen")},_renderDimensions:function(){this.option("fullScreen")?this.$overlayContent().css({width:"100%",height:"100%",minWidth:"",maxWidth:"",minHeight:"",maxHeight:""}):this.callBase(),D()&&this._renderFullscreenWidthClass()},_dimensionChanged:function(){this._renderGeometry({isDimensionChange:!0})},_clean:function(){this.callBase(),this._observeContentResize(!1)},_renderFullscreenWidthClass:function(){this.$overlayContent().toggleClass(Ss,B(this.$overlayContent())===L(ms))},refreshPosition:function(){this._renderPosition()},_optionChanged:function(t){var e,i=t.value;switch(t.name){case"disabled":this.callBase(t),this._renderTitle(),this._renderBottom();break;case"animation":this._updateResizeCallbackSkipCondition();break;case"showTitle":case"title":case"titleTemplate":this._renderTitle(),this._renderGeometry(),at(this.$overlayContent());break;case"bottomTemplate":this._renderBottom(),this._renderGeometry(),at(this.$overlayContent());break;case"container":if(this.callBase(t),this.option("resizeEnabled")){var n;(n=this._resizable)===null||n===void 0||n.option("area",this._positionController.$dragResizeContainer)}break;case"width":case"height":this.callBase(t),(e=this._resizable)===null||e===void 0||e.option(t.name,t.value);break;case"onTitleRendered":this._createTitleRenderAction(t.value);break;case"toolbarItems":case"useDefaultToolbarButtons":case"useFlatToolbarButtons":var s=!t.fullName.match(/^toolbarItems((\[\d+\])(\.(options|visible).*)?)?$/);this._renderTitle(),this._renderBottom(),s&&(this._renderGeometry(),at(this.$overlayContent()));break;case"dragEnabled":this._renderDrag();break;case"dragAndResizeArea":this._positionController.dragAndResizeArea=i,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer),this._positionController.positionContent();break;case"dragOutsideBoundary":this._positionController.dragOutsideBoundary=i,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer);break;case"outsideDragFactor":this._positionController.outsideDragFactor=i;break;case"resizeEnabled":this._renderResize(),this._renderGeometry();break;case"autoResizeEnabled":this._renderGeometry(),at(this.$overlayContent());break;case"fullScreen":this._positionController.fullScreen=t.value,this._toggleFullScreenClass(t.value),this._toggleSafariScrolling(),this._renderGeometry(),at(this.$overlayContent());break;case"showCloseButton":this._renderTitle();break;default:this.callBase(t)}},bottomToolbar:function(){return this._$bottom},topToolbar:function(){return this._$title},$content:function(){return this._$popupContent},content:function(){return x(this.$content())},$overlayContent:function(){return this._$content}});P("dxPopup",wi);var We=function(t){if(D())return B(t)},Ps=function(t){return t===null&&(t=void 0),typeof t=="function"&&(t=t()),t},Hs="dx-dropdowneditor",Fe="dx-dropdowneditor-input-wrapper",ks="dx-dropdowneditor-icon",At="dx-dropdowneditor-overlay",Ms="dx-dropdowneditor-overlay-flipped",Ns="dx-dropdowneditor-active",Vs="dx-dropdowneditor-field-clickable",zs="dx-dropdowneditor-field-template-wrapper",Ue=S.current().platform==="ios",xi=dn.inherit({_supportedKeys:function(){return d({},this.callBase(),{tab:function(t){if(!!this.option("opened")){if(this.option("applyValueMode")==="instantly"){this.close();return}var e=t.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();e&&c.trigger(e,"focus"),t.preventDefault()}},escape:function(t){return this.option("opened")&&t.preventDefault(),this.close(),!0},upArrow:function(t){return!le(t)&&(t.preventDefault(),t.stopPropagation(),t.altKey)?(this.close(),!1):!0},downArrow:function(t){return!le(t)&&(t.preventDefault(),t.stopPropagation(),t.altKey)?(this._validatedOpening(),!1):!0},enter:function(t){return this.option("opened")&&(t.preventDefault(),this._valueChangeEventHandler(t)),!0}})},_getDefaultButtons:function(){return this.callBase().concat([{name:"dropDown",Ctor:Un}])},_getDefaultOptions:function(){return d(this.callBase(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:E.format("OK"),cancelButtonText:E.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto"})},_useTemplates:function(){return!0},_getDefaultPopupPosition:function(t){var e=un(t);return{offset:{h:0,v:-1},my:e+" top",at:e+" bottom",collision:"flip flip"}},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(t){var e=t.platform==="generic";return e},options:{popupPosition:{offset:{v:0}}}}])},_inputWrapper:function(){return this.$element().find("."+Fe).first()},_init:function(){this.callBase(),this._initVisibilityActions(),this._initPopupInitializedAction(),this._updatePopupPosition(this.option("rtlEnabled")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_updatePopupPosition:function(t){var{my:e,at:i}=this._getDefaultPopupPosition(t),n=this.option("popupPosition");this.option("popupPosition",d({},n,{my:e,at:i}))},_initVisibilityActions:function(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})},_initPopupInitializedAction:function(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})},_initMarkup:function(){this._renderSubmitElement(),this.callBase(),this.$element().addClass(Hs),this.setAria("role","combobox")},_render:function(){this.callBase(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()},_renderContentImpl:function(){this.option("deferRendering")||this._createPopup()},_renderInput:function(){this.callBase(),this._wrapInput(),this._setDefaultAria()},_wrapInput:function(){this._$container=this.$element().wrapInner(r("<div>").addClass(Fe)).children().eq(0)},_setDefaultAria:function(){this.setAria({haspopup:"true",autocomplete:"list"})},_readOnlyPropValue:function(){return!this._isEditable()||this.callBase()},_cleanFocusState:function(){this.callBase(),this.option("fieldTemplate")&&this._detachFocusEvents()},_getFieldTemplate:function(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")},_renderMask:function(){this.option("fieldTemplate")||this.callBase()},_renderField:function(){var t=this._getFieldTemplate();t&&this._renderTemplatedField(t,this._fieldRenderData())},_renderPlaceholder:function(){var t=!!this._getFieldTemplate();t||this.callBase()},_renderValue:function(){this.option("useHiddenSubmitElement")&&this._setSubmitValue();var t=this.callBase();t.always(this._renderField.bind(this))},_renderTemplatedField:function(t,e){var i;this._fieldRenderQueueLength=((i=this._fieldRenderQueueLength)!==null&&i!==void 0?i:0)+1;var n=Oe(this._input()),s=this._$container;this._detachKeyboardEvents(),this._refreshButtonsContainer(),this._detachWrapperContent(),this._detachFocusEvents(),s.empty();var o=r("<div>").addClass(zs).appendTo(s);t.render({model:e,container:x(o),onRendered:()=>{if(this._fieldRenderQueueLength--,this._fieldRenderQueueLength===0){var a=this._input();if(!a.length)throw gt.Error("E1010");this._integrateInput(),n&&c.trigger(a,"focus")}}}),this._attachWrapperContent(s)},_detachWrapperContent(){var t,e,i,n=this.option("useHiddenSubmitElement");n&&((t=this._$submitElement)===null||t===void 0||t.detach());var s=(e=this._$beforeButtonsContainer)===null||e===void 0?void 0:e[0].parentNode,o=(i=this._$afterButtonsContainer)===null||i===void 0?void 0:i[0].parentNode;s==null||s.removeChild(this._$beforeButtonsContainer[0]),o==null||o.removeChild(this._$afterButtonsContainer[0])},_attachWrapperContent(t){var e,i=this.option("useHiddenSubmitElement");t.prepend(this._$beforeButtonsContainer),i&&((e=this._$submitElement)===null||e===void 0||e.appendTo(t)),t.append(this._$afterButtonsContainer)},_refreshButtonsContainer(){this._$buttonsContainer=this.$element().children().eq(0)},_integrateInput:function(){this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent()},_refreshEmptinessEvent:function(){c.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()},_fieldRenderData:function(){return this.option("value")},_initTemplates:function(){this._templateManager.addDefaultTemplates({dropDownButton:new _n(function(t){var e=r("<div>").addClass(ks);r(t.container).append(e)})}),this.callBase()},_renderOpenHandler:function(){var t=this._inputWrapper(),e=p(Mt,this.NAME),i=this.option("openOnFieldClick");c.off(t,e),c.on(t,e,this._getInputClickHandler(i)),this.$element().toggleClass(Vs,i),i&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))},_attachFocusOutHandler:function(){Ue&&(this._detachFocusOutEvents(),c.on(this._inputWrapper(),p("focusout",this.NAME),t=>{var e=t.relatedTarget,i=this.content?r(this.content()).closest("."+At):this._$popup;if(e&&this.option("opened")){var n=r(e).closest("."+At,i).length===0;n&&this.close()}}))},_detachFocusOutEvents:function(){Ue&&c.off(this._inputWrapper(),p("focusout",this.NAME))},_getInputClickHandler:function(t){return t?e=>{this._executeOpenAction(e)}:e=>{this._focusInput()}},_openHandler:function(){this._toggleOpenState()},_executeOpenAction:function(t){this._openOnFieldClickAction({event:t})},_keyboardEventBindingTarget:function(){return this._input()},_focusInput:function(){return this.option("disabled")?!1:(this.option("focusStateEnabled")&&!Oe(this._input())&&(this._resetCaretPosition(),c.trigger(this._input(),"focus")),!0)},_resetCaretPosition:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this._input().get(0);if(e){var{value:i}=e,n=w(i)&&(t||this._isEditable())?i.length:0;this._caret({start:n,end:n},!0)}},_isEditable:function(){return this.option("acceptCustomValue")},_toggleOpenState:function(t){!this._focusInput()||this.option("readOnly")||(t=arguments.length?t:!this.option("opened"),this.option("opened",t))},_getControlsAria(){return this._popup&&this._popupContentId},_renderOpenedState:function(){var t=this.option("opened");t&&this._createPopup(),this.$element().toggleClass(Ns,t),this._setPopupOption("visible",t);var e={expanded:t,controls:this._getControlsAria()};this.setAria(e),this.setAria("owns",t?this._popupContentId:void 0,this.$element())},_createPopup:function(){this._$popup||(this._$popup=r("<div>").addClass(At).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent())},_renderPopupContent:_,_renderPopup:function(){var t=d(this._popupConfig(),this._options.cache("dropDownOptions"));this._popup=this._createComponent(this._$popup,wi,t),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_setPopupContentId(t){this._popupContentId="dx-"+new Li,this.setAria("id",this._popupContentId,t)},_contentReadyHandler:_,_popupConfig:function(){return{onInitialized:this._popupInitializedHandler(),position:d(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>We(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:t=>this._closeOutsideDropDownHandler(t),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_wrapperClassExternal:At}},_popupInitializedHandler:function(){return this.option("onPopupInitialized")?t=>{this._popupInitializedAction({popup:t.component})}:null},_dimensionChanged:function(){var t=Ps(this.option("dropDownOptions.width"));t===void 0&&this._setPopupOption("width",()=>We(this.$element()))},_popupPositionedHandler:function(t){var{labelMode:e,stylingMode:i}=this.option(),n=this._popup.$overlayContent(),s=t.position.v.flip,o=e!=="hidden"&&i==="outlined";if(t.position&&n.toggleClass(Ms,s),s&&o&&this._label.isVisible()){var a=this._label.$element();$(n,{top:mt(n).top-parseInt(a.css("fontSize"))})}},_popupShowingHandler:_,_popupHidingHandler:function(){this.option("opened",!1)},_popupShownHandler:function(){var t;this._openAction(),(t=this._validationMessage)===null||t===void 0||t.option("positionSide",this._getValidationMessagePositionSide())},_popupHiddenHandler:function(){var t;this._closeAction(),(t=this._validationMessage)===null||t===void 0||t.option("positionSide",this._getValidationMessagePositionSide())},_getValidationMessagePositionSide:function(){var t=this.option("validationMessagePosition");if(t!=="auto")return t;var e="bottom";if(this._popup&&this._popup.option("visible")){var{top:i}=Be.setup(this.$element()),{top:n}=Be.setup(this._popup.$content());e=i+this.option("popupPosition").offset.v>n?"bottom":"top"}return e},_closeOutsideDropDownHandler:function(t){var{target:e}=t,i=r(e),n=this.getButton("dropDown"),s=n&&n.$element(),o=!!i.closest(this.$element()).length,a=!!i.closest(s).length,l=!o&&!a;return l},_clean:function(){delete this._openOnFieldClickAction,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),this.callBase()},_setPopupOption:function(t,e){this._setWidgetOption("_popup",arguments)},_validatedOpening:function(){this.option("readOnly")||this._toggleOpenState(!0)},_getPopupToolbarItems:function(){return this.option("applyValueMode")==="useButtons"?this._popupToolbarItemsConfig():[]},_getFirstPopupElement:function(){return this._popup.$wrapper().find(".dx-popup-done.dx-button")},_getLastPopupElement:function(){return this._popup.$wrapper().find(".dx-popup-cancel.dx-button")},_popupElementTabHandler:function(t){var e=r(t.currentTarget);(t.shiftKey&&e.is(this._getFirstPopupElement())||!t.shiftKey&&e.is(this._getLastPopupElement()))&&(c.trigger(this._input(),"focus"),t.preventDefault())},_popupElementEscHandler:function(){c.trigger(this._input(),"focus"),this.close()},_popupButtonInitializedHandler:function(t){t.component.registerKeyHandler("tab",this._popupElementTabHandler.bind(this)),t.component.registerKeyHandler("escape",this._popupElementEscHandler.bind(this))},_popupToolbarItemsConfig:function(){var t=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText"),onInitialized:this._popupButtonInitializedHandler.bind(this)}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText"),onInitialized:this._popupButtonInitializedHandler.bind(this)}}];return this._applyButtonsLocation(t)},_applyButtonsLocation:function(t){var e=this.option("buttonsLocation"),i=t;if(e!=="default"){var n=pn(e);f(i,function(s,o){d(o,{toolbar:n[0],location:n[1]})})}return i},_applyButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_cancelButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_popupOptionChanged:function(t){var e=Ii.getOptionsFromContainer(t);this._setPopupOption(e);var i=Object.keys(e);(i.indexOf("width")!==-1||i.indexOf("height")!==-1)&&this._dimensionChanged()},_renderSubmitElement:function(){this.option("useHiddenSubmitElement")&&(this._$submitElement=r("<input>").attr("type","hidden").appendTo(this.$element()))},_setSubmitValue:function(){this._getSubmitElement().val(this.option("value"))},_getSubmitElement:function(){return this.option("useHiddenSubmitElement")?this._$submitElement:this.callBase()},_dispose:function(){this._detachFocusOutEvents(),this.callBase()},_optionChanged:function(t){var e;switch(t.name){case"width":case"height":this.callBase(t),(e=this._popup)===null||e===void 0||e.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":w(t.value)?this._renderField():this._invalidate();break;case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(t),this._options.cache("dropDownOptions",this.option("dropDownOptions"));break;case"popupPosition":break;case"deferRendering":D()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(t.value),this.callBase(t);break;default:this.callBase(t)}},open:function(){this.option("opened",!0)},close:function(){this.option("opened",!1)},field:function(){return x(this._input())},content:function(){return this._popup?this._popup.content():null}});P("dxDropDownEditor",xi);var Ws="dx-list-item",Ge="dx-list-group",pe=20,Fs=(1<<pe)-1,Ke=function(t){return(t.group<<pe)+t.item},X=function(t){return{group:t>>pe,item:t&Fs}},Us=fn.inherit({_groupElements:function(){return this._collectionWidget._itemContainer().find("."+Ge)},_groupItemElements:function(t){return t.find("."+Ws)},getIndexByItemData:function(t){var e=this._collectionWidget.option("items"),i=!1;return t?(t.items&&t.items.length&&(t=t.items[0]),f(e,function(n,s){if(!s.items||(f(s.items,function(o,a){return a!==t?!0:(i={group:n,item:o},!1)}),i))return!1}),i):!1},getItemDataByIndex:function(t){var e=this._collectionWidget.option("items");return Ut(t)?this.itemsGetter()[t]:t&&e[t.group]&&e[t.group].items[t.item]||null},itemsGetter:function(){for(var t=[],e=this._collectionWidget.option("items"),i=0;i<e.length;i++)e[i]&&e[i].items?t=t.concat(e[i].items):t.push(e[i]);return t},deleteItemAtIndex:function(t){var e=X(t),i=this._collectionWidget.option("items")[e.group].items;i.splice(e.item,1)},getKeysByItems:function(t){var e=[],i;for(i=0;i<t.length;i++)t[i]&&t[i].items?e=e.concat(t[i].items):e.push(t[i]);var n=[];for(i=0;i<e.length;i++)n.push(this._collectionWidget.keyOf(e[i]));return n},getIndexByKey:function(t,e){var i=e||this._collectionWidget.option("items"),n=-1,s=this;return f(i,function(o,a){if(!!a.items&&(f(a.items,function(l,h){var u=s._collectionWidget.keyOf(h);if(s._equalKeys(u,t))return n={group:o,item:l},!1}),n!==-1))return!1}),n},_getGroups:function(t){var e=this._collectionWidget._dataController,i=e.group();return i?vn.queryByOptions(Di(t),{group:i}).toArray():this._collectionWidget.option("items")},getItemsByKeys:function(t,e){var i=[],n=this._getGroups(e),s={},o=a=>{var l=this.getIndexByKey(a,n),h=l&&n[l.group];if(!!h)return{groupKey:h.key,item:h.items[l.item]}};return f(t,function(a,l){var h=o(l);if(!!h){var u=h.groupKey,v=h.item,m=s[u];m||(m={key:u,items:[]},s[u]=m,i.push(m)),m.items.push(v)}}),i},moveItemAtIndexToIndex:function(t,e){var i=this._collectionWidget.option("items"),n=X(t),s=X(e),o=i[n.group].items,a=i[s.group].items,l=o[n.item];o.splice(n.item,1),a.splice(s.item,0,l)},_isItemIndex:function(t){return t&&Ut(t.group)&&Ut(t.item)},_getNormalizedItemIndex:function(t){var e=r(t),i=e.closest("."+Ge);return i.length?Ke({group:this._groupElements().index(i),item:this._groupItemElements(i).index(e)}):-1},_normalizeItemIndex:function(t){return Ke(t)},_denormalizeItemIndex:function(t){return X(t)},_getItemByNormalizedIndex:function(t){var e=X(t),i=this._groupElements().eq(e.group);return this._groupItemElements(i).eq(e.item)},_itemsFromSameParent:function(t,e){return X(t).group===X(e).group}}),yi={};function Gs(t,e,i){var n=yi,s={};s[t]=n[t]?n[t]:{},s[t][e]=i,d(n,s)}var Ri=[],Vt=function(t,e,i){Ri.push({enabled:t,decoratorType:e,decoratorSubType:i})};Vt(function(){return this.option("menuItems").length},function(){return"menu"},function(){return this.option("menuMode")});Vt(function(){return!this.option("menuItems").length&&this.option("allowItemDeleting")},function(){var t=this.option("itemDeleteMode");return t==="toggle"||t==="slideButton"||t==="swipe"||t==="static"?"delete":"menu"},function(){var t=this.option("itemDeleteMode");return t==="slideItem"&&(t="slide"),t});Vt(function(){return this.option("selectionMode")!=="none"&&this.option("showSelectionControls")},function(){return"selection"},function(){return"default"});Vt(function(){return this.option("itemDragging.allowReordering")||this.option("itemDragging.allowDropInsideItem")||this.option("itemDragging.group")},function(){return"reorder"},function(){return"default"});var Ks="dx-list-item-before-bag",Ys="dx-list-item-after-bag",qs="beforeBag",Xs="afterBag",js="modifyElement",Zs="afterRender",Qs="getExcludedSelectors",Js=tt.inherit({ctor:function(t){this._list=t,this._fetchRequiredDecorators()},dispose:function(){this._decorators&&this._decorators.length&&f(this._decorators,function(t,e){e.dispose()})},_fetchRequiredDecorators:function(){this._decorators=[],f(Ri,function(t,e){var i=e.enabled.call(this._list);if(i){var n=e.decoratorType.call(this._list),s=e.decoratorSubType.call(this._list),o=this._createDecorator(n,s);this._decorators.push(o)}}.bind(this))},_createDecorator:function(t,e){var i=this._findDecorator(t,e);return new i(this._list)},_findDecorator:function(t,e){var i,n=(i=yi[t])===null||i===void 0?void 0:i[e];if(!n)throw gt.Error("E1012",t,e);return n},modifyItemElement:function(t){var e=r(t.itemElement),i={$itemElement:e};this._prependBeforeBags(e,i),this._appendAfterBags(e,i),this._applyDecorators(js,i)},afterItemsRendered:function(){this._applyDecorators(Zs)},_prependBeforeBags:function(t,e){var i=this._collectDecoratorsMarkup(qs,e,Ks);t.prepend(i)},_appendAfterBags:function(t,e){var i=this._collectDecoratorsMarkup(Xs,e,Ys);t.append(i)},_collectDecoratorsMarkup:function(t,e,i){var n=r("<div>");return f(this._decorators,function(){var s=r("<div>").addClass(i);this[t](d({$container:s},e)),s.children().length&&n.append(s)}),n.children()},_applyDecorators:function(t,e){f(this._decorators,function(){this[t](e)})},_handlerExists:function(t){if(!this._decorators)return!1;for(var e=this._decorators,i=e.length,n=0;n<i;n++)if(e[n][t]!==_)return!0;return!1},_eventHandler:function(t,e,i){if(!this._decorators)return!1;for(var n=!1,s=this._decorators,o=s.length,a=0;a<o&&(n=s[a][t](e,i),!n);a++);return n},handleClick:function(t,e){return this._eventHandler("handleClick",t,e)},handleKeyboardEvents:function(t,e){return this._eventHandler("handleKeyboardEvents",t,e)},handleEnterPressing:function(t){return this._eventHandler("handleEnterPressing",t)},contextMenuHandlerExists:function(){return this._handlerExists("handleContextMenu")},handleContextMenu:function(t,e){return this._eventHandler("handleContextMenu",t,e)},getExcludedItemSelectors:function(){var t=[];return this._applyDecorators(Qs,t),t.join(",")}}),fe="dxswipestart",ve="dxswipe",zt="dxswipeend",to={defaultItemSizeFunc:function(){return L(this.getElement())},getBounds:function(){return[this._maxLeftOffset,this._maxRightOffset]},calcOffsetRatio:function(t){var e=U(t);return(e.x-(this._savedEventData&&this._savedEventData.x||0))/this._itemSizeFunc().call(this,t)},isFastSwipe:function(t){var e=U(t);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.x-this._tickData.x)>=e.time-this._tickData.time}},eo={defaultItemSizeFunc:function(){return C(this.getElement())},getBounds:function(){return[this._maxTopOffset,this._maxBottomOffset]},calcOffsetRatio:function(t){var e=U(t);return(e.y-(this._savedEventData&&this._savedEventData.y||0))/this._itemSizeFunc().call(this,t)},isFastSwipe:function(t){var e=U(t);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.y-this._tickData.y)>=e.time-this._tickData.time}},io={horizontal:to,vertical:eo},no=mn.inherit({TICK_INTERVAL:300,FAST_SWIPE_SPEED_LIMIT:10,ctor:function(t){this.callBase(t),this.direction="horizontal",this.elastic=!0},_getStrategy:function(){return io[this.direction]},_defaultItemSizeFunc:function(){return this._getStrategy().defaultItemSizeFunc.call(this)},_itemSizeFunc:function(){return this.itemSizeFunc||this._defaultItemSizeFunc},_init:function(t){this._tickData=U(t)},_start:function(t){this._savedEventData=U(t),t=this._fireEvent(fe,t),t.cancel||(this._maxLeftOffset=t.maxLeftOffset,this._maxRightOffset=t.maxRightOffset,this._maxTopOffset=t.maxTopOffset,this._maxBottomOffset=t.maxBottomOffset)},_move:function(t){var e=this._getStrategy(),i=U(t),n=e.calcOffsetRatio.call(this,t);n=this._fitOffset(n,this.elastic),i.time-this._tickData.time>this.TICK_INTERVAL&&(this._tickData=i),this._fireEvent(ve,t,{offset:n}),t.preventDefault()},_end:function(t){var e=this._getStrategy(),i=e.calcOffsetRatio.call(this,t),n=e.isFastSwipe.call(this,t),s=i,o=this._calcTargetOffset(i,n);s=this._fitOffset(s,this.elastic),o=this._fitOffset(o,!1),this._fireEvent(zt,t,{offset:s,targetOffset:o})},_fitOffset:function(t,e){var i=this._getStrategy(),n=i.getBounds.call(this);return t<-n[0]?e?(-2*n[0]+t)/3:-n[0]:t>n[1]?e?(2*n[1]+t)/3:n[1]:t},_calcTargetOffset:function(t,e){var i;return e?(i=Math.ceil(Math.abs(t)),t<0&&(i=-i)):i=Math.round(t),i}});gn({emitter:no,events:[fe,ve,zt]});var Ye="dx-list-item-badge-container",so="dx-list-item-badge",oo="dx-badge",qt="dx-list-item-chevron-container",ao="dx-list-item-chevron",ro=Sn.inherit({_renderWatchers:function(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this)),this._startWatcher("showChevron",this._renderShowChevron.bind(this))},_renderBadge:function(t){if(this._$element.children("."+Ye).remove(),!!t){var e=r("<div>").addClass(Ye).append(r("<div>").addClass(so).addClass(oo).text(t)),i=this._$element.children("."+qt).first();i.length>0?e.insertBefore(i):e.appendTo(this._$element)}},_renderShowChevron:function(t){if(this._$element.children("."+qt).remove(),!!t){var e=r("<div>").addClass(qt),i=r("<div>").addClass(ao);e.append(i).appendTo(this._$element)}}}),de="dxScrollbar",$i="dx-scrollable-scrollbar",qe="".concat($i,"-active"),lo="dx-scrollable-scroll",ho="dx-scrollable-scroll-content",co="dx-scrollbar-hoverable",Xe="horizontal",uo=15,z={onScroll:"onScroll",onHover:"onHover",always:"always",never:"never"},rt=null,Pi=Ii.inherit({_getDefaultOptions:function(){return d(this.callBase(),{direction:null,visible:!1,activeStateEnabled:!1,visibilityMode:z.onScroll,containerSize:0,contentSize:0,expandable:!0,scaleRatio:1})},_init:function(){this.callBase(),this._isHovered=!1},_initMarkup:function(){this._renderThumb(),this.callBase()},_render:function(){this.callBase(),this._renderDirection(),this._update(),this._attachPointerDownHandler(),this.option("hoverStateEnabled",this._isHoverMode()),this.$element().toggleClass(co,this.option("hoverStateEnabled"))},_renderThumb:function(){this._$thumb=r("<div>").addClass(lo),r("<div>").addClass(ho).appendTo(this._$thumb),this.$element().addClass($i).append(this._$thumb)},isThumb:function(t){return!!this.$element().find(t).length},_isHoverMode:function(){var t=this.option("visibilityMode");return(t===z.onHover||t===z.always)&&this.option("expandable")},_renderDirection:function(){var t=this.option("direction");this.$element().addClass("dx-scrollbar-"+t),this._dimension=t===Xe?"width":"height",this._prop=t===Xe?"left":"top"},_attachPointerDownHandler:function(){c.on(this._$thumb,p(Oi.down,de),this.feedbackOn.bind(this))},feedbackOn:function(){this.$element().addClass(qe),rt=this},feedbackOff:function(){this.$element().removeClass(qe),rt=null},cursorEnter:function(){this._isHovered=!0,this._needScrollbar()&&this.option("visible",!0)},cursorLeave:function(){this._isHovered=!1,this.option("visible",!1)},_renderDimensions:function(){this._$thumb.css({width:this.option("width"),height:this.option("height")})},_toggleVisibility:function(t){this.option("visibilityMode")===z.onScroll&&this._$thumb.css("opacity"),t=this._adjustVisibility(t),this.option().visible=t,this._$thumb.toggleClass("dx-state-invisible",!t)},_adjustVisibility:function(t){if(this._baseContainerToContentRatio&&!this._needScrollbar())return!1;switch(this.option("visibilityMode")){case z.onScroll:break;case z.onHover:t=t||!!this._isHovered;break;case z.never:t=!1;break;case z.always:t=!0}return t},moveTo:function(t){if(!this._isHidden()){Q(t)&&(t=t[this._prop]||0);var e={};e[this._prop]=this._calculateScrollBarPosition(t),$(this._$thumb,e)}},_calculateScrollBarPosition:function(t){return-t*this._thumbRatio},_update:function(){var t=Math.round(this.option("containerSize")),e=Math.round(this.option("contentSize")),i=Math.round(this.option("baseContainerSize")),n=Math.round(this.option("baseContentSize"));isNaN(i)&&(i=t,n=e),this._baseContainerToContentRatio=n?i/n:i,this._realContainerToContentRatio=e?t/e:t;var s=Math.round(Math.max(Math.round(t*this._realContainerToContentRatio),uo));this._thumbRatio=(t-s)/(this.option("scaleRatio")*(e-t)),this.option(this._dimension,s/this.option("scaleRatio")),this.$element().css("display",this._needScrollbar()?"":"none")},_isHidden:function(){return this.option("visibilityMode")===z.never},_needScrollbar:function(){return!this._isHidden()&&this._baseContainerToContentRatio<1},containerToContentRatio:function(){return this._realContainerToContentRatio},_normalizeSize:function(t){return Q(t)?t[this._dimension]||0:t},_clean:function(){this.callBase(),this===rt&&(rt=null),c.off(this._$thumb,"."+de)},_optionChanged:function(t){if(!this._isHidden())switch(t.name){case"containerSize":case"contentSize":this.option()[t.name]=this._normalizeSize(t.value),this._update();break;case"baseContentSize":case"baseContainerSize":this._update();break;case"visibilityMode":case"direction":this._invalidate();break;case"scaleRatio":this._update();break;default:this.callBase.apply(this,arguments)}},update:yt(function(){this._adjustVisibility()&&this.option("visible",!0)})});Cn.add(function(){c.subscribeGlobal(vt.getDocument(),p(Oi.up,de),function(){rt&&rt.feedbackOff()})});var je="dxNativeScrollable",Xt="dx-scrollable-native",_o="dx-scrollable-scrollbar-simulated",po="dx-scrollable-scrollbars-hidden",dt="vertical",Lt="horizontal",fo=500,me=tt.inherit({ctor:function(t){this._init(t)},_init:function(t){this._component=t,this._$element=t.$element(),this._$container=r(t.container()),this._$content=t.$content(),this._direction=t.option("direction"),this._useSimulatedScrollbar=t.option("useSimulatedScrollbar"),this.option=t.option.bind(t),this._createActionByOption=t._createActionByOption.bind(t),this._isLocked=t._isLocked.bind(t),this._isDirection=t._isDirection.bind(t),this._allowedDirection=t._allowedDirection.bind(t),this._getMaxOffset=t._getMaxOffset.bind(t),this._isRtlNativeStrategy=t._isRtlNativeStrategy.bind(t)},render:function(){var t=S.real(),e=t.platform;this._$element.addClass(Xt).addClass(Xt+"-"+e).toggleClass(po,!this._isScrollbarVisible()),this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._renderScrollbars()},updateRtlPosition:function(t){t&&this.option("rtlEnabled")&&this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._moveScrollbars()},_renderScrollbars:function(){this._scrollbars={},this._hideScrollbarTimeout=0,this._$element.addClass(_o),this._renderScrollbar(dt),this._renderScrollbar(Lt)},_renderScrollbar:function(t){!this._isDirection(t)||(this._scrollbars[t]=new Pi(r("<div>").appendTo(this._$element),{direction:t,expandable:this._component.option("scrollByThumb")}))},handleInit:_,handleStart:_,handleMove:function(t){if(this._isLocked()){t.cancel=!0;return}this._allowedDirection()&&(t.originalEvent.isScrollingEvent=!0)},handleEnd:_,handleCancel:_,handleStop:_,_eachScrollbar:function(t){t=t.bind(this),f(this._scrollbars||{},function(e,i){t(i,e)})},createActions:function(){this._scrollAction=this._createActionByOption("onScroll"),this._updateAction=this._createActionByOption("onUpdated")},_createActionArgs:function(){var{left:t,top:e}=this.location();return{event:this._eventForUserAction,scrollOffset:this._getScrollOffset(),reachedLeft:this._isRtlNativeStrategy()?this._isReachedRight(-t):this._isReachedLeft(t),reachedRight:this._isRtlNativeStrategy()?this._isReachedLeft(-Math.abs(t)):this._isReachedRight(t),reachedTop:this._isDirection(dt)?Math.round(e)>=0:void 0,reachedBottom:this._isDirection(dt)?Math.round(Math.abs(e)-this._getMaxOffset().top)>=0:void 0}},_getScrollOffset:function(){var{top:t,left:e}=this.location();return{top:-t,left:this._normalizeOffsetLeft(-e)}},_normalizeOffsetLeft(t){return this._isRtlNativeStrategy()?this._getMaxOffset().left+t:t},_isReachedLeft:function(t){return this._isDirection(Lt)?Math.round(t)>=0:void 0},_isReachedRight:function(t){return this._isDirection(Lt)?Math.round(Math.abs(t)-this._getMaxOffset().left)>=0:void 0},_isScrollbarVisible:function(){var{showScrollbar:t}=this.option();return t!=="never"&&t!==!1},handleScroll:function(t){this._eventForUserAction=t,this._moveScrollbars(),this._scrollAction(this._createActionArgs())},_moveScrollbars:function(){var{top:t,left:e}=this._getScrollOffset();this._eachScrollbar(function(i){i.moveTo({top:-t,left:-e}),i.option("visible",!0)}),this._hideScrollbars()},_hideScrollbars:function(){clearTimeout(this._hideScrollbarTimeout),this._hideScrollbarTimeout=setTimeout(function(){this._eachScrollbar(function(t){t.option("visible",!1)})}.bind(this),fo)},location:function(){return{left:-this._$container.scrollLeft(),top:-this._$container.scrollTop()}},disabledChanged:_,update:function(){this._update(),this._updateAction(this._createActionArgs())},_update:function(){this._updateDimensions(),this._updateScrollbars()},_updateDimensions:function(){this._containerSize={height:C(this._$container),width:L(this._$container)},this._componentContentSize={height:C(this._component.$content()),width:L(this._component.$content())},this._contentSize={height:C(this._$content),width:L(this._$content)}},_updateScrollbars:function(){this._eachScrollbar(function(t,e){var i=e===dt?"height":"width";t.option({containerSize:this._containerSize[i],contentSize:this._componentContentSize[i]}),t.update()})},_allowedDirections:function(){return{vertical:this._isDirection(dt)&&this._contentSize.height>this._containerSize.height,horizontal:this._isDirection(Lt)&&this._contentSize.width>this._containerSize.width}},dispose:function(){var t=this._$element.get(0).className,e=new RegExp(Xt+"\\S*","g");e.test(t)&&this._$element.removeClass(t.match(e).join(" ")),c.off(this._$element,"."+je),c.off(this._$container,"."+je),this._removeScrollbars(),clearTimeout(this._hideScrollbarTimeout)},_removeScrollbars:function(){this._eachScrollbar(function(t){t.$element().remove()})},scrollBy:function(t){var e=this.location();this._$container.scrollTop(Math.round(-e.top-t.top)),this._$container.scrollLeft(Math.round(-e.left-t.left))},validate:function(t){return this.option("disabled")||j(t)&&this._isScrolledInMaxDirection(t)?!1:!!this._allowedDirection()},_isScrolledInMaxDirection(t){var e=this._$container.get(0),i;return t.delta>0?i=t.shiftKey?!e.scrollLeft:!e.scrollTop:t.shiftKey?i=e.scrollLeft>=this._getMaxOffset().left:i=e.scrollTop>=this._getMaxOffset().top,i},getDirection:function(){return this._allowedDirection()}}),Ze="dx-scrollview-pull-down-loading",jt="dx-scrollview-pull-down-ready",vo="dx-scrollview-pull-down-image",mo="dx-scrollview-pull-down-indicator",go="dx-scrollview-pull-down-text",So="dx-scrollview-pull-down-text-visible",It=0,ut=1,Dt=2,Zt=3,Co=400,Eo=me.inherit({_init:function(t){this.callBase(t),this._$topPocket=t._$topPocket,this._$pullDown=t._$pullDown,this._$refreshingText=t._$refreshingText,this._$scrollViewContent=r(t.content()),this._$container=r(t.container()),this._initCallbacks()},_initCallbacks:function(){this.pullDownCallbacks=y(),this.releaseCallbacks=y(),this.reachBottomCallbacks=y()},render:function(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown:function(){var t=r("<div>").addClass(vo),e=r("<div>").addClass(mo),i=new St(r("<div>")).$element(),n=this._$pullDownText=r("<div>").addClass(go);this._$pullingDownText=r("<div>").text(this.option("pullingDownText")).appendTo(n),this._$pulledDownText=r("<div>").text(this.option("pulledDownText")).appendTo(n),this._$refreshingText=r("<div>").text(this.option("refreshingText")).appendTo(n),this._$pullDown.empty().append(t).append(e.append(i)).append(n)},_releaseState:function(){this._state=It,this._refreshPullDownText()},_refreshPullDownText:function(){var t=this,e=[{element:this._$pullingDownText,visibleState:It},{element:this._$pulledDownText,visibleState:ut},{element:this._$refreshingText,visibleState:Dt}];f(e,function(i,n){var s=t._state===n.visibleState?"addClass":"removeClass";n.element[s](So)})},update:function(){this.callBase(),this._setTopPocketOffset()},_updateDimensions:function(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;var t=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(t.clientHeight-e.clientHeight,0)},_allowedDirections:function(){var t=this.callBase();return t.vertical=t.vertical||this._pullDownEnabled,t},_setTopPocketOffset:function(){this._$topPocket.css({top:-this._topPocketSize})},handleEnd:function(){this.callBase(),this._complete()},handleStop:function(){this.callBase(),this._complete()},_complete:function(){this._state===ut&&(this._setPullDownOffset(this._topPocketSize),clearTimeout(this._pullDownRefreshTimeout),this._pullDownRefreshTimeout=setTimeout(function(){this._pullDownRefreshing()}.bind(this),400))},_setPullDownOffset:function(t){$(this._$topPocket,{top:t}),$(this._$scrollViewContent,{top:t})},handleScroll:function(t){if(this.callBase(t),this._state!==Dt){var e=this.location().top,i=(this._location||0)-e;this._location=e,this._isPullDown()?this._pullDownReady():i>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}},_isPullDown:function(){return this._pullDownEnabled&&this._location>=this._topPocketSize},_isReachBottom:function(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom:function(){this._state!==Zt&&(this._state=Zt,this.reachBottomCallbacks.fire())},_pullDownReady:function(){this._state!==ut&&(this._state=ut,this._$pullDown.addClass(jt),this._refreshPullDownText())},_stateReleased:function(){this._state!==It&&(this._$pullDown.removeClass(Ze).removeClass(jt),this._releaseState())},_pullDownRefreshing:function(){this._state!==Dt&&(this._state=Dt,this._$pullDown.addClass(Ze).removeClass(jt),this._refreshPullDownText(),this.pullDownCallbacks.fire())},pullDownEnable:function(t){t&&(this._updateDimensions(),this._setTopPocketOffset()),this._pullDownEnabled=t},reachBottomEnable:function(t){this._reachBottomEnabled=t},pendingRelease:function(){this._state=ut},release:function(){var t=new T;return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._state===Zt&&(this._state=It),this._releaseTimeout=setTimeout(function(){this._setPullDownOffset(0),this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),t.resolve()}.bind(this),Co),t.promise()},dispose:function(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}}),Qe="dx-scrollview-pull-down-loading",bo="dx-scrollview-pull-down-indicator",To="dx-scrollview-pull-down-refreshing",Ao="dx-icon-pulldown",Qt=0,Lo=1,Je=2,Jt=4,Ot=5,Io=me.inherit({_init:function(t){this.callBase(t),this._$topPocket=t._$topPocket,this._$pullDown=t._$pullDown,this._$scrollViewContent=r(t.content()),this._$container=r(t.container()),this._initCallbacks(),this._location=0},_initCallbacks:function(){this.pullDownCallbacks=y(),this.releaseCallbacks=y(),this.reachBottomCallbacks=y()},render:function(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown:function(){var t=r("<div>").addClass(bo),e=new St(r("<div>")).$element();this._$icon=r("<div>").addClass(Ao),this._$pullDown.empty().append(this._$icon).append(t.append(e))},_releaseState:function(){this._state=Qt,this._releasePullDown(),this._updateDimensions()},_releasePullDown:function(){this._$pullDown.css({opacity:0})},_updateDimensions:function(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;var t=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(t.clientHeight-e.clientHeight,0)},_allowedDirections:function(){var t=this.callBase();return t.vertical=t.vertical||this._pullDownEnabled,t},handleInit:function(t){this.callBase(t),this._state===Qt&&this._location===0&&(this._startClientY=U(t.originalEvent).y,this._state=Jt)},handleMove:function(t){this.callBase(t),this._deltaY=U(t.originalEvent).y-this._startClientY,this._state===Jt&&(this._pullDownEnabled&&this._deltaY>0?this._state=Ot:this._complete()),this._state===Ot&&(t.preventDefault(),this._movePullDown())},_movePullDown:function(){var t=this._getPullDownHeight(),e=Math.min(3*t,this._deltaY+this._getPullDownStartPosition()),i=180*e/t/3;this._$pullDown.css({opacity:1}).toggleClass(To,e<t),$(this._$pullDown,{top:e}),this._$icon.css({transform:"rotate("+i+"deg)"})},_isPullDown:function(){return this._pullDownEnabled&&this._state===Ot&&this._deltaY>=this._getPullDownHeight()-this._getPullDownStartPosition()},_getPullDownHeight:function(){return Math.round(.05*A(this._$element))},_getPullDownStartPosition:function(){return-Math.round(1.5*A(this._$pullDown))},handleEnd:function(){this._isPullDown()&&this._pullDownRefreshing(),this._complete()},handleStop:function(){this._complete()},_complete:function(){(this._state===Jt||this._state===Ot)&&this._releaseState()},handleScroll:function(t){if(this.callBase(t),this._state!==Je){var e=this.location().top,i=this._location-e;this._location=e,i>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}},_isReachBottom:function(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom:function(){this.reachBottomCallbacks.fire()},_stateReleased:function(){this._state!==Qt&&(this._$pullDown.removeClass(Qe),this._releaseState())},_pullDownRefreshing:function(){this._state=Je,this._pullDownRefreshHandler()},_pullDownRefreshHandler:function(){this._refreshPullDown(),this.pullDownCallbacks.fire()},_refreshPullDown:function(){this._$pullDown.addClass(Qe),$(this._$pullDown,{top:this._getPullDownHeight()})},pullDownEnable:function(t){this._$topPocket.toggle(t),this._pullDownEnabled=t},reachBottomEnable:function(t){this._reachBottomEnabled=t},pendingRelease:function(){this._state=Lo},release:function(){var t=new T;return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._releaseTimeout=setTimeout(function(){this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),t.resolve()}.bind(this),800),t.promise()},dispose:function(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}}),Do=tt.abstract,Oo=tt.inherit({ctor:function(){this._finished=!0,this._stopped=!1,this._proxiedStepCore=this._stepCore.bind(this)},start:function(){this._stopped=!1,this._finished=!1,this._stepCore()},stop:function(){this._stopped=!0,En(this._stepAnimationFrame)},_stepCore:function(){if(this._isStopped()){this._stop();return}if(this._isFinished()){this._finished=!0,this._complete();return}this._step(),this._stepAnimationFrame=bn(this._proxiedStepCore)},_step:Do,_isFinished:_,_stop:_,_complete:_,_isStopped:function(){return this._stopped},inProgress:function(){return!(this._stopped||this._finished)}}),Hi="dxSimulatedScrollable",Bo="dxScrollableStrategy",Bt=Hi+"Cursor",te=Hi+"Keyboard",ee="dx-scrollable-simulated",wo="dx-scrollable-scrollbars-alwaysvisible",xo="dx-scrollable-scrollbar",k="vertical",b="horizontal",kt=.92,ki=.5,Mi=1,yo=Math.round(1e3/60),Ro=40,$o=500,Po=Mi/5,Ho=400,ko=Ho/yo,Mo=(1-Math.pow(kt,ko))/(1-kt),W={PAGE_UP:"pageUp",PAGE_DOWN:"pageDown",END:"end",HOME:"home",LEFT:"leftArrow",UP:"upArrow",RIGHT:"rightArrow",DOWN:"downArrow",TAB:"tab"},Ni=Oo.inherit({ctor:function(t){this.callBase(),this.scroller=t},VELOCITY_LIMIT:Mi,_isFinished:function(){return Math.abs(this.scroller._velocity)<=this.VELOCITY_LIMIT},_step:function(){this.scroller._scrollStep(this.scroller._velocity),this.scroller._velocity*=this._acceleration()},_acceleration:function(){return this.scroller._inBounds()?kt:ki},_complete:function(){this.scroller._scrollComplete()}}),No=Ni.inherit({VELOCITY_LIMIT:Po,_isFinished:function(){return this.scroller._crossBoundOnNextStep()||this.callBase()},_acceleration:function(){return kt},_complete:function(){this.scroller._move(this.scroller._bounceLocation),this.callBase()}}),Vi=tt.inherit({ctor:function(t){this._initOptions(t),this._initAnimators(),this._initScrollbar()},_initOptions:function(t){this._location=0,this._topReached=!1,this._bottomReached=!1,this._axis=t.direction===b?"x":"y",this._prop=t.direction===b?"left":"top",this._dimension=t.direction===b?"width":"height",this._scrollProp=t.direction===b?"scrollLeft":"scrollTop",f(t,(e,i)=>{this["_"+e]=i})},_initAnimators:function(){this._inertiaAnimator=new Ni(this),this._bounceAnimator=new No(this)},_initScrollbar:function(){this._scrollbar=new Pi(r("<div>").appendTo(this._$container),{direction:this._direction,visible:this._scrollByThumb,visibilityMode:this._visibilityModeNormalize(this._scrollbarVisible),expandable:this._scrollByThumb}),this._$scrollbar=this._scrollbar.$element()},_visibilityModeNormalize:function(t){return t===!0?"onScroll":t===!1?"never":t},_scrollStep:function(t){var e=this._location;this._location+=t,this._suppressBounce(),this._move(),!(Math.abs(e-this._location)<1)&&c.triggerHandler(this._$container,{type:"scroll"})},_suppressBounce:function(){this._bounceEnabled||this._inBounds(this._location)||(this._velocity=0,this._location=this._boundLocation())},_boundLocation:function(t){return t=t!==void 0?t:this._location,Math.max(Math.min(t,this._maxOffset),this._minOffset)},_move:function(t){this._location=t!==void 0?t*this._getScaleRatio():this._location,this._moveContent(),this._moveScrollbar()},_moveContent:function(){var t=this._location;this._$container[this._scrollProp](-t/this._getScaleRatio()),this._moveContentByTranslator(t)},_getScaleRatio:function(){if(D()&&!this._scaleRatio){var t=this._$element.get(0),e=this._getRealDimension(t,this._dimension),i=this._getBaseDimension(t,this._dimension);this._scaleRatio=Math.round(e/i*100)/100}return this._scaleRatio||1},_getRealDimension:function(t,e){return Math.round(Z(t)[e])},_getBaseDimension:function(t,e){var i="offset"+ft(e);return t[i]},_moveContentByTranslator:function(t){var e,i=-this._maxScrollPropValue;if(t>0?e=t:t<=i?e=t-i:e=t%1,this._translateOffset!==e){var n={};if(n[this._prop]=e,this._translateOffset=e,e===0){Tn(this._$content);return}$(this._$content,n)}},_moveScrollbar:function(){this._scrollbar.moveTo(this._location)},_scrollComplete:function(){this._inBounds()&&(this._hideScrollbar(),this._completeDeferred&&this._completeDeferred.resolve()),this._scrollToBounds()},_scrollToBounds:function(){this._inBounds()||(this._bounceAction(),this._setupBounce(),this._bounceAnimator.start())},_setupBounce:function(){var t=this._bounceLocation=this._boundLocation(),e=t-this._location;this._velocity=e/Mo},_inBounds:function(t){return t=t!==void 0?t:this._location,this._boundLocation(t)===t},_crossBoundOnNextStep:function(){var t=this._location,e=t+this._velocity;return t<this._minOffset&&e>=this._minOffset||t>this._maxOffset&&e<=this._maxOffset},_initHandler:function(t){this._stopScrolling(),this._prepareThumbScrolling(t)},_stopScrolling:yt(function(){this._hideScrollbar(),this._inertiaAnimator.stop(),this._bounceAnimator.stop()}),_prepareThumbScrolling:function(t){if(!j(t.originalEvent)){var e=r(t.originalEvent.target),i=this._isScrollbar(e);i&&this._moveToMouseLocation(t),this._thumbScrolling=i||this._isThumb(e),this._crossThumbScrolling=!this._thumbScrolling&&this._isAnyThumbScrolling(e),this._thumbScrolling&&this._scrollbar.feedbackOn()}},_isThumbScrollingHandler:function(t){return this._isThumb(t)},_moveToMouseLocation:function(t){var e=t["page"+this._axis.toUpperCase()]-this._$element.offset()[this._prop],i=this._location+e/this._containerToContentRatio()-C(this._$container)/2;this._scrollStep(-Math.round(i))},_startHandler:function(){this._showScrollbar()},_moveHandler:function(t){this._crossThumbScrolling||(this._thumbScrolling&&(t[this._axis]=-Math.round(t[this._axis]/this._containerToContentRatio())),this._scrollBy(t))},_scrollBy:function(t){t=t[this._axis],this._inBounds()||(t*=ki),this._scrollStep(t)},_scrollByHandler:function(t){this._scrollBy(t),this._scrollComplete()},_containerToContentRatio:function(){return this._scrollbar.containerToContentRatio()},_endHandler:function(t){return this._completeDeferred=new T,this._velocity=t[this._axis],this._inertiaHandler(),this._resetThumbScrolling(),this._completeDeferred.promise()},_inertiaHandler:function(){this._suppressInertia(),this._inertiaAnimator.start()},_suppressInertia:function(){(!this._inertiaEnabled||this._thumbScrolling)&&(this._velocity=0)},_resetThumbScrolling:function(){this._thumbScrolling=!1,this._crossThumbScrolling=!1},_stopHandler:function(){this._thumbScrolling&&this._scrollComplete(),this._resetThumbScrolling(),this._scrollToBounds()},_disposeHandler:function(){this._stopScrolling(),this._$scrollbar.remove()},_updateHandler:function(){this._update(),this._moveToBounds()},_update:function(){return this._stopScrolling(),he(()=>{this._resetScaleRatio(),this._updateLocation(),this._updateBounds(),this._updateScrollbar(),Pt(()=>{this._moveScrollbar(),this._scrollbar.update()})})},_resetScaleRatio:function(){this._scaleRatio=null},_updateLocation:function(){this._location=(mt(this._$content)[this._prop]-this._$container[this._scrollProp]())*this._getScaleRatio()},_updateBounds:function(){this._maxOffset=this._getMaxOffset(),this._minOffset=this._getMinOffset()},_getMaxOffset:function(){return 0},_getMinOffset:function(){return this._maxScrollPropValue=Math.max(this._contentSize()-this._containerSize(),0),-this._maxScrollPropValue},_updateScrollbar:we(function(){var t=this._containerSize(),e=this._contentSize(),i=this._getBaseDimension(this._$container.get(0),this._dimension),n=this._getBaseDimension(this._$content.get(0),this._dimension);Pt(()=>{this._scrollbar.option({containerSize:t,contentSize:e,baseContainerSize:i,baseContentSize:n,scaleRatio:this._getScaleRatio()})})}),_moveToBounds:yt(we(yt(function(){var t=this._boundLocation(),e=t!==this._location;this._location=t,this._move(),e&&this._scrollAction()}))),_createActionsHandler:function(t){this._scrollAction=t.scroll,this._bounceAction=t.bounce},_showScrollbar:function(){this._scrollbar.option("visible",!0)},_hideScrollbar:function(){this._scrollbar.option("visible",!1)},_containerSize:function(){return this._getRealDimension(this._$container.get(0),this._dimension)},_contentSize:function(){var t=this._$content.css("overflow"+this._axis.toUpperCase())==="hidden",e=this._getRealDimension(this._$content.get(0),this._dimension);if(!t){var i=this._$content[0]["scroll"+ft(this._dimension)]*this._getScaleRatio();e=Math.max(i,e)}return e},_validateEvent:function(t){var e=r(t.originalEvent.target);return this._isThumb(e)||this._isScrollbar(e)},_isThumb:function(t){return this._scrollByThumb&&this._scrollbar.isThumb(t)},_isScrollbar:function(t){return this._scrollByThumb&&t&&t.is(this._$scrollbar)},_reachedMin:function(){return Math.round(this._location-this._minOffset)<=0},_reachedMax:function(){return Math.round(this._location-this._maxOffset)>=0},_cursorEnterHandler:function(){this._resetScaleRatio(),this._updateScrollbar(),this._scrollbar.cursorEnter()},_cursorLeaveHandler:function(){this._scrollbar.cursorLeave()},dispose:_}),R,st,zi=tt.inherit({ctor:function(t){this._init(t)},_init:function(t){this._component=t,this._$element=t.$element(),this._$container=r(t.container()),this._$wrapper=t._$wrapper,this._$content=t.$content(),this.option=t.option.bind(t),this._createActionByOption=t._createActionByOption.bind(t),this._isLocked=t._isLocked.bind(t),this._isDirection=t._isDirection.bind(t),this._allowedDirection=t._allowedDirection.bind(t),this._getMaxOffset=t._getMaxOffset.bind(t)},render:function(){this._$element.addClass(ee),this._createScrollers(),this.option("useKeyboard")&&this._$container.prop("tabIndex",0),this._attachKeyboardHandler(),this._attachCursorHandlers()},_createScrollers:function(){this._scrollers={},this._isDirection(b)&&this._createScroller(b),this._isDirection(k)&&this._createScroller(k),this._$element.toggleClass(wo,this.option("showScrollbar")==="always")},_createScroller:function(t){this._scrollers[t]=new Vi(this._scrollerOptions(t))},_scrollerOptions:function(t){return{direction:t,$content:this._$content,$container:this._$container,$wrapper:this._$wrapper,$element:this._$element,scrollByThumb:this.option("scrollByThumb"),scrollbarVisible:this.option("showScrollbar"),bounceEnabled:this.option("bounceEnabled"),inertiaEnabled:this.option("inertiaEnabled"),isAnyThumbScrolling:this._isAnyThumbScrolling.bind(this)}},_applyScaleRatio:function(t){for(var e in this._scrollers){var i=this._getPropByDirection(e);if(w(t[i])){var n=this._scrollers[e];t[i]*=n._getScaleRatio()}}return t},_isAnyThumbScrolling:function(t){var e=!1;return this._eventHandler("isThumbScrolling",t).done(function(i,n){e=i||n}),e},handleInit:function(t){this._suppressDirections(t),this._eventForUserAction=t,this._eventHandler("init",t)},_suppressDirections:function(t){if(j(t.originalEvent)){this._prepareDirections(!0);return}this._prepareDirections(),this._eachScroller(function(e,i){var n=r(t.originalEvent.target),s=e._validateEvent(t)||this.option("scrollByContent")&&this._isContent(n);this._validDirections[i]=s})},_isContent:function(t){return!!t.closest(this._$element).length},_prepareDirections:function(t){t=t||!1,this._validDirections={},this._validDirections[b]=t,this._validDirections[k]=t},_eachScroller:function(t){t=t.bind(this),f(this._scrollers,function(e,i){t(i,e)})},handleStart:function(t){this._eventForUserAction=t,this._eventHandler("start").done(this._startAction)},_saveActive:function(){st=this},_resetActive:function(){st===this&&(st=null)},handleMove:function(t){if(this._isLocked()){t.cancel=!0,this._resetActive();return}this._saveActive(),t.preventDefault&&t.preventDefault(),this._adjustDistance(t,t.delta),this._eventForUserAction=t,this._eventHandler("move",t.delta)},_adjustDistance:function(t,e){e.x*=this._validDirections[b],e.y*=this._validDirections[k];var i=this._tryGetDevicePixelRatio();i&&j(t.originalEvent)&&(e.x=Math.round(e.x/i*100)/100,e.y=Math.round(e.y/i*100)/100)},_tryGetDevicePixelRatio:function(){if(D())return J().devicePixelRatio},handleEnd:function(t){return this._resetActive(),this._refreshCursorState(t.originalEvent&&t.originalEvent.target),this._adjustDistance(t,t.velocity),this._eventForUserAction=t,this._eventHandler("end",t.velocity).done(this._endAction)},handleCancel:function(t){return this._resetActive(),this._eventForUserAction=t,this._eventHandler("end",{x:0,y:0})},handleStop:function(){this._resetActive(),this._eventHandler("stop")},handleScroll:function(){this._updateRtlConfig(),this._scrollAction()},_attachKeyboardHandler:function(){c.off(this._$element,".".concat(te)),!this.option("disabled")&&this.option("useKeyboard")&&c.on(this._$element,p("keydown",te),this._keyDownHandler.bind(this))},_keyDownHandler:function(t){if(clearTimeout(this._updateHandlerTimeout),this._updateHandlerTimeout=setTimeout(()=>{ce(t)===W.TAB&&this._eachScroller(i=>{i._updateHandler()})}),!!this._$container.is(vt.getActiveElement(this._$container.get(0)))){var e=!0;switch(ce(t)){case W.DOWN:this._scrollByLine({y:1});break;case W.UP:this._scrollByLine({y:-1});break;case W.RIGHT:this._scrollByLine({x:1});break;case W.LEFT:this._scrollByLine({x:-1});break;case W.PAGE_DOWN:this._scrollByPage(1);break;case W.PAGE_UP:this._scrollByPage(-1);break;case W.HOME:this._scrollToHome();break;case W.END:this._scrollToEnd();break;default:e=!1}e&&(t.stopPropagation(),t.preventDefault())}},_scrollByLine:function(t){var e=this._tryGetDevicePixelRatio(),i=Ro;e&&(i=Math.abs(i/e*100)/100),this.scrollBy({top:(t.y||0)*-i,left:(t.x||0)*-i})},_scrollByPage:function(t){var e=this._wheelProp(),i=this._dimensionByProp(e),n={},s=i==="width"?L:C;n[e]=t*-s(this._$container),this.scrollBy(n)},_dimensionByProp:function(t){return t==="left"?"width":"height"},_getPropByDirection:function(t){return t===b?"left":"top"},_scrollToHome:function(){var t=this._wheelProp(),e={};e[t]=0,this._component.scrollTo(e)},_scrollToEnd:function(){var t=this._wheelProp(),e=this._dimensionByProp(t),i={},n=e==="width"?L:C;i[t]=n(this._$content)-n(this._$container),this._component.scrollTo(i)},createActions:function(){this._startAction=this._createActionHandler("onStart"),this._endAction=this._createActionHandler("onEnd"),this._updateAction=this._createActionHandler("onUpdated"),this._createScrollerActions()},_createScrollerActions:function(){this._scrollAction=this._createActionHandler("onScroll"),this._bounceAction=this._createActionHandler("onBounce"),this._eventHandler("createActions",{scroll:this._scrollAction,bounce:this._bounceAction})},_createActionHandler:function(t){var e=this._createActionByOption(t);return()=>{e(d(this._createActionArgs(),arguments))}},_createActionArgs:function(){var{horizontal:t,vertical:e}=this._scrollers,i=this._getScrollOffset();return this._scrollOffset={top:e&&i.top,left:t&&i.left},{event:this._eventForUserAction,scrollOffset:this._scrollOffset,reachedLeft:t&&t._reachedMax(),reachedRight:t&&t._reachedMin(),reachedTop:e&&e._reachedMax(),reachedBottom:e&&e._reachedMin()}},_getScrollOffset(){return{top:-this.location().top,left:-this.location().left}},_eventHandler:function(t){var e=[].slice.call(arguments).slice(1),i=An(this._scrollers,n=>n["_"+t+"Handler"].apply(n,e));return ht.apply(r,i).promise()},location:function(){var t=mt(this._$content);return t.top-=this._$container.scrollTop(),t.left-=this._$container.scrollLeft(),t},disabledChanged:function(){this._attachCursorHandlers()},_attachCursorHandlers:function(){c.off(this._$element,".".concat(Bt)),!this.option("disabled")&&this._isHoverMode()&&(c.on(this._$element,p("mouseenter",Bt),this._cursorEnterHandler.bind(this)),c.on(this._$element,p("mouseleave",Bt),this._cursorLeaveHandler.bind(this)))},_isHoverMode:function(){return this.option("showScrollbar")==="onHover"},_cursorEnterHandler:function(t){t=t||{},t.originalEvent=t.originalEvent||{},!(st||t.originalEvent._hoverHandled)&&(R&&R._cursorLeaveHandler(),R=this,this._eventHandler("cursorEnter"),t.originalEvent._hoverHandled=!0)},_cursorLeaveHandler:function(t){R!==this||st===R||(this._eventHandler("cursorLeave"),R=null,this._refreshCursorState(t&&t.relatedTarget))},_refreshCursorState:function(t){if(!(!this._isHoverMode()&&(!t||st))){var e=r(t),i=e.closest(".".concat(ee,":not(.dx-state-disabled)")),n=i.length&&i.data(Bo);R&&R!==n&&R._cursorLeaveHandler(),n&&n._cursorEnterHandler()}},update:function(){var t=this._eventHandler("update").done(this._updateAction);return ht(t,he(()=>{var e=this._allowedDirections();return Pt(()=>{var i=e.vertical?"pan-x":"";i=e.horizontal?"pan-y":i,i=e.vertical&&e.horizontal?"none":i,this._$container.css("touchAction",i)}),ht().promise()}))},_allowedDirections:function(){var t=this.option("bounceEnabled"),e=this._scrollers[k],i=this._scrollers[b];return{vertical:e&&(e._minOffset<0||t),horizontal:i&&(i._minOffset<0||t)}},_updateBounds:function(){this._scrollers[b]&&this._scrollers[b]._updateBounds()},_isHorizontalAndRtlEnabled:function(){return this.option("rtlEnabled")&&this.option("direction")!==k},updateRtlPosition:function(t){t&&(this._rtlConfig={scrollRight:0,clientWidth:this._$container.get(0).clientWidth,windowPixelRatio:this._getWindowDevicePixelRatio()}),this._updateBounds(),this._isHorizontalAndRtlEnabled()&&he(()=>{var e=this._getMaxOffset().left-this._rtlConfig.scrollRight;e<=0&&(e=0,this._rtlConfig.scrollRight=this._getMaxOffset().left),Pt(()=>{this._getScrollOffset().left!==e&&(this._rtlConfig.skipUpdating=!0,this._component.scrollTo({left:e}),this._rtlConfig.skipUpdating=!1)})})},_updateRtlConfig:function(){if(this._isHorizontalAndRtlEnabled()&&!this._rtlConfig.skipUpdating){var{clientWidth:t,scrollLeft:e}=this._$container.get(0),i=this._getWindowDevicePixelRatio();this._rtlConfig.windowPixelRatio===i&&this._rtlConfig.clientWidth===t&&(this._rtlConfig.scrollRight=this._getMaxOffset().left-e),this._rtlConfig.clientWidth=t,this._rtlConfig.windowPixelRatio=i}},_getWindowDevicePixelRatio:function(){return D()?J().devicePixelRatio:1},scrollBy:function(t){var e=this._scrollers[k],i=this._scrollers[b];e&&(t.top=e._boundLocation(t.top+e._location)-e._location),i&&(t.left=i._boundLocation(t.left+i._location)-i._location),this._prepareDirections(!0),this._startAction(),this._eventHandler("scrollBy",{x:t.left,y:t.top}),this._endAction(),this._updateRtlConfig()},validate:function(t){return j(t)&&le(t)||this.option("disabled")?!1:this.option("bounceEnabled")?!0:j(t)?this._validateWheel(t):this._validateMove(t)},_validateWheel:function(t){var e=this._scrollers[this._wheelDirection(t)],i=e._reachedMin(),n=e._reachedMax(),s=!i||!n,o=!i&&!n,a=i&&t.delta>0,l=n&&t.delta<0,h=s&&(o||a||l);return h=h||this._validateWheelTimer!==void 0,h&&(clearTimeout(this._validateWheelTimer),this._validateWheelTimer=setTimeout(()=>{this._validateWheelTimer=void 0},$o)),h},_validateMove:function(t){return!this.option("scrollByContent")&&!r(t.target).closest(".".concat(xo)).length?!1:this._allowedDirection()},getDirection:function(t){return j(t)?this._wheelDirection(t):this._allowedDirection()},_wheelProp:function(){return this._wheelDirection()===b?"left":"top"},_wheelDirection:function(t){switch(this.option("direction")){case b:return b;case k:return k;default:return t&&t.shiftKey?b:k}},dispose:function(){this._resetActive(),R===this&&(R=null),this._eventHandler("dispose"),this._detachEventHandlers(),this._$element.removeClass(ee),this._eventForUserAction=null,clearTimeout(this._validateWheelTimer),clearTimeout(this._updateHandlerTimeout)},_detachEventHandlers:function(){c.off(this._$element,".".concat(Bt)),c.off(this._$container,".".concat(te))}}),Vo=Math,ti="dx-scrollview-pull-down-loading",ie="dx-scrollview-pull-down-ready",zo="dx-scrollview-pull-down-image",Wo="dx-scrollview-pull-down-indicator",Fo="dx-scrollview-pull-down-text",Uo="dx-scrollview-pull-down-text-visible",_t=0,pt=1,ne=2,se=3,Go=Vi.inherit({ctor:function(){this._topPocketSize=0,this._bottomPocketSize=0,this.callBase.apply(this,arguments),this._initCallbacks(),this._releaseState()},_releaseState:function(){this._state=_t,this._refreshPullDownText()},_refreshPullDownText:function(){var t=this,e=[{element:this._$pullingDownText,visibleState:_t},{element:this._$pulledDownText,visibleState:pt},{element:this._$refreshingText,visibleState:ne}];f(e,function(i,n){var s=t._state===n.visibleState?"addClass":"removeClass";n.element[s](Uo)})},_initCallbacks:function(){this.pullDownCallbacks=y(),this.releaseCallbacks=y(),this.reachBottomCallbacks=y()},_updateBounds:function(){var t=this._direction!=="horizontal";if(t){this._topPocketSize=this._$topPocket.get(0).clientHeight,this._bottomPocketSize=this._$bottomPocket.get(0).clientHeight;var e=this._$container.get(0),i=this._$content.get(0);this._bottomBoundary=Math.max(i.clientHeight-this._bottomPocketSize-e.clientHeight,0)}this.callBase()},_updateScrollbar:function(){this._scrollbar.option({containerSize:this._containerSize(),contentSize:this._contentSize()-this._topPocketSize-this._bottomPocketSize,scaleRatio:this._getScaleRatio()})},_moveContent:function(){this.callBase(),this._isPullDown()?this._pullDownReady():this._isReachBottom()?this._reachBottomReady():this._state!==_t&&this._stateReleased()},_moveScrollbar:function(){this._scrollbar.moveTo(this._topPocketSize+this._location)},_isPullDown:function(){return this._pullDownEnabled&&this._location>=0},_isReachBottom:function(){var t=this._$container.get(0);return this._reachBottomEnabled&&Math.round(this._bottomBoundary-Math.ceil(t.scrollTop))<=1},_scrollComplete:function(){this._inBounds()&&this._state===pt?this._pullDownRefreshing():this._inBounds()&&this._state===se?this._reachBottomLoading():this.callBase()},_reachBottomReady:function(){this._state!==se&&(this._state=se,this._minOffset=this._getMinOffset())},_getMaxOffset:function(){return-this._topPocketSize},_getMinOffset:function(){return Vo.min(this.callBase(),-this._topPocketSize)},_reachBottomLoading:function(){this.reachBottomCallbacks.fire()},_pullDownReady:function(){this._state!==pt&&(this._state=pt,this._maxOffset=0,this._$pullDown.addClass(ie),this._refreshPullDownText())},_stateReleased:function(){this._state!==_t&&(this._releaseState(),this._updateBounds(),this._$pullDown.removeClass(ti).removeClass(ie),this.releaseCallbacks.fire())},_pullDownRefreshing:function(){this._state!==ne&&(this._state=ne,this._$pullDown.addClass(ti).removeClass(ie),this._refreshPullDownText(),this.pullDownCallbacks.fire())},_releaseHandler:function(){return this._state===_t&&this._moveToBounds(),this._update(),this._releaseTask&&this._releaseTask.abort(),this._releaseTask=Ln(this._release.bind(this)),this._releaseTask.promise},_release:function(){this._stateReleased(),this._scrollComplete()},_reachBottomEnablingHandler:function(t){this._reachBottomEnabled!==t&&(this._reachBottomEnabled=t,this._updateBounds())},_pullDownEnablingHandler:function(t){this._pullDownEnabled!==t&&(this._pullDownEnabled=t,this._considerTopPocketChange(),this._updateHandler())},_considerTopPocketChange:function(){this._location-=C(this._$topPocket)||-this._topPocketSize,this._maxOffset=0,this._move()},_pendingReleaseHandler:function(){this._state=pt},dispose:function(){this._releaseTask&&this._releaseTask.abort(),this.callBase()}}),Ko=zi.inherit({_init:function(t){this.callBase(t),this._$pullDown=t._$pullDown,this._$topPocket=t._$topPocket,this._$bottomPocket=t._$bottomPocket,this._initCallbacks()},_initCallbacks:function(){this.pullDownCallbacks=y(),this.releaseCallbacks=y(),this.reachBottomCallbacks=y()},render:function(){this._renderPullDown(),this.callBase()},_renderPullDown:function(){var t=r("<div>").addClass(zo),e=r("<div>").addClass(Wo),i=new St(r("<div>")).$element(),n=this._$pullDownText=r("<div>").addClass(Fo);this._$pullingDownText=r("<div>").text(this.option("pullingDownText")).appendTo(n),this._$pulledDownText=r("<div>").text(this.option("pulledDownText")).appendTo(n),this._$refreshingText=r("<div>").text(this.option("refreshingText")).appendTo(n),this._$pullDown.empty().append(t).append(e.append(i)).append(n)},pullDownEnable:function(t){this._eventHandler("pullDownEnabling",t)},reachBottomEnable:function(t){this._eventHandler("reachBottomEnabling",t)},_createScroller:function(t){var e=this,i=e._scrollers[t]=new Go(e._scrollerOptions(t));i.pullDownCallbacks.add(function(){e.pullDownCallbacks.fire()}),i.releaseCallbacks.add(function(){e.releaseCallbacks.fire()}),i.reachBottomCallbacks.add(function(){e.reachBottomCallbacks.fire()})},_scrollerOptions:function(t){return d(this.callBase(t),{$topPocket:this._$topPocket,$bottomPocket:this._$bottomPocket,$pullDown:this._$pullDown,$pullDownText:this._$pullDownText,$pullingDownText:this._$pullingDownText,$pulledDownText:this._$pulledDownText,$refreshingText:this._$refreshingText})},pendingRelease:function(){this._eventHandler("pendingRelease")},release:function(){return this._eventHandler("release").done(this._updateAction)},location:function(){var t=this.callBase();return t.top+=C(this._$topPocket),t},dispose:function(){f(this._scrollers,function(){this.dispose()}),this.callBase()}}),Wi=function(){return[{device:function(){return!Ht},options:{useNative:!1}},{device:function(t){return!S.isSimulator()&&S.real().deviceType==="desktop"&&t.platform==="generic"},options:{bounceEnabled:!1,scrollByThumb:!0,scrollByContent:In,showScrollbar:"onHover"}}]};function Yo(t,e){for(var i={left:0,top:0},n=e;(s=n)!==null&&s!==void 0&&s.offsetParent&&!n.classList.contains(t);){var s,o=n.offsetParent,a=n.getBoundingClientRect(),l=o.getBoundingClientRect();i.left+=a.left-l.left,i.top+=a.top-l.top,n=n.offsetParent}return i}var qo="vertical",cr="horizontal",dr="both";var Xo="dx-scrollable-content";function jo(t,e,i,n,s){var o=ue({top:0,left:0,right:0,bottom:0},s),a=e===qo,l=a?"top":"left",h=a?"bottom":"right",u=a?"height":"width",v=i["offset".concat(ft(u))],m=i["client".concat(ft(u))],g=i.getBoundingClientRect()[u],O=t.getBoundingClientRect()[u],H=1;Math.abs(g-v)>1&&(H=g/v);var Ct=Yo(Xo,t)[l]/H,it=n[l],I=it-Ct+o[l],q=it-Ct-O/H+m-o[h];return I<=0&&q>=0?it:it-(Math.abs(I)>Math.abs(q)?q:I)}var N="dxScrollable",Zo="dxScrollableStrategy",ei="dx-scrollable",Qo="dx-scrollable-disabled",Jo="dx-scrollable-container",ta="dx-scrollable-wrapper",ii="dx-scrollable-content",M="vertical",F="horizontal",oe="both",ge=Si.inherit({_getDefaultOptions:function(){return d(this.callBase(),{disabled:!1,onScroll:null,direction:M,showScrollbar:"onScroll",useNative:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,onUpdated:null,onStart:null,onEnd:null,onBounce:null,useSimulatedScrollbar:!1,useKeyboard:!0,inertiaEnabled:!0,updateManually:!1})},_defaultOptionsRules:function(){return this.callBase().concat(Wi(),[{device:function(){return Ht&&S.real().platform==="android"&&!re.mozilla},options:{useSimulatedScrollbar:!0}}])},_initOptions:function(t){this.callBase(t),"useSimulatedScrollbar"in t||this._setUseSimulatedScrollbar()},_setUseSimulatedScrollbar:function(){this.initialOption("useSimulatedScrollbar")||this.option("useSimulatedScrollbar",!this.option("useNative"))},_init:function(){this.callBase(),this._initScrollableMarkup(),this._locked=!1},_visibilityChanged:function(t){t?(this.update(),this._updateRtlPosition(),this._savedScrollOffset&&this.scrollTo(this._savedScrollOffset),delete this._savedScrollOffset):this._savedScrollOffset=this.scrollOffset()},_initScrollableMarkup:function(){var t=this.$element().addClass(ei),e=this._$container=r("<div>").addClass(Jo),i=this._$wrapper=r("<div>").addClass(ta),n=this._$content=r("<div>").addClass(ii);n.append(t.contents()).appendTo(e),e.appendTo(i),i.appendTo(t)},_dimensionChanged:function(){this.update(),this._updateRtlPosition()},_initMarkup:function(){this.callBase(),this._renderDirection()},_render:function(){this._renderStrategy(),this._attachEventHandlers(),this._renderDisabledState(),this._createActions(),this.update(),this.callBase(),this._updateRtlPosition(!0)},_updateRtlPosition:function(t){this._strategy.updateRtlPosition(t)},_getMaxOffset:function(){var{scrollWidth:t,clientWidth:e,scrollHeight:i,clientHeight:n}=r(this.container()).get(0);return{left:t-e,top:i-n}},_attachEventHandlers:function(){var t=this._strategy,e={getDirection:t.getDirection.bind(t),validate:this._validate.bind(this),isNative:this.option("useNative"),scrollTarget:this._$container};c.off(this._$wrapper,"."+N),c.on(this._$wrapper,p(nt.init,N),e,this._initHandler.bind(this)),c.on(this._$wrapper,p(nt.start,N),t.handleStart.bind(t)),c.on(this._$wrapper,p(nt.move,N),t.handleMove.bind(t)),c.on(this._$wrapper,p(nt.end,N),t.handleEnd.bind(t)),c.on(this._$wrapper,p(nt.cancel,N),t.handleCancel.bind(t)),c.on(this._$wrapper,p(nt.stop,N),t.handleStop.bind(t)),c.off(this._$container,"."+N),c.on(this._$container,p("scroll",N),t.handleScroll.bind(t))},_validate:function(t){return this._isLocked()?!1:(this._updateIfNeed(),this._moveIsAllowed(t))},_moveIsAllowed(t){return this._strategy.validate(t)},handleMove(t){this._strategy.handleMove(t)},_prepareDirections(t){this._strategy._prepareDirections(t)},_initHandler:function(){var t=this._strategy;t.handleInit.apply(t,arguments)},_renderDisabledState:function(){this.$element().toggleClass(Qo,this.option("disabled")),this.option("disabled")?this._lock():this._unlock()},_renderDirection:function(){this.$element().removeClass("dx-scrollable-"+F).removeClass("dx-scrollable-"+M).removeClass("dx-scrollable-"+oe).addClass("dx-scrollable-"+this.option("direction"))},_renderStrategy:function(){this._createStrategy(),this._strategy.render(),this.$element().data(Zo,this._strategy)},_createStrategy:function(){this._strategy=this.option("useNative")?new me(this):new zi(this)},_createActions:function(){this._strategy&&this._strategy.createActions()},_clean:function(){this._strategy&&this._strategy.dispose()},_optionChanged:function(t){switch(t.name){case"onStart":case"onEnd":case"onUpdated":case"onScroll":case"onBounce":this._createActions();break;case"direction":this._resetInactiveDirection(),this._invalidate();break;case"useNative":this._setUseSimulatedScrollbar(),this._invalidate();break;case"inertiaEnabled":case"scrollByThumb":case"bounceEnabled":case"useKeyboard":case"showScrollbar":case"useSimulatedScrollbar":this._invalidate();break;case"disabled":this._renderDisabledState(),this._strategy&&this._strategy.disabledChanged();break;case"updateManually":case"scrollByContent":break;case"width":this.callBase(t),this._updateRtlPosition();break;default:this.callBase(t)}},_resetInactiveDirection:function(){var t=this._getInactiveProp();if(!(!t||!D())){var e=this.scrollOffset();e[t]=0,this.scrollTo(e)}},_getInactiveProp:function(){var t=this.option("direction");if(t===M)return"left";if(t===F)return"top"},_location:function(){return this._strategy.location()},_normalizeLocation:function(t){if(Q(t)){var e=Y(t.left,t.x),i=Y(t.top,t.y);return{left:w(e)?-e:void 0,top:w(i)?-i:void 0}}else{var n=this.option("direction");return{left:n!==M?-t:void 0,top:n!==F?-t:void 0}}},_isLocked:function(){return this._locked},_lock:function(){this._locked=!0},_unlock:function(){this.option("disabled")||(this._locked=!1)},_isDirection:function(t){var e=this.option("direction");return t===M?e!==F:t===F?e!==M:e===t},_updateAllowedDirection:function(){var t=this._strategy._allowedDirections();this._isDirection(oe)&&t.vertical&&t.horizontal?this._allowedDirectionValue=oe:this._isDirection(F)&&t.horizontal?this._allowedDirectionValue=F:this._isDirection(M)&&t.vertical?this._allowedDirectionValue=M:this._allowedDirectionValue=null},_allowedDirection:function(){return this._allowedDirectionValue},$content:function(){return this._$content},content:function(){return x(this._$content)},container:function(){return x(this._$container)},scrollOffset:function(){return this._strategy._getScrollOffset()},_isRtlNativeStrategy:function(){var{useNative:t,rtlEnabled:e}=this.option();return t&&e},scrollTop:function(){return this.scrollOffset().top},scrollLeft:function(){return this.scrollOffset().left},clientHeight:function(){return C(this._$container)},scrollHeight:function(){return A(this.$content())},clientWidth:function(){return L(this._$container)},scrollWidth:function(){return B(this.$content())},update:function(){if(!!this._strategy)return ht(this._strategy.update()).done(function(){this._updateAllowedDirection()}.bind(this))},scrollBy:function(t){t=this._normalizeLocation(t),!(!t.top&&!t.left)&&(this._updateIfNeed(),this._strategy.scrollBy(t))},scrollTo:function(t){t=this._normalizeLocation(t),this._updateIfNeed();var e=this._location();this.option("useNative")||(t=this._strategy._applyScaleRatio(t),e=this._strategy._applyScaleRatio(e)),this._isRtlNativeStrategy()&&(e.left=e.left-this._getMaxOffset().left);var i=this._normalizeLocation({left:e.left-Y(t.left,e.left),top:e.top-Y(t.top,e.top)});!i.top&&!i.left||this._strategy.scrollBy(i)},scrollToElement:function(t,e){var i=r(t),n=this.$content().find(t).length,s=i.parents("."+ei).length-i.parents("."+ii).length===0;if(!(!n||!s)){var o={top:0,left:0},a=this.option("direction");a!==M&&(o.left=this.getScrollElementPosition(i,F,e)),a!==F&&(o.top=this.getScrollElementPosition(i,M,e)),this.scrollTo(o)}},getScrollElementPosition:function(t,e,i){var n=this.scrollOffset();return jo(t.get(0),e,r(this.container()).get(0),n,i)},_updateIfNeed:function(){this.option("updateManually")||this.update()},_useTemplates:function(){return!1},isRenovated:function(){return!!ge.IS_RENOVATED_WIDGET}});P(N,ge);var ea="dx-loadpanel",ia="dx-loadpanel-wrapper",ni="dx-loadpanel-indicator",si="dx-loadpanel-message",na="dx-loadpanel-content",sa="dx-loadpanel-content-wrapper",oa="dx-loadpanel-pane-hidden",Fi=Ti.inherit({_supportedKeys:function(){return d(this.callBase(),{escape:_})},_getDefaultOptions:function(){return d(this.callBase(),{message:E.format("Loading"),width:222,height:90,animation:null,showIndicator:!0,indicatorSrc:"",showPane:!0,delay:0,templatesRenderAsynchronously:!1,hideTopOverlayHandler:null,focusStateEnabled:!1,propagateOutsideClick:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"generic"},options:{shadingColor:"transparent"}},{device:function(){return V()},options:{message:"",width:60,height:60,maxHeight:60,maxWidth:60}}])},_init:function(){this.callBase.apply(this,arguments)},_render:function(){this.callBase(),this.$element().addClass(ea),this.$wrapper().addClass(ia)},_renderContentImpl:function(){this.callBase(),this.$content().addClass(na),this._$loadPanelContentWrapper=r("<div>").addClass(sa),this._$loadPanelContentWrapper.appendTo(this.$content()),this._togglePaneVisible(),this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage()},_show:function(){var t=this.option("delay");if(!t)return this.callBase();var e=new T,i=this.callBase.bind(this);return this._clearShowTimeout(),this._showTimeout=setTimeout(function(){i().done(function(){e.resolve()})},t),e.promise()},_hide:function(){return this._clearShowTimeout(),this.callBase()},_clearShowTimeout:function(){clearTimeout(this._showTimeout)},_renderMessage:function(){if(!!this._$loadPanelContentWrapper){var t=this.option("message");if(!!t){var e=r("<div>").addClass(si).text(t);this._$loadPanelContentWrapper.append(e)}}},_renderLoadIndicator:function(){!this._$loadPanelContentWrapper||!this.option("showIndicator")||(this._$indicator||(this._$indicator=r("<div>").addClass(ni).appendTo(this._$loadPanelContentWrapper)),this._createComponent(this._$indicator,St,{indicatorSrc:this.option("indicatorSrc")}))},_cleanPreviousContent:function(){this.$content().find("."+si).remove(),this.$content().find("."+ni).remove(),delete this._$indicator},_togglePaneVisible:function(){this.$content().toggleClass(oa,!this.option("showPane"))},_optionChanged:function(t){switch(t.name){case"delay":break;case"message":case"showIndicator":this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage();break;case"showPane":this._togglePaneVisible();break;case"indicatorSrc":this._renderLoadIndicator();break;default:this.callBase(t)}},_dispose:function(){this._clearShowTimeout(),this.callBase()}});P("dxLoadPanel",Fi);var et="dx-scrollview",aa=et+"-content",ra=et+"-top-pocket",la=et+"-bottom-pocket",ha=et+"-pull-down",Se=et+"-scrollbottom",ca=Se+"-indicator",da=Se+"-text",ua=et+"-loadpanel",_a={pullDown:Eo,swipeDown:Io,simulated:Ko},pa=!D(),fa={finishLoading:_,release:_,refresh:_,scrollOffset:()=>({top:0,left:0}),_optionChanged:function(t){if(t.name!=="onUpdated")return this.callBase.apply(this,arguments)}},Ui=ge.inherit(pa?fa:{_getDefaultOptions:function(){return d(this.callBase(),{pullingDownText:E.format("dxScrollView-pullingDownText"),pulledDownText:E.format("dxScrollView-pulledDownText"),refreshingText:E.format("dxScrollView-refreshingText"),reachBottomText:E.format("dxScrollView-reachBottomText"),onPullDown:null,onReachBottom:null,refreshStrategy:"pullDown"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){var t=S.real();return t.platform==="android"},options:{refreshStrategy:"swipeDown"}},{device:function(){return V()},options:{pullingDownText:"",pulledDownText:"",refreshingText:"",reachBottomText:""}}])},_init:function(){this.callBase(),this._loadingIndicatorEnabled=!0},_initScrollableMarkup:function(){this.callBase(),this.$element().addClass(et),this._initContent(),this._initTopPocket(),this._initBottomPocket(),this._initLoadPanel()},_initContent:function(){var t=r("<div>").addClass(aa);this._$content.wrapInner(t)},_initTopPocket:function(){var t=this._$topPocket=r("<div>").addClass(ra),e=this._$pullDown=r("<div>").addClass(ha);t.append(e),this._$content.prepend(t)},_initBottomPocket:function(){var t=this._$bottomPocket=r("<div>").addClass(la),e=this._$reachBottom=r("<div>").addClass(Se),i=r("<div>").addClass(ca),n=new St(r("<div>")).$element(),s=this._$reachBottomText=r("<div>").addClass(da);this._updateReachBottomText(),e.append(i.append(n)).append(s),t.append(e),this._$content.append(t)},_initLoadPanel:function(){var t=r("<div>").addClass(ua).appendTo(this.$element()),e={shading:!1,delay:400,message:this.option("refreshingText"),position:{of:this.$element()}};this._loadPanel=this._createComponent(t,Fi,e)},_updateReachBottomText:function(){this._$reachBottomText.text(this.option("reachBottomText"))},_createStrategy:function(){var t=this.option("useNative")?this.option("refreshStrategy"):"simulated",e=_a[t];this._strategy=new e(this),this._strategy.pullDownCallbacks.add(this._pullDownHandler.bind(this)),this._strategy.releaseCallbacks.add(this._releaseHandler.bind(this)),this._strategy.reachBottomCallbacks.add(this._reachBottomHandler.bind(this))},_createActions:function(){this.callBase(),this._pullDownAction=this._createActionByOption("onPullDown"),this._reachBottomAction=this._createActionByOption("onReachBottom"),this._tryRefreshPocketState()},_tryRefreshPocketState:function(){this._pullDownEnable(this.hasActionSubscription("onPullDown")),this._reachBottomEnable(this.hasActionSubscription("onReachBottom"))},on:function(t){var e=this.callBase.apply(this,arguments);return(t==="pullDown"||t==="reachBottom")&&this._tryRefreshPocketState(),e},_pullDownEnable:function(t){if(arguments.length===0)return this._pullDownEnabled;this._$pullDown&&this._strategy&&(this._$pullDown.toggle(t),this._strategy.pullDownEnable(t),this._pullDownEnabled=t)},_reachBottomEnable:function(t){if(arguments.length===0)return this._reachBottomEnabled;this._$reachBottom&&this._strategy&&(this._$reachBottom.toggle(t),this._strategy.reachBottomEnable(t),this._reachBottomEnabled=t)},_pullDownHandler:function(){this._loadingIndicator(!1),this._pullDownLoading()},_loadingIndicator:function(t){if(arguments.length<1)return this._loadingIndicatorEnabled;this._loadingIndicatorEnabled=t},_pullDownLoading:function(){this.startLoading(),this._pullDownAction()},_reachBottomHandler:function(){this._loadingIndicator(!1),this._reachBottomLoading()},_reachBottomLoading:function(){this.startLoading(),this._reachBottomAction()},_releaseHandler:function(){this.finishLoading(),this._loadingIndicator(!0)},_optionChanged:function(t){switch(t.name){case"onPullDown":case"onReachBottom":this._createActions();break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"refreshStrategy":this._invalidate();break;case"reachBottomText":this._updateReachBottomText();break;default:this.callBase(t)}},content:function(){return x(this._$content.children().eq(1))},release:function(t){return t!==void 0&&this.toggleLoading(!t),this._strategy.release()},toggleLoading:function(t){this._reachBottomEnable(t)},refresh:function(){!this.hasActionSubscription("onPullDown")||(this._strategy.pendingRelease(),this._pullDownLoading())},startLoading:function(){this._loadingIndicator()&&this.$element().is(":visible")&&this._loadPanel.show(),this._lock()},finishLoading:function(){this._loadPanel.hide(),this._unlock()},_dispose:function(){this._strategy.dispose(),this.callBase(),this._loadPanel&&this._loadPanel.$element().remove()}});P("dxScrollView",Ui);var wt="__dx_key__",va=Ci.inherit({_getDefaultOptions:function(){return d(this.callBase(),{repaintChangesOnly:!1})},ctor:function(){var t;this.callBase.apply(this,arguments),this._customizeStoreLoadOptions=e=>{var i=this._dataController;i.getDataSource()&&!this._dataController.isLoaded()&&(this._correctionIndex=0),this._correctionIndex&&e.storeLoadOptions&&(e.storeLoadOptions.skip+=this._correctionIndex)},(t=this._dataController)===null||t===void 0||t.on("customizeStoreLoadOptions",this._customizeStoreLoadOptions)},reload:function(){this._correctionIndex=0},_init:function(){this.callBase(),this._refreshItemsCache(),this._correctionIndex=0},_findItemElementByKey:function(t){var e=r(),i=this.key();return this.itemElements().each((n,s)=>{var o=r(s),a=this._getItemData(o);if(i?Dn(i,this.keyOf(a),t):this._isItemEquals(a,t))return e=o,!1}),e},_dataSourceChangedHandler:function(t,e){e!=null&&e.changes?this._modifyByChanges(e.changes):(this.callBase(t,e),this._refreshItemsCache())},_isItemEquals:function(t,e){t&&t[wt]&&(t=t.data);try{return JSON.stringify(t)===JSON.stringify(e)}catch{return t===e}},_isItemStrictEquals:function(t,e){return this._isItemEquals(t,e)},_shouldAddNewGroup:function(t,e){var i=!1;return this.option("grouped")&&(t.length||(i=!0),f(t,(n,s)=>{s.type==="insert"&&(i=!0,f(e,(o,a)=>{if(s.data.key!==void 0&&s.data.key===a.key)return i=!1,!1}))})),i},_partialRefresh:function(){if(this.option("repaintChangesOnly")){var t=On(this._itemsCache,this._editStrategy.itemsGetter(),e=>e&&e[wt]!==void 0?e[wt]:this.keyOf(e),this._isItemStrictEquals.bind(this));if(t&&this._itemsCache.length&&!this._shouldAddNewGroup(t,this._itemsCache))return this._modifyByChanges(t,!0),this._renderEmptyMessage(),!0;this._refreshItemsCache()}return!1},_refreshItemsCache:function(){if(this.option("repaintChangesOnly")){var t=this._editStrategy.itemsGetter();try{this._itemsCache=d(!0,[],t),this.key()||(this._itemsCache=this._itemsCache.map((e,i)=>({[wt]:t[i],data:e})))}catch{this._itemsCache=d([],t)}}},_dispose:function(){this._dataController.off("customizeStoreLoadOptions",this._customizeStoreLoadOptions),this.callBase()},_updateByChange:function(t,e,i,n){if(n)this._renderItem(i.index,i.data,null,this._findItemElementByKey(i.key));else{var s=e[xe(t,e,i.key)];s&&Bn(t,e,i.key,i.data).done(()=>{this._renderItem(e.indexOf(s),s,null,this._findItemElementByKey(i.key))})}},_insertByChange:function(t,e,i,n){ht(n||wn(t,e,i.data,i.index)).done(()=>{var s;this._beforeItemElementInserted(i);var o=this._getItemContainer(i.data);this._renderItem((s=i.index)!==null&&s!==void 0?s:e.length,i.data,o),this._afterItemElementInserted(),this._correctionIndex++})},_getItemContainer:function(t){return this._itemContainer()},_updateSelectionAfterRemoveByChange:function(t){var e=this.option("selectedIndex");e>t?this.option("selectedIndex",e-1):e===t&&this.option("selectedItems").length===1?this.option("selectedItems",[]):this._normalizeSelectedItems()},_beforeItemElementInserted:function(t){var e=this.option("selectedIndex");t.index<=e&&this.option("selectedIndex",e+1)},_afterItemElementInserted:_,_removeByChange:function(t,e,i,n){var s=n?i.index:xe(t,e,i.key),o=n?i.oldItem:e[s];if(o){var a=this._findItemElementByKey(i.key),l=this._extendActionArgs(a);this._waitDeletingPrepare(a).done(()=>{n?(this._updateIndicesAfterIndex(s-1),this._afterItemElementDeleted(a,l),this._updateSelectionAfterRemoveByChange(s)):(this._deleteItemElementByIndex(s),this._afterItemElementDeleted(a,l))}),this._correctionIndex--}},_modifyByChanges:function(t,e){var i=this._editStrategy.itemsGetter(),n={key:this.key.bind(this),keyOf:this.keyOf.bind(this)},s=this._dataController,o=s.paginate(),a=s.group();(o||a)&&(t=t.filter(l=>l.type!=="insert"||l.index!==void 0)),t.forEach(l=>this["_".concat(l.type,"ByChange")](n,i,l,e)),this._renderedItemsCount=i.length,this._refreshItemsCache(),this._fireContentReadyAction()},_appendItemToContainer:function(t,e,i){var n=t.children(this._itemSelector()).get(i);vt.insertElement(t.get(0),e.get(0),n)},_optionChanged:function(t){switch(t.name){case"items":var e=this._partialRefresh(t.value);e||this.callBase(t);break;case"dataSource":(!this.option("repaintChangesOnly")||!t.value)&&this.option("items",[]),this.callBase(t);break;case"repaintChangesOnly":break;default:this.callBase(t)}}}),ma=t=>Array.isArray(t)&&t.every(e=>{var i=Object.keys(e).length===2,n="key"in e&&"items"in e;return i&&n&&Array.isArray(e.items)}),Gi={_getSpecificDataSourceOption:function(){var t=this.option("dataSource"),e=!1,i={};return this._getGroupedOption()&&ma(t)&&(i=t.reduce((n,s)=>{var o=s.items.map(a=>(_e(a)||(a={text:a},e=!0),"key"in a||(a.key=s.key),a));return n.concat(o)},[]),t={store:{type:"array",data:i},group:{selector:"key",keepInitialKeyOrder:!0}},e&&(t.searchExpr="text")),t}};function ga(t){return t?Number(t.replace("px","")):0}function Sa(t){var e,i;return t&&D()?(e=(i=J()).getComputedStyle)===null||e===void 0?void 0:e.call(i,t):null}function Ca(t,e){var i=Sa(t);return i?ga(i["margin".concat(ft(e))]):0}var Ea="dx-list",Rt="dx-list-item",ba="."+Rt,Ta="dx-list-item-icon-container",Aa="dx-list-item-icon",ot="dx-list-group",ae="dx-list-group-header",xt="dx-list-group-body",La="dx-list-collapsible-groups",oi="dx-list-group-collapsed",Ia="dx-list-group-header-indicator",Da="dx-has-next",Oa="dx-list-next-button",ai="dx-wrap-item-text",Ba=".dx-list-select-all",wa="dxListItemData",ri=70,xa=xn("items"),ya,Ki=va.inherit({_activeStateUnit:[ba,Ba].join(","),_supportedKeys:function(){var t=this,e=function(n){var s=i(n),o=s.is(t.option("focusedElement"));o&&(function(a,l){var h=a.position().top;l==="prev"&&(h=a.position().top-C(t.$element())+A(a)),t.scrollTo(h)}(s,n),s=i(n)),t.option("focusedElement",x(s)),t.scrollToItem(s)};function i(n){var s=t.scrollTop(),o=C(t.$element()),a=r(t.option("focusedElement")),l=!0;if(!a.length)return r();for(;l;){var h=a[n]();if(!h.length)break;var u=h.position().top+A(h)/2;l=u<o+s&&u>s,l&&(a=h)}return a}return d(this.callBase(),{leftArrow:_,rightArrow:_,pageUp:function(){return e("prev"),!1},pageDown:function(){return e("next"),!1}})},_getDefaultOptions:function(){return d(this.callBase(),{hoverStateEnabled:!0,pullRefreshEnabled:!1,scrollingEnabled:!0,showScrollbar:"onScroll",useNativeScrolling:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,pullingDownText:E.format("dxList-pullingDownText"),pulledDownText:E.format("dxList-pulledDownText"),refreshingText:E.format("dxList-refreshingText"),pageLoadingText:E.format("dxList-pageLoadingText"),onScroll:null,onPullRefresh:null,onPageLoading:null,pageLoadMode:"scrollBottom",nextButtonText:E.format("dxList-nextButtonText"),onItemSwipe:null,grouped:!1,onGroupRendered:null,collapsibleGroups:!1,groupTemplate:"group",indicateLoading:!0,activeStateEnabled:!0,_itemAttributes:{role:"option"},_listAttributes:{role:"listbox"},useInkRipple:!1,wrapItemText:!1,_swipeEnabled:!0,showChevronExpr:function(t){return t?t.showChevron:void 0},badgeExpr:function(t){return t?t.badge:void 0}})},_defaultOptionsRules:function(){var t=Ai();return this.callBase().concat(Wi(),[{device:function(){return!Ht},options:{useNativeScrolling:!1}},{device:function(e){return!Ht&&!S.isSimulator()&&S.real().deviceType==="desktop"&&e.platform==="generic"},options:{showScrollbar:"onHover",pageLoadMode:"nextButton"}},{device:function(){return S.real().deviceType==="desktop"&&!S.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return V(t)},options:{pullingDownText:"",pulledDownText:"",refreshingText:"",pageLoadingText:"",useInkRipple:!0}}])},_visibilityChanged:function(t){t&&this._updateLoadingState(!0)},_itemClass:function(){return Rt},_itemDataKey:function(){return wa},_itemContainer:function(){return this._$container},_saveSelectionChangeEvent:function(t){this._selectionChangeEventInstance=t},_getSelectionChangeEvent:function(){return this._selectionChangeEventInstance},_refreshItemElements:function(){this.option("grouped")?this._itemElementsCache=this._itemContainer().children("."+ot).children("."+xt).children(this._itemSelector()):this._itemElementsCache=this._itemContainer().children(this._itemSelector())},_modifyByChanges:function(){this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},reorderItem:function(t,e){var i=this.callBase(t,e);return i.done(function(){this._refreshItemElements()})},deleteItem:function(t){var e=this.callBase(t);return e.done(function(){this._refreshItemElements()})},_itemElements:function(){return this._itemElementsCache},_itemSelectHandler:function(t){if(!(this.option("selectionMode")==="single"&&this.isItemSelected(t.currentTarget)))return this.callBase(t)},_allowDynamicItemsAppend:function(){return!0},_init:function(){this.callBase(),this._dataController.resetDataSourcePageIndex(),this._$container=this.$element(),this._initScrollView(),this._feedbackShowTimeout=ri,this._createGroupRenderAction()},_scrollBottomMode:function(){return this.option("pageLoadMode")==="scrollBottom"},_nextButtonMode:function(){return this.option("pageLoadMode")==="nextButton"},_dataSourceOptions:function(){var t=this._scrollBottomMode(),e=this._nextButtonMode();return d(this.callBase(),{paginate:Y(t||e,!0)})},_getGroupedOption:function(){return this.option("grouped")},_getGroupContainerByIndex:function(t){return this._itemContainer().find(".".concat(ot)).eq(t).find(".".concat(xt))},_dataSourceFromUrlLoadMode:function(){return"raw"},_initScrollView:function(){var t=this.option("scrollingEnabled"),e=t&&this.option("pullRefreshEnabled"),i=t&&this._scrollBottomMode()&&!!this._dataController.getDataSource();this._scrollView=this._createComponent(this.$element(),Ra(),{height:this.option("height"),width:this.option("width"),disabled:this.option("disabled")||!t,onScroll:this._scrollHandler.bind(this),onPullDown:e?this._pullDownHandler.bind(this):null,onReachBottom:i?this._scrollBottomHandler.bind(this):null,showScrollbar:this.option("showScrollbar"),useNative:this.option("useNativeScrolling"),bounceEnabled:this.option("bounceEnabled"),scrollByContent:this.option("scrollByContent"),scrollByThumb:this.option("scrollByThumb"),pullingDownText:this.option("pullingDownText"),pulledDownText:this.option("pulledDownText"),refreshingText:this.option("refreshingText"),reachBottomText:this.option("pageLoadingText"),useKeyboard:!1}),this._$container=r(this._scrollView.content()),this.option("wrapItemText")&&this._$container.addClass(ai),this._createScrollViewActions()},_createScrollViewActions:function(){this._scrollAction=this._createActionByOption("onScroll"),this._pullRefreshAction=this._createActionByOption("onPullRefresh"),this._pageLoadingAction=this._createActionByOption("onPageLoading")},_scrollHandler:function(t){this._scrollAction&&this._scrollAction(t)},_initTemplates:function(){this._templateManager.addDefaultTemplates({group:new Ei(function(t,e){Q(e)?e.key&&t.text(e.key):t.text(String(e))},["key"],this.option("integrationOptions.watchMethod"))}),this.callBase()},_prepareDefaultItemTemplate:function(t,e){if(this.callBase(t,e),t.icon){var i=yn(t.icon).addClass(Aa),n=r("<div>").addClass(Ta);n.append(i),e.prepend(n)}},_getBindableFields:function(){return["text","html","icon"]},_updateLoadingState:function(t){var e=this._dataController,i=this._scrollBottomMode()&&t&&!e.isLoading()&&!this._isLastPage();this._shouldContinueLoading(i)?this._infiniteDataLoading():(this._scrollView.release(!i&&!e.isLoading()),this._toggleNextButton(this._shouldRenderNextButton()&&!this._isLastPage()),this._loadIndicationSuppressed(!1))},_shouldRenderNextButton:function(){return this._nextButtonMode()&&this._dataController.isLoaded()},_isDataSourceFirstLoadCompleted:function(t){return w(t)&&(this._isFirstLoadCompleted=t),this._isFirstLoadCompleted},_dataSourceLoadingChangedHandler:function(t){this._loadIndicationSuppressed()||(t&&this.option("indicateLoading")?this._showLoadingIndicatorTimer=setTimeout(function(){var e=!this._itemElements().length,i=!e||this._isDataSourceFirstLoadCompleted();if(i){var n;(n=this._scrollView)===null||n===void 0||n.startLoading()}}.bind(this)):(clearTimeout(this._showLoadingIndicatorTimer),this._scrollView&&this._scrollView.finishLoading()),t||this._isDataSourceFirstLoadCompleted(!1))},_dataSourceChangedHandler:function(){!this._shouldAppendItems()&&D()&&this._scrollView&&this._scrollView.scrollTo(0),this.callBase.apply(this,arguments),this._isDataSourceFirstLoadCompleted(!0)},_refreshContent:function(){this._prepareContent(),this._fireContentReadyAction()},_hideLoadingIfLoadIndicationOff:function(){this.option("indicateLoading")||this._dataSourceLoadingChangedHandler(!1)},_loadIndicationSuppressed:function(t){if(!arguments.length)return this._isLoadIndicationSuppressed;this._isLoadIndicationSuppressed=t},_scrollViewIsFull:function(){var t=this._scrollView;return!t||C(t.content())>C(t.container())},_pullDownHandler:function(t){this._pullRefreshAction(t);var e=this._dataController;e.getDataSource()&&!e.isLoading()?(this._clearSelectedItems(),e.pageIndex(0),e.reload()):this._updateLoadingState()},_shouldContinueLoading:function(t){var e,i,n=C(this._scrollView.content())-C(this._scrollView.container())<((e=(i=this._scrollView.scrollOffset())===null||i===void 0?void 0:i.top)!==null&&e!==void 0?e:0);return t&&(!this._scrollViewIsFull()||n)},_infiniteDataLoading:function(){var t=this.$element().is(":visible");t&&(clearTimeout(this._loadNextPageTimer),this._loadNextPageTimer=setTimeout(()=>{this._loadNextPage()}))},_scrollBottomHandler:function(t){this._pageLoadingAction(t);var e=this._dataController;!e.isLoading()&&!this._isLastPage()?this._loadNextPage():this._updateLoadingState()},_renderItems:function(t){this.option("grouped")?(f(t,this._renderGroup.bind(this)),this._attachGroupCollapseEvent(),this._renderEmptyMessage(),V()&&this.attachGroupHeaderInkRippleEvents()):this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},_attachGroupCollapseEvent:function(){var t=p(Mt,this.NAME),e="."+ae,i=this.$element(),n=this.option("collapsibleGroups");i.toggleClass(La,n),c.off(i,t,e),n&&c.on(i,t,e,function(s){this._createAction(function(o){var a=r(o.event.currentTarget).parent();this._collapseGroupHandler(a),this.option("focusStateEnabled")&&this.option("focusedElement",x(a.find("."+Rt).eq(0)))}.bind(this),{validatingTargetName:"element"})({event:s})}.bind(this))},_collapseGroupHandler:function(t,e){var i=new T;if(t.hasClass(oi)===e)return i.resolve();var n=t.children("."+xt),s=A(n),o=0;return s===0&&(Rn(n,"auto"),o=A(n)),t.toggleClass(oi,e),bi.animate(n,{type:"custom",from:{height:s},to:{height:o},duration:200,complete:function(){this.updateDimensions(),this._updateLoadingState(),i.resolve()}.bind(this)}),i.promise()},_dataSourceLoadErrorHandler:function(){this._forgetNextPageLoading(),this._initialized&&(this._renderEmptyMessage(),this._updateLoadingState())},_initMarkup:function(){this._itemElementsCache=r(),this.$element().addClass(Ea),this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.setAria("role",this.option("_listAttributes").role)},_renderInkRipple:function(){this._inkRipple=$n()},_toggleActiveState:function(t,e,i){this.callBase.apply(this,arguments);var n=this;if(!!this._inkRipple){var s={element:t,event:i};e?V()?this._inkRippleTimer=setTimeout(function(){n._inkRipple.showWave(s)},ri/2):n._inkRipple.showWave(s):(clearTimeout(this._inkRippleTimer),this._inkRipple.hideWave(s))}},_postprocessRenderItem:function(t){this._refreshItemElements(),this.callBase.apply(this,arguments),this.option("_swipeEnabled")&&this._attachSwipeEvent(r(t.itemElement))},_attachSwipeEvent:function(t){var e=p(zt,this.NAME);c.on(t,e,this._itemSwipeEndHandler.bind(this))},_itemSwipeEndHandler:function(t){this._itemDXEventHandler(t,"onItemSwipe",{direction:t.offset<0?"left":"right"})},_nextButtonHandler:function(t){this._pageLoadingAction(t);var e=this._dataController;e.getDataSource()&&!e.isLoading()&&(this._scrollView.toggleLoading(!0),this._$nextButton.detach(),this._loadIndicationSuppressed(!0),this._loadNextPage())},_renderGroup:function(t,e){var i=r("<div>").addClass(ot).appendTo(this._itemContainer()),n=r("<div>").addClass(ae).appendTo(i),s=this.option("groupTemplate"),o=this._getTemplate(e.template||s,e,t,n),a={index:t,itemData:e,container:x(n)};this._createItemByTemplate(o,a),V()&&r("<div>").addClass(Ia).prependTo(n),this._renderingGroupIndex=t;var l=r("<div>").addClass(xt).appendTo(i);f(xa(e)||[],function(h,u){this._renderItem({group:t,item:h},u,l)}.bind(this)),this._groupRenderAction({groupElement:x(i),groupIndex:t,groupData:e})},downInkRippleHandler:function(t){this._toggleActiveState(r(t.currentTarget),!0,t)},upInkRippleHandler:function(t){this._toggleActiveState(r(t.currentTarget),!1)},attachGroupHeaderInkRippleEvents:function(){var t="."+ae,e=this.$element();this._downInkRippleHandler=this._downInkRippleHandler||this.downInkRippleHandler.bind(this),this._upInkRippleHandler=this._upInkRippleHandler||this.upInkRippleHandler.bind(this);var i=[e,"dxpointerdown",t,this._downInkRippleHandler],n=[e,"dxpointerup dxpointerout",t,this._upInkRippleHandler];c.off(...i),c.on(...i),c.off(...n),c.on(...n)},_createGroupRenderAction:function(){this._groupRenderAction=this._createActionByOption("onGroupRendered")},_clean:function(){clearTimeout(this._inkRippleTimer),this._$nextButton&&(this._$nextButton.remove(),this._$nextButton=null),this.callBase.apply(this,arguments)},_dispose:function(){this._isDataSourceFirstLoadCompleted(!1),clearTimeout(this._holdTimer),clearTimeout(this._loadNextPageTimer),clearTimeout(this._showLoadingIndicatorTimer),this.callBase()},_toggleDisabledState:function(t){this.callBase(t),this._scrollView.option("disabled",t||!this.option("scrollingEnabled"))},_toggleNextButton:function(t){var e=this._dataController,i=this._getNextButton();this.$element().toggleClass(Da,t),t&&e.isLoaded()&&i.appendTo(this._itemContainer()),t||i.detach()},_getNextButton:function(){return this._$nextButton||(this._$nextButton=this._createNextButton()),this._$nextButton},_createNextButton:function(){var t=r("<div>").addClass(Oa),e=r("<div>").appendTo(t);return this._createComponent(e,$t,{text:this.option("nextButtonText"),onClick:this._nextButtonHandler.bind(this),type:V()?"default":void 0,integrationOptions:{}}),t},_moveFocus:function(){this.callBase.apply(this,arguments),this.scrollToItem(this.option("focusedElement"))},_refresh:function(){if(!D())this.callBase();else{var t=this._scrollView.scrollTop();this.callBase(),t&&this._scrollView.scrollTo(t)}},_optionChanged:function(t){switch(t.name){case"pageLoadMode":this._toggleNextButton(t.value),this._initScrollView();break;case"dataSource":this.callBase(t),this._initScrollView(),this._isDataSourceFirstLoadCompleted(!1);break;case"items":this.callBase(t),this._isDataSourceFirstLoadCompleted(!1);break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"pageLoadingText":case"showScrollbar":case"bounceEnabled":case"scrollByContent":case"scrollByThumb":case"useNativeScrolling":case"scrollingEnabled":case"pullRefreshEnabled":this._initScrollView(),this._updateLoadingState();break;case"nextButtonText":case"onItemSwipe":case"useInkRipple":this._invalidate();break;case"onScroll":case"onPullRefresh":case"onPageLoading":this._createScrollViewActions();break;case"grouped":case"collapsibleGroups":case"groupTemplate":this._invalidate();break;case"wrapItemText":this._$container.toggleClass(ai,t.value);break;case"onGroupRendered":this._createGroupRenderAction();break;case"width":case"height":this.callBase(t),this._scrollView.option(t.name,t.value),this._scrollView.update();break;case"indicateLoading":this._hideLoadingIfLoadIndicationOff();break;case"visible":this.callBase(t),this._scrollView.update();break;case"rtlEnabled":this._initScrollView(),this.callBase(t);break;case"showChevronExpr":case"badgeExpr":this._invalidate();break;case"_swipeEnabled":case"_listAttributes":break;default:this.callBase(t)}},_extendActionArgs:function(t){if(!this.option("grouped"))return this.callBase(t);var e=t.closest("."+ot),i=e.find("."+Rt);return d(this.callBase(t),{itemIndex:{group:e.index(),item:i.index(t)}})},expandGroup:function(t){var e=new T,i=this._itemContainer().find("."+ot).eq(t);return this._collapseGroupHandler(i,!1).done(function(){e.resolveWith(this)}.bind(this)),e.promise()},collapseGroup:function(t){var e=new T,i=this._itemContainer().find("."+ot).eq(t);return this._collapseGroupHandler(i,!0).done(function(){e.resolveWith(this)}.bind(this)),e},updateDimensions:function(){var t=this,e=new T;return t._scrollView?t._scrollView.update().done(function(){!t._scrollViewIsFull()&&t._updateLoadingState(!0),e.resolveWith(t)}):e.resolveWith(t),e.promise()},reload:function(){this.callBase(),this.scrollTo(0),this._pullDownHandler()},repaint:function(){this.scrollTo(0),this.callBase()},scrollTop:function(){return this._scrollView.scrollOffset().top},clientHeight:function(){return this._scrollView.clientHeight()},scrollHeight:function(){return this._scrollView.scrollHeight()},scrollBy:function(t){this._scrollView.scrollBy(t)},scrollTo:function(t){this._scrollView.scrollTo(t)},scrollToItem:function(t){var e=this._editStrategy.getItemElement(t),i=e==null?void 0:e.get(0);this._scrollView.scrollToElement(i,{bottom:Ca(i,"bottom")})},_dimensionChanged:function(){this.updateDimensions()}}).include(Gi);Ki.ItemClass=ro;function Ra(){return ya||Ui}var $a="dx-list-item-selected",Pa="dx-list-item-response-wait",Ha=Ki.inherit({_supportedKeys(){var t=this,e=this.callBase(),i=(n,s)=>{var o=this._editStrategy,a=this.option("focusedElement"),l=o.getNormalizedIndex(a),h=l===this._getLastItemIndex();if(!(h&&this._dataController.isLoading()))if(n.shiftKey&&t.option("itemDragging.allowReordering")){var u=l+(s?-1:1),v=o.getItemElement(u);this.reorderItem(a,v),this.scrollToItem(a),n.preventDefault()}else{var m=this._editProvider,g=m.handleKeyboardEvents(l,s);g||(s?e.upArrow(n):e.downArrow(n))}};return d({},e,{del:n=>{t.option("allowItemDeleting")&&(n.preventDefault(),t.deleteItem(t.option("focusedElement")))},upArrow:n=>i(n,!0),downArrow:n=>i(n),enter:function(n){this._editProvider.handleEnterPressing(n)||e.enter.apply(this,arguments)},space:function(n){this._editProvider.handleEnterPressing(n)||e.space.apply(this,arguments)}})},_updateSelection(){this._editProvider.afterItemsRendered(),this.callBase()},_getLastItemIndex(){return this._itemElements().length-1},_refreshItemElements(){this.callBase();var t=this._editProvider.getExcludedItemSelectors();t.length&&(this._itemElementsCache=this._itemElementsCache.not(t))},_isItemStrictEquals:function(t,e){var i=t&&t.__dx_key__;return i&&!this.key()&&this._selection.isItemSelected(i)?!1:this.callBase(t,e)},_getDefaultOptions(){return d(this.callBase(),{showSelectionControls:!1,selectionMode:"none",selectAllMode:"page",onSelectAllValueChanged:null,selectAllText:E.format("dxList-selectAll"),menuItems:[],menuMode:"context",allowItemDeleting:!1,itemDeleteMode:"static",itemDragging:{}})},_defaultOptionsRules(){return this.callBase().concat([{device:t=>t.platform==="ios",options:{menuMode:"slide",itemDeleteMode:"slideItem"}},{device:{platform:"android"},options:{itemDeleteMode:"swipe"}}])},_init(){this.callBase(),this._initEditProvider()},_initDataSource(){this.callBase(),this._isPageSelectAll()||this._dataSource&&this._dataSource.requireTotalCount(!0)},_isPageSelectAll(){return this.option("selectAllMode")==="page"},_initEditProvider(){this._editProvider=new Js(this)},_disposeEditProvider(){this._editProvider&&this._editProvider.dispose()},_refreshEditProvider(){this._disposeEditProvider(),this._initEditProvider()},_initEditStrategy(){this.option("grouped")?this._editStrategy=new Us(this):this.callBase()},_initMarkup(){this._refreshEditProvider(),this.callBase()},_renderItems(){this.callBase(...arguments),this._editProvider.afterItemsRendered()},_selectedItemClass:()=>$a,_itemResponseWaitClass:()=>Pa,_itemClickHandler(t){var e=r(t.currentTarget);if(!e.is(".dx-state-disabled, .dx-state-disabled *")){var i=this._editProvider.handleClick(e,t);i||(this._saveSelectionChangeEvent(t),this.callBase(...arguments))}},_shouldFireContextMenuEvent(){return this.callBase(...arguments)||this._editProvider.contextMenuHandlerExists()},_itemHoldHandler(t){var e=r(t.currentTarget);if(!e.is(".dx-state-disabled, .dx-state-disabled *")){var i=Pn(t)&&this._editProvider.handleContextMenu(e,t);if(i){t.handledByEditProvider=!0;return}this.callBase(...arguments)}},_getItemContainer:function(t){if(this.option("grouped")){var e,i=(e=this._editStrategy.getIndexByItemData(t))===null||e===void 0?void 0:e.group;return this._getGroupContainerByIndex(i)}else return this.callBase(t)},_itemContextMenuHandler(t){var e=r(t.currentTarget);if(!e.is(".dx-state-disabled, .dx-state-disabled *")){var i=!t.handledByEditProvider&&this._editProvider.handleContextMenu(e,t);if(i){t.preventDefault();return}this.callBase(...arguments)}},_postprocessRenderItem(t){this.callBase(...arguments),this._editProvider.modifyItemElement(t)},_clean(){this._disposeEditProvider(),this.callBase()},focusListItem(t){var e=this._editStrategy.getItemElement(t);this.option("focusedElement",e),this.focus(),this.scrollToItem(this.option("focusedElement"))},_optionChanged(t){switch(t.name){case"selectAllMode":this._initDataSource(),this._dataController.pageIndex(0),this._dataController.load();break;case"grouped":this._clearSelectedItems(),delete this._renderingGroupIndex,this._initEditStrategy(),this.callBase(t);break;case"showSelectionControls":case"menuItems":case"menuMode":case"allowItemDeleting":case"itemDeleteMode":case"itemDragging":case"selectAllText":this._invalidate();break;case"onSelectAllValueChanged":break;default:this.callBase(t)}},selectAll(){return this._selection.selectAll(this._isPageSelectAll())},unselectAll(){return this._selection.deselectAll(this._isPageSelectAll())},isSelectAll(){return this._selection.getSelectAllState(this._isPageSelectAll())},getFlatIndexByItemElement(t){return this._itemElements().index(t)},getItemElementByFlatIndex(t){var e=this._itemElements();return t<0||t>=e.length?r():e.eq(t)},getItemByIndex(t){return this._editStrategy.getItemDataByIndex(t)}});function ka(t){return class{constructor(){throw new Error("Module '".concat(t,"' not found"))}static getInstance(){}}}var li=ka("TextBox"),hi={_getDefaultOptions:function(){return d(this.callBase(),{searchMode:"",searchExpr:null,searchValue:"",searchEnabled:!1,searchEditorOptions:{}})},_initMarkup:function(){this._renderSearch(),this.callBase()},_renderSearch:function(){var t=this.$element(),e=this.option("searchEnabled"),i=this._addWidgetPrefix("search"),n=this._addWidgetPrefix("with-search");if(!e){t.removeClass(n),this._removeSearchBox();return}var s=this._getSearchEditorOptions();this._searchEditor?this._searchEditor.option(s):(t.addClass(n),this._$searchEditorElement=r("<div>").addClass(i).prependTo(t),this._searchEditor=this._createComponent(this._$searchEditorElement,li,s))},_removeSearchBox:function(){this._$searchEditorElement&&this._$searchEditorElement.remove(),delete this._$searchEditorElement,delete this._searchEditor},_getSearchEditorOptions:function(){var t=this,e=t.option("searchEditorOptions"),i=E.format("Search");return d({mode:"search",placeholder:i,tabIndex:t.option("tabIndex"),value:t.option("searchValue"),valueChangeEvent:"input",inputAttr:{"aria-label":i},onValueChanged:function(n){var s=t.option("searchTimeout");t._valueChangeDeferred=new T,clearTimeout(t._valueChangeTimeout),t._valueChangeDeferred.done(function(){this.option("searchValue",n.value)}.bind(t)),n.event&&n.event.type==="input"&&s?t._valueChangeTimeout=setTimeout(function(){t._valueChangeDeferred.resolve()},s):t._valueChangeDeferred.resolve()}},e)},_getAriaTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.$element()},_focusTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_updateFocusState:function(t,e){this.option("searchEnabled")&&this._toggleFocusClass(e,this.$element()),this.callBase(t,e)},getOperationBySearchMode:function(t){return t==="equals"?"=":t},_cleanAria:function(t){this.setAria({role:null,activedescendant:null},t),t.attr("tabIndex",null)},_optionChanged:function(t){switch(t.name){case"searchEnabled":case"searchEditorOptions":this._cleanAria(this.option("searchEnabled")?this.$element():this._itemContainer()),this._invalidate();break;case"searchExpr":case"searchMode":case"searchValue":if(!this._dataSource){gt.log("W1009");return}t.name==="searchMode"?this._dataSource.searchOperation(this.getOperationBySearchMode(t.value)):this._dataSource[t.name](t.value),this._dataSource.load();break;case"searchTimeout":break;default:this.callBase(t)}},focus:function(){if(!this.option("focusedElement")&&this.option("searchEnabled")){this._searchEditor&&this._searchEditor.focus();return}this.callBase()},_refresh:function(){this._valueChangeDeferred&&this._valueChangeDeferred.resolve(),this.callBase()},setEditorClass:function(t){li=t}},Yi=Ha.inherit(hi).inherit({_addWidgetPrefix:function(t){return"dx-list-"+t},_getCombinedFilter:function(){var t=this._dataController,e={filter:t.filter()};t.addSearchFilter(e);var i=e.filter;return i},_initDataSource:function(){var t=this.option("searchValue"),e=this.option("searchExpr"),i=this.option("searchMode");this.callBase();var n=this._dataController;t&&t.length&&n.searchValue(t),i.length&&n.searchOperation(hi.getOperationBySearchMode(i)),e&&n.searchExpr(e)}});P("dxList",Yi);var ci=J(),Ma=".dx-list-item",Na="dxListItemData",Va="dx-dropdownlist-popup-wrapper",za="input",Wa=["startswith","contains","endwith","notcontains"],di=S.real().platform!=="android",qi=xi.inherit({_supportedKeys:function(){var t=this.callBase();return d({},t,{tab:function(e){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(e);var i=r(this._list.option("focusedElement"));i.length&&this._setSelectedElement(i)}t.tab.apply(this,arguments)},space:_,home:_,end:_})},_allowSelectItemByTab:function(){return this.option("opened")&&this.option("applyValueMode")==="instantly"},_setSelectedElement:function(t){var e=this._valueGetter(this._list._getItemData(t));this._setValue(e)},_setValue:function(t){this.option("value",t)},_getDefaultOptions:function(){return d(this.callBase(),d(ye._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:E.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:_,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1}))},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])},_setOptionsByReference:function(){this.callBase(),d(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})},_init:function(){this.callBase(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()},_setListFocusedElementOptionChange:function(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)},_initItems:function(){var t=this.option().items;t&&!t.length&&this._dataSource&&(this.option().items=this._dataSource.items())},_initActions:function(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()},_initContentReadyAction:function(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initSelectionChangedAction:function(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},_initItemClickAction:function(){this._itemClickAction=this._createActionByOption("onItemClick")},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Hn("item")})},_isEditable:function(){return this.callBase()||this.option("searchEnabled")},_saveFocusOnWidget:function(t){this._list&&this._list.initialOption("focusStateEnabled")&&this._focusInput()},_fitIntoRange:function(t,e,i){return t>i?e:t<e?i:t},_items:function(){var t=this._getPlainItems(!this._list&&this._dataSource.items()),e=new Di(t).filter("disabled","<>",!0).toArray();return e},_calcNextItem:function(t){var e=this._items(),i=this._fitIntoRange(this._getSelectedIndex()+t,0,e.length-1);return e[i]},_getSelectedIndex:function(){var t=this._items(),e=this.option("selectedItem"),i=-1;return f(t,function(n,s){if(this._isValueEquals(s,e))return i=n,!1}.bind(this)),i},_createPopup:function(){this.callBase(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());var t=this._popup.$content();c.off(t,"mouseup"),c.on(t,"mouseup",this._saveFocusOnWidget.bind(this))},_updateCustomBoundaryContainer:function(){var t=this.option("dropDownOptions.container"),e=t&&r(t);if(e&&e.length&&!lt(e.get(0))){var i=[].slice.call(e.parents());i.unshift(e.get(0)),f(i,function(n,s){if(s===r("body").get(0))return!1;if(ci.getComputedStyle(s).overflowY==="hidden")return this._$customBoundaryContainer=r(s),!1}.bind(this))}},_popupWrapperClass:function(){return Va},_renderInputValue:function(){var t=this._getCurrentValue();return this._rejectValueLoading(),this._loadInputValue(t,this._setSelectedItem.bind(this)).always(this.callBase.bind(this,t))},_loadInputValue:function(t,e){return this._loadItem(t).always(e)},_getItemFromPlain:function(t,e){var i,n;return e&&typeof t!="object"&&(e.itemByValue||(e.itemByValue={},i=this._getPlainItems(),i.forEach(function(s){e.itemByValue[this._valueGetter(s)]=s},this)),n=e.itemByValue[t]),n||(i=this._getPlainItems(),n=kn(i,function(s){return this._isValueEquals(this._valueGetter(s),t)}.bind(this))[0]),n},_loadItem:function(t,e){var i=this._getItemFromPlain(t,e);return i!==void 0?new T().resolve(i).promise():this._loadValue(t)},_getPlainItems:function(t){var e=[];t=t||this.option("items")||this._dataSource.items()||[];for(var i=0;i<t.length;i++)t[i]&&t[i].items?e=e.concat(t[i].items):e.push(t[i]);return e},_updateActiveDescendant(){var t,e=this.option("opened"),i=(t=this._list)===null||t===void 0?void 0:t.getFocusedItemId(),n=r("#".concat(i)).length>0,s=e&&n&&i;this.setAria({activedescendant:s||null})},_setSelectedItem:function(t){var e=this._displayValue(t);this.option("selectedItem",Y(t,null)),this.option("displayValue",e)},_displayValue:function(t){return this._displayGetter(t)},_refreshSelected:function(){var t={};this._listItemElements().each(function(e,i){var n=r(i),s=this._valueGetter(n.data(Na)),o=this._isSelectedValue(s,t);o?this._list.selectItem(n):this._list.unselectItem(n)}.bind(this))},_popupShownHandler:function(){this.callBase(),this._setFocusPolicy()},_setFocusPolicy:function(){!this.option("focusStateEnabled")||!this._list||this._list.option("focusedElement",null)},_isSelectedValue:function(t){return this._isValueEquals(t,this.option("value"))},_validateSearchMode:function(){var t=this.option("searchMode"),e=t.toLowerCase();if(!Wa.includes(e))throw gt.Error("E1019",t)},_clearSelectedItem:function(){this.option("selectedItem",null)},_processDataSourceChanging:function(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail(function(){this._isCustomValueAllowed()||this._clearSelectedItem()}.bind(this))},_isCustomValueAllowed:function(){return this.option("displayCustomValue")},reset:function(){this.callBase(),this._clearFilter(),this._clearSelectedItem()},_listItemElements:function(){return this._$list?this._$list.find(Ma):r()},_popupConfig:function(){return d(this.callBase(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})},_renderPopupContent:function(){this.callBase(),this._renderList()},_getKeyboardListeners(){var t=this._canListHaveFocus();return this.callBase().concat([!t&&this._list])},_setAriaTargetForList:function(){this._list._getAriaTarget=this._getAriaTarget.bind(this)},_renderList:function(){this._listId="dx-"+new Li()._value;var t=this._$list=r("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._list=this._createComponent(t,Yi,this._listConfig()),this._refreshList(),this._setAriaTargetForList(),this._list.option("_listAttributes",{role:"combobox"}),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()},_renderPreventBlurOnListClick:function(){var t=p("mousedown","dxDropDownList");c.off(this._$list,t),c.on(this._$list,t,e=>e.preventDefault())},_getControlsAria(){return this._list&&this._listId},_renderOpenedState:function(){this.callBase(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)},_setDefaultAria:function(){this.setAria({haspopup:"listbox",autocomplete:"list"})},_refreshList:function(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()},_shouldRefreshDataSource:function(){var t=!!this._list.option("dataSource");return t!==this._needPassDataSourceToList()},_isDesktopDevice:function(){return S.real().deviceType==="desktop"},_listConfig:function(){var t={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:this.option("noDataText"),encodeNoDataText:this.option("encodeNoDataText"),grouped:this.option("grouped"),wrapItemText:this.option("wrapItemText"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:this.option("itemTemplate"),indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:this.option("groupTemplate"),onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:this._isDesktopDevice()?this.option("hoverStateEnabled"):!1,focusStateEnabled:this._isDesktopDevice()?this.option("focusStateEnabled"):!1};return this._canListHaveFocus()||(t.tabIndex=null),t},_canListHaveFocus:()=>!1,_getDataSource:function(){return this._needPassDataSourceToList()?this._dataSource:null},_dataSourceOptions:function(){return{paginate:!1}},_getGroupedOption:function(){return this.option("grouped")},_dataSourceFromUrlLoadMode:function(){return"raw"},_listContentReadyHandler:function(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._dimensionChanged(),this._contentReadyAction()},_setListOption:function(t,e){this._setWidgetOption("_list",arguments)},_listItemClickAction:function(t){this._listItemClickHandler(t),this._itemClickAction(t)},_listItemClickHandler:_,_setListDataSource:function(){!this._list||(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))},_needPassDataSourceToList:function(){return this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded()},_isMinSearchLengthExceeded:function(){return this._searchValue().toString().length>=this.option("minSearchLength")},_needClearFilter:function(){return this._canKeepDataSource()?!1:this._needPassDataSourceToList()},_canKeepDataSource:function(){var t=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!t&&!this._isLastMinSearchLengthExceeded},_searchValue:function(){return this._input().val()||""},_getSearchEvent:function(){return p(za,this.NAME+"Search")},_getCompositionStartEvent:function(){return p("compositionstart",this.NAME+"CompositionStart")},_getCompositionEndEvent:function(){return p("compositionend",this.NAME+"CompositionEnd")},_getSetFocusPolicyEvent:function(){return p("input",this.NAME+"FocusPolicy")},_renderEvents:function(){this.callBase(),c.on(this._input(),this._getSetFocusPolicyEvent(),()=>{this._setFocusPolicy()}),this._shouldRenderSearchEvent()&&(c.on(this._input(),this._getSearchEvent(),t=>{this._searchHandler(t)}),di&&(c.on(this._input(),this._getCompositionStartEvent(),()=>{this._isTextCompositionInProgress(!0)}),c.on(this._input(),this._getCompositionEndEvent(),t=>{this._isTextCompositionInProgress(void 0),this._searchHandler(t,this._searchValue())})))},_shouldRenderSearchEvent:function(){return this.option("searchEnabled")},_refreshEvents:function(){c.off(this._input(),this._getSearchEvent()),c.off(this._input(),this._getSetFocusPolicyEvent()),di&&(c.off(this._input(),this._getCompositionStartEvent()),c.off(this._input(),this._getCompositionEndEvent())),this.callBase()},_isTextCompositionInProgress:function(t){if(arguments.length)this._isTextComposition=t;else return this._isTextComposition},_searchHandler:function(t,e){if(!this._isTextCompositionInProgress()){if(!this._isMinSearchLengthExceeded()){this._searchCanceled();return}var i=this.option("searchTimeout");i?(this._clearSearchTimer(),this._searchTimer=setTimeout(()=>{this._searchDataSource(e)},i)):this._searchDataSource(e)}},_searchCanceled:function(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()},_searchDataSource:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._searchValue();this._filterDataSource(t)},_filterDataSource:function(t){this._clearSearchTimer();var e=this._dataController;e.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),e.searchOperation(this.option("searchMode")),e.searchValue(t),e.load().done(this._dataSourceFiltered.bind(this,t))},_clearFilter:function(){var t=this._dataController;t.searchValue()&&t.searchValue(null)},_dataSourceFiltered:function(){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()},_shouldOpenPopup:function(){return this._hasItemsToShow()},_refreshPopupVisibility:function(){if(!(this.option("readOnly")||!this._searchValue())){var t=this._shouldOpenPopup();t&&!this._isFocused()||(this.option("opened",t),t&&this._dimensionChanged())}},_dataSourceChangedHandler:function(t){this._dataController.pageIndex()===0?this.option().items=t:this.option().items=this.option().items.concat(t)},_hasItemsToShow:function(){var t=this._dataController,e=t.items()||[],i=e.length,n=this._needPassDataSourceToList();return!!(n&&i)},_clearSearchTimer:function(){clearTimeout(this._searchTimer),delete this._searchTimer},_popupShowingHandler:function(){this._dimensionChanged()},_dimensionChanged:function(){this.callBase(arguments),this._popup&&this._updatePopupDimensions()},_needPopupRepaint:function(){var t=this._dataController,e=t.pageIndex(),i=w(this._pageIndex)&&e<=this._pageIndex||t.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=e,i},_updatePopupDimensions:function(){this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions()},_getMaxHeight:function(){var t=this.$element(),e=this._$customBoundaryContainer,i=t.offset().top-(e?e.offset().top:0),n=A(ci),s=e?Math.min(A(e),n):n,o=Math.max(i,s-i-A(t));return Math.min(.5*s,o)},_clean:function(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,this.callBase()},_dispose:function(){this._clearSearchTimer(),this.callBase()},_setCollectionWidgetOption:function(){this._setListOption.apply(this,arguments)},_setSubmitValue:function(){var t=this.option("value"),e=this._shouldUseDisplayValue(t)?this._displayGetter(t):t;this._getSubmitElement().val(e)},_shouldUseDisplayValue:function(t){return this.option("valueExpr")==="this"&&_e(t)},_optionChanged:function(t){switch(this._dataExpressionOptionChanged(t),t.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(t.name,t.value),this.callBase(t);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(t.name);break;case"displayValue":this.option("text",t.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":t.previousValue!==t.value&&this._selectionChangedAction({selectedItem:t.value});break;default:this.callBase(t)}}}).include(ye,Gi);P("dxDropDownList",qi);var Fa="dx-radiobutton",ui="dx-radiobutton-icon",Ua="dx-radiobutton-icon-dot",Ga="dx-radiobutton-checked",Ka="dx-radiobutton-icon-checked",Xi=Mn.inherit({_supportedKeys:function(){return d(this.callBase(),{space:function(t){t.preventDefault(),this._clickAction({event:t})}})},_getDefaultOptions:function(){return d(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,value:!1})},_canValueBeChangedByClick:function(){return!0},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return S.real().deviceType==="desktop"&&!S.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this.$element().addClass(Fa)},_initMarkup:function(){this.callBase(),this._renderIcon(),this._renderCheckedState(this.option("value")),this._renderClick(),this.setAria("role","radio")},_renderIcon:function(){this._$icon=r("<div>").addClass(ui),r("<div>").addClass(Ua).appendTo(this._$icon),this.$element().append(this._$icon)},_renderCheckedState:function(t){this.$element().toggleClass(Ga,t).find("."+ui).toggleClass(Ka,t),this.setAria("checked",t)},_renderClick:function(){var t=p(Mt,this.NAME);this._clickAction=this._createAction(function(e){this._clickHandler(e.event)}.bind(this)),c.off(this.$element(),t),c.on(this.$element(),t,function(e){this._clickAction({event:e})}.bind(this))},_clickHandler:function(t){this._saveValueChangeEvent(t),this.option("value",!0)},_optionChanged:function(t){switch(t.name){case"value":this._renderCheckedState(t.value),this.callBase(t);break;default:this.callBase(t)}}});P("dxRadioButton",Xi);var Ce="dxListEditDecorator",Ya=p(fe,Ce),qa=p(ve,Ce),Xa=p(zt,Ce),ja=tt.inherit({ctor:function(t){this._list=t,this._init()},_init:_,_shouldHandleSwipe:!1,_attachSwipeEvent:function(t){var e={itemSizeFunc:function(){return this._clearSwipeCache&&(this._itemWidthCache=L(this._list.$element()),this._clearSwipeCache=!1),this._itemWidthCache}.bind(this)};c.on(t.$itemElement,Ya,e,this._itemSwipeStartHandler.bind(this)),c.on(t.$itemElement,qa,this._itemSwipeUpdateHandler.bind(this)),c.on(t.$itemElement,Xa,this._itemSwipeEndHandler.bind(this))},_itemSwipeStartHandler:function(t){var e=r(t.currentTarget);if(e.is(".dx-state-disabled, .dx-state-disabled *")){t.cancel=!0;return}clearTimeout(this._list._inkRippleTimer),this._swipeStartHandler(e,t)},_itemSwipeUpdateHandler:function(t){var e=r(t.currentTarget);this._swipeUpdateHandler(e,t)},_itemSwipeEndHandler:function(t){var e=r(t.currentTarget);this._swipeEndHandler(e,t),this._clearSwipeCache=!0},beforeBag:_,afterBag:_,_commonOptions:function(){return{activeStateEnabled:this._list.option("activeStateEnabled"),hoverStateEnabled:this._list.option("hoverStateEnabled"),focusStateEnabled:this._list.option("focusStateEnabled")}},modifyElement:function(t){this._shouldHandleSwipe&&(this._attachSwipeEvent(t),this._clearSwipeCache=!0)},afterRender:_,handleClick:_,handleKeyboardEvents:_,handleEnterPressing:_,handleContextMenu:_,_swipeStartHandler:_,_swipeUpdateHandler:_,_swipeEndHandler:_,visibilityChange:_,getExcludedSelectors:_,dispose:_}),_i="dx-list-select-decorator-enabled",Za="dx-list-select-all",Qa="dx-list-select-all-checkbox",Ja="dx-list-select-all-label",tr="dx-list-select-checkbox-container",er="dx-list-select-checkbox",ir="dx-list-select-radiobutton-container",nr="dx-list-select-radiobutton",sr="dx-state-focused",pi=p(Mt,"dxListEditDecorator");Gs("selection","default",ja.inherit({_init:function(){this.callBase.apply(this,arguments);var t=this._list.option("selectionMode");this._singleStrategy=t==="single",this._containerClass=this._singleStrategy?ir:tr,this._controlClass=this._singleStrategy?nr:er,this._controlWidget=this._singleStrategy?Xi:Re,this._list.$element().addClass(_i)},beforeBag:function(t){var e=t.$itemElement,i=t.$container.addClass(this._containerClass),n=r("<div>").addClass(this._controlClass).appendTo(i);new this._controlWidget(n,d(this._commonOptions(),{value:this._isSelected(e),focusStateEnabled:!1,hoverStateEnabled:!1,onValueChanged:function(s){s.event&&this._list._saveSelectionChangeEvent(s.event),this._processCheckedState(e,s.value),s.event&&s.event.stopPropagation()}.bind(this)}))},modifyElement:function(t){this.callBase.apply(this,arguments);var e=t.$itemElement,i=this._controlWidget.getInstance(e.find("."+this._controlClass));c.on(e,"stateChanged",function(n,s){i.option("value",s)}.bind(this))},_updateSelectAllState:function(){!this._$selectAll||this._selectAllCheckBox.option("value",this._list.isSelectAll())},afterRender:function(){this._list.option("selectionMode")==="all"&&(this._$selectAll?this._updateSelectAllState():this._renderSelectAll())},handleKeyboardEvents:function(t,e){var i=!e,n=this._list,s=this._$selectAll,o=n._getLastItemIndex(),a=e&&t===0||i&&t===o,l=!!s;return l&&a?(n.option("focusedElement",s),n.scrollToItem(n.option("focusedElement")),!0):!1},handleEnterPressing:function(t){if(this._$selectAll&&this._$selectAll.hasClass(sr))return t.target=this._$selectAll.get(0),this._list._saveSelectionChangeEvent(t),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value")),!0},_renderSelectAll:function(){var t=this._$selectAll=r("<div>").addClass(Za),e=this._list,i=e._supportedKeys().downArrow.bind(e);this._selectAllCheckBox=e._createComponent(r("<div>").addClass(Qa).appendTo(t),Re,{focusStateEnabled:!1,hoverStateEnabled:!1}),this._selectAllCheckBox.registerKeyHandler("downArrow",i),r("<div>").addClass(Ja).text(this._list.option("selectAllText")).appendTo(t),this._list.itemsContainer().prepend(t),this._updateSelectAllState(),this._attachSelectAllHandler()},_attachSelectAllHandler:function(){this._selectAllCheckBox.option("onValueChanged",this._selectAllHandler.bind(this)),c.off(this._$selectAll,pi),c.on(this._$selectAll,pi,this._selectAllClickHandler.bind(this))},_selectAllHandler:function(t){t.event&&t.event.stopPropagation();var e=this._selectAllCheckBox.option("value");t.event&&this._list._saveSelectionChangeEvent(t.event),e===!0?this._selectAllItems():e===!1&&this._unselectAllItems(),this._list._createActionByOption("onSelectAllValueChanged")({value:e})},_checkSelectAllCapability:function(){var t=this._list,e=t._dataController;return t.option("selectAllMode")==="allPages"&&t.option("grouped")&&!e.group()?(gt.log("W1010"),!1):!0},_selectAllItems:function(){!this._checkSelectAllCapability()||this._list._selection.selectAll(this._list.option("selectAllMode")==="page")},_unselectAllItems:function(){!this._checkSelectAllCapability()||this._list._selection.deselectAll(this._list.option("selectAllMode")==="page")},_selectAllClickHandler:function(t){this._list._saveSelectionChangeEvent(t),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value"))},_isSelected:function(t){return this._list.isItemSelected(t)},_processCheckedState:function(t,e){e?this._list.selectItem(t):this._list.unselectItem(t)},dispose:function(){this._disposeSelectAll(),this._list.$element().removeClass(_i),this.callBase.apply(this,arguments)},_disposeSelectAll:function(){this._$selectAll&&(this._$selectAll.remove(),this._$selectAll=null)}}));var or=".dx-state-disabled",ar="dx-selectbox",rr="dx-selectbox-popup",lr="dx-selectbox-container",fi="dx-selectbox-popup-wrapper",ji=qi.inherit({_supportedKeys:function(){var t=this,e=this.callBase(),i=function(s){var o=this._isEditable();o?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(s.preventDefault(),this.reset()),this._savedTextRemoveEvent=s,this._preventSubstitution=!0},n=function(){t.option("searchEnabled")&&t._valueSubstituted()&&t._searchHandler()};return d({},e,{tab:function(){this.option("opened")&&this.option("applyValueMode")==="instantly"&&this._resetCaretPosition(!0),e.tab&&e.tab.apply(this,arguments),this._cancelSearchIfNeed()},upArrow:function(s){if(e.upArrow&&e.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(s),!0},downArrow:function(s){if(e.downArrow&&e.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(s),!0},leftArrow:function(){n(),e.leftArrow&&e.leftArrow.apply(this,arguments)},rightArrow:function(){n(),e.rightArrow&&e.rightArrow.apply(this,arguments)},home:function(){n(),e.home&&e.home.apply(this,arguments)},end:function(){n(),e.end&&e.end.apply(this,arguments)},escape:function(){var s=e.escape&&e.escape.apply(this,arguments);return this._cancelEditing(),s!=null?s:!0},enter:function(s){var o=this.option("opened"),a=this._input().val().trim(),l=a&&this._list&&!this._list.option("focusedElement");if(!a&&w(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(s),this.option({selectedItem:null,value:null}),this.close();else{if(this.option("acceptCustomValue"))return s.preventDefault(),l&&(o&&this._toggleOpenState(),this._valueChangeEventHandler(s)),o;if(e.enter&&e.enter.apply(this,arguments))return o}},space:function(s){var o=this.option("opened"),a=this.option("searchEnabled"),l=this.option("acceptCustomValue");if(!(!o||a||l))return s.preventDefault(),this._valueChangeEventHandler(s),!0},backspace:i,del:i})},_getDefaultOptions:function(){return d(this.callBase(),{placeholder:E.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",valueChangeEvent:"change",acceptCustomValue:!1,onCustomItemCreating:function(t){w(t.customItem)||(t.customItem=t.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})},_init:function(){this.callBase(),this._initCustomItemCreatingAction()},_initMarkup:function(){this.$element().addClass(ar),this._renderTooltip(),this.callBase(),this._$container.addClass(lr)},_createPopup:function(){this.callBase(),this._popup.$element().addClass(rr),this._popup.$overlayContent().attr("tabindex",-1)},_popupWrapperClass:function(){return this.callBase()+" "+fi},_setDeprecatedOptions(){this.callBase(),d(this._deprecatedOptions,{valueChangeEvent:{since:"22.2",alias:"customItemCreateEvent"}})},_cancelEditing:function(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))},_renderOpenedState:function(){this.callBase(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())},_focusSelectedElement:function(){var t,e=this._searchValue();if(!e){this._focusListElement(null);return}var{items:i,selectedItem:n}=this.option(),s=this._list._itemElements(),o=(t=i==null?void 0:i.indexOf(n))!==null&&t!==void 0?t:-1,a=o!==-1&&!this._isCustomItemSelected()?s.eq(o):null;this._focusListElement(a)},_renderFocusedElement:function(){if(!!this._list){var t=this._searchValue();if(!t||this.option("acceptCustomValue")){this._focusListElement(null);return}var e=this._list._itemElements(),i=e.not(or).eq(0);this._focusListElement(i)}},_focusListElement:function(t){this._preventInputValueRender=!0,this._list.option("focusedElement",x(t)),delete this._preventInputValueRender},_scrollToSelectedItem:function(){this._list&&this._list.scrollToItem(this._list.option("selectedItem"))},_listContentReadyHandler:function(){this.callBase();var t=this._dataController.paginate();t&&this._needPopupRepaint()||this._scrollToSelectedItem()},_renderValue:function(){return this._renderInputValue(),this._setSubmitValue(),new T().resolve()},_renderInputValue:function(){return this.callBase().always(function(){this._renderInputValueAsync()}.bind(this))},_renderInputValueAsync:function(){this._renderTooltip(),this._renderInputValueImpl().always(function(){this._refreshSelected()}.bind(this))},_renderInputValueImpl:function(){return this._renderField(),new T().resolve()},_setNextItem:function(t){var e=this._calcNextItem(t),i=this._valueGetter(e);this._setValue(i)},_setNextValue:function(t){var e=this._dataController.isLoaded()?new T().resolve():this._dataController.load();e.done(function(){var i=this._getSelectedIndex(),n=this._dataController.pageSize(),s=this._dataController.isLastPage(),o=i===this._items().length-1;this._saveValueChangeEvent(t);var a=ce(t)==="downArrow"?1:-1;n&&!s&&o&&a>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,a))):this._setNextItem(a)}.bind(this))},_setSelectedItem:function(t){var e=!this._isCustomValueAllowed()&&t===void 0;this.callBase(e?null:t),!e&&(!this._isEditable()||this._isCustomItemSelected())&&this._setListOption("selectedItem",this.option("selectedItem"))},_isCustomValueAllowed:function(){return this.option("acceptCustomValue")||this.callBase()},_displayValue:function(t){return t=!w(t)&&this._isCustomValueAllowed()?this.option("value"):t,this.callBase(t)},_listConfig:function(){var t=d(this.callBase(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this)});return this.option("showSelectionControls")&&d(t,{showSelectionControls:!0,selectionByClick:!0}),t},_listFocusedItemChangeHandler:function(t){if(!this._preventInputValueRender){var e=t.component,i=r(e.option("focusedElement")),n=e._getItemData(i);this._updateField(n)}},_updateField:function(t){var e=this._getTemplateByOption("fieldTemplate");if(!(e&&this.option("fieldTemplate"))){var i=this._displayGetter(t);this.option("text",i),this._renderDisplayText(i);return}this._renderField()},_getSelectionChangeHandler:function(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):_},_selectionChangeHandler:function(t){f(t.addedItems||[],function(e,i){this._setValue(this._valueGetter(i))}.bind(this))},_getActualSearchValue:function(){return this._dataController.searchValue()},_toggleOpenState:function(t){if(!this.option("disabled")){if(t=arguments.length?t:!this.option("opened"),!t&&!this._shouldClearFilter()&&this._restoreInputText(!0),this._wasSearch()&&t){this._wasSearch(!1);var e=this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded();if(e&&this._dataController.getDataSource()){if(this._searchTimer)return;var i=this._getActualSearchValue();i&&this._wasSearch(!0),this._filterDataSource(i||null)}else this._setListOption("items",[])}t&&this._scrollToSelectedItem(),this.callBase(t)}},_renderTooltip:function(){this.option("tooltipEnabled")&&this.$element().attr("title",this.option("displayValue"))},_renderDimensions:function(){this.callBase(),this._dimensionChanged()},_isValueEqualInputText:function(){var t=this.option("selectedItem");if(t===null)return!1;var e=this._displayGetter(t),i=e?String(e):"",n=this._searchValue();return i===n},_popupHidingHandler:function(){this._isValueEqualInputText()&&this._cancelEditing(),this.callBase()},_popupHiddenHandler:function(){this.callBase(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))},_restoreInputText:function(t){this.option("readOnly")||this._loadItemDeferred&&this._loadItemDeferred.always(function(){var{acceptCustomValue:e,text:i,selectedItem:n}=this.option();if(e){!t&&!this._isValueChanging&&(this._updateField(n!=null?n:this._createCustomItem(i)),this._clearFilter());return}if(this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")){this._clearTextValue();return}this._isValueEqualInputText()||this._renderInputValue().always(function(s){var o=Y(s,n);this._setSelectedItem(o),this._updateField(o),this._clearFilter()}.bind(this))}.bind(this))},_valueChangeEventIncludesBlur:function(){var t=this.option(this._getValueChangeEventOptionName());return t.includes("blur")},_isPreventedFocusOutEvent:function(t){return this._preventNestedFocusEvent(t)||this._valueChangeEventIncludesBlur()},_focusOutHandler:function(t){if(!this._isPreventedFocusOutEvent(t)){var e=this._isOverlayNestedTarget(t.relatedTarget);e||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(t)}t.target=this._input().get(0),this.callBase(t)},_cancelSearchIfNeed:function(t){var{searchEnabled:e}=this.option(),i=this._isOverlayNestedTarget(t==null?void 0:t.relatedTarget),n=this._wasSearch()&&e&&!i;if(n){var s,o=(s=this._popup)===null||s===void 0?void 0:s._hideAnimationProcessing;this._clearSearchTimer(),o?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}},_shouldCancelSearch:function(t){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=t},_isOverlayNestedTarget:function(t){return!!r(t).closest(".".concat(fi)).length},_clearTextValue:function(){this.option("selectedItem")&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent},_shouldOpenPopup:function(){return this._needPassDataSourceToList()&&this._wasSearch()},_isFocused:function(){var t=vt.getActiveElement(this.element());return this.callBase()&&r(t).closest(this._input()).length>0},_getValueChangeEventOptionName:function(){return"customItemCreateEvent"},_renderValueChangeEvent:function(){this._isEditable()&&this.callBase()},_fieldRenderData:function(){var t=this._list&&this.option("opened")&&r(this._list.option("focusedElement"));return t&&t.length?this._list._getItemData(t):this.option("selectedItem")},_isSelectedValue:function(t){return this._isValueEquals(t,this.option("value"))},_shouldCloseOnItemClick:function(){return!(this.option("showSelectionControls")&&this.option("selectionMode")!=="single")},_listItemClickHandler:function(t){var e=this._getCurrentValue();this._focusListElement(r(t.itemElement)),this._saveValueChangeEvent(t.event),this._completeSelection(this._valueGetter(t.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&e===this._valueGetter(t.itemData)&&this._updateField(t.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()},_shouldClearFilter:function(){return this._wasSearch()},_completeSelection:function(t){this._setValue(t)},_loadItem:function(t,e){var i=this,n=new T;return this.callBase(t,e).done(function(s){n.resolve(s)}.bind(this)).fail(function(s){if(!(s!=null&&s.shouldSkipCallback)){var o=i.option("selectedItem");i.option("acceptCustomValue")&&t===i._valueGetter(o)?n.resolve(o):n.reject()}}.bind(this)),n.promise()},_loadInputValue:function(t,e){return this._loadItemDeferred=this._loadItem(t).always(e),this._loadItemDeferred},_isCustomItemSelected:function(){var t=this.option("selectedItem"),e=this._searchValue(),i=this._displayGetter(t);return!i||e!==i.toString()},_valueChangeEventHandler:function(t){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(t))},_initCustomItemCreatingAction:function(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")},_createCustomItem:function(t){var e={text:t},i=this._customItemCreatingAction(e),n=Y(i,e.customItem);return w(i)&&$e.log("W0015","onCustomItemCreating","customItem"),n},_customItemAddedHandler:function(t){var e=this._searchValue(),i=this._createCustomItem(e);if(this._saveValueChangeEvent(t),i===void 0)throw this._renderValue(),$e.Error("E0121");Nn(i)?Vn(i).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(i)},_setCustomItem:function(t){this._disposed||(t=t||null,this.option("selectedItem",t),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(t)),this._renderDisplayText(this._displayGetter(t)),this._isValueChanging=!1)},_clearValueHandler:function(t){return this._preventFiltering=!0,this.callBase(t),this._searchCanceled(),!1},_wasSearch:function(t){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=t},_searchHandler:function(){if(this._preventFiltering){delete this._preventFiltering;return}this._needPassDataSourceToList()&&this._wasSearch(!0),this.callBase(arguments)},_dataSourceFiltered:function(t){this.callBase(),t!==null&&(this._renderInputSubstitution(),this._renderFocusedElement())},_valueSubstituted:function(){var t=this._input().get(0),e=this._searchValue().length,i=t.selectionStart===0&&t.selectionEnd===e,n=t.selectionStart!==t.selectionEnd,s=e===t.selectionEnd;return this._wasSearch()&&n&&!i&&s&&this._shouldSubstitutionBeRendered()},_shouldSubstitutionBeRendered:function(){return!this._preventSubstitution&&this.option("searchEnabled")&&!this.option("acceptCustomValue")&&this.option("searchMode")==="startswith"},_renderInputSubstitution:function(){if(!this._shouldSubstitutionBeRendered()){delete this._preventSubstitution;return}var t=this._list&&this._getPlainItems(this._list.option("items"))[0];if(!!t){var e=this._input(),i=e.val().length;if(i!==0){var n=e.get(0),s=this._displayGetter(t).toString();n.value=s,this._caret({start:i,end:s.length})}}},_dispose:function(){this._renderInputValueAsync=_,delete this._loadItemDeferred,this.callBase()},_optionChanged:function(t){switch(t.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:this.callBase(t)}}});P("dxSelectBox",ji);var ur=Object.freeze(Object.defineProperty({__proto__:null,default:ji},Symbol.toStringTag,{value:"Module"}));export{Oo as A,va as C,qo as D,Fi as L,wi as P,Bi as R,ji as S,ps as T,Ha as a,ge as b,Xo as c,cr as d,Yi as e,Ui as f,Yo as g,ur as h,Ki as i,ns as j,We as k,Ps as l,fe as m,ve as n,zt as o,dr as p,xi as q,hi as s,ga as t};
