import{ae as n,o as s,e as c,f as t,u as a,w as l,c as d,C as m}from"./app.d1109b7e.js";import p from"./ModalSocietaSportiva.6f10af09.js";import{D as u,a as f,b as h,c as o,d as _}from"./data-grid.23300702.js";import{l as g}from"./check-box.40c13dc7.js";import"./index.a564909e.js";import{_ as v}from"./plugin-vue_export-helper.21dcd24c.js";import"./response.70bff4ea.js";import"./check_box.f0a19422.js";import"./select-box.564c7aaa.js";import"./select_box.12d15f3d.js";import"./number-box.2713ac2d.js";import"./number_box.9a624177.js";import"./text-area.6c47c957.js";import"./data_source.e7896b86.js";import"./date_box.7abd4f86.js";import"./draggable.d22a0d73.js";const w={emits:["notify"],data(){return{fetching:!1,modal_societa_id:null,ricerca:null,errors:null,societaSportive:[]}},computed:{disabledElement(){return this.fetching}},async created(){g("it-IT"),await axios.get("api/sphere/societa-sportiva").then(e=>{this.societaSportive=e.data})},methods:{timezoneFixer(e){return n(e.value)},societaSalvata(e){this.societaSportive.push(e),this.$refs.griglia.instance.refresh(),this.$emit("notify","success","Societ\xE0 salvata con successo"),this.modal_societa_id=null},async societaModificata(e){await axios.get("api/sphere/societa-sportiva").then(i=>{this.societaSportive=i.data}),this.$emit("notify","success","Societ\xE0 modificata con successo"),this.modal_societa_id=null},errorFor(e){return!!(this.errors!==null&&this.errors[e])},onRowPrepared(e){e.rowElement.className+=" hover:bg-gray-300"},openContextMenu(e){e.row&&this.$refs.griglia.instance.selectRows([e.row.key]),e.items=[{visible:e.rowIndex>-1,text:"Apri",icon:"showpanel",onItemClick:()=>{this.apriSocieta(e.row.data.id)}},{visible:e.rowIndex>-1,text:"Elimina",icon:"trash",onItemClick:()=>{this.confermaEliminaSocieta(e.rowIndex)}},{text:"Nuovo",icon:"plus",onItemClick:()=>{this.nuovaSocieta()}}]},aggiornaRiga(e){},onRowDblClick(e){this.apriSocieta(e.data.id)},confermaEliminaSocieta(e){this.$refs.griglia.instance.option({"editing.texts.confirmDeleteMessage":"Sei sicuro di voler eliminare la societ\xE0 selezionata?"}),this.$refs.griglia.instance.deleteRow(e)},deleteSocieta(e){e.cancel=axios.delete(`api/sphere/societa-sportiva/${e.data.id}`).then(i=>(this.$emit("notify","success","Societ\xE0 eliminata"),!1)).catch(i=>(this.$emit("notify","error","Errore","Eliminazione fallita"),!0))},nuovaSocieta(){this.modal_societa_id="new"},apriSocieta(e){this.modal_societa_id=e},async ricercaSocieta(){this.fetching=!0,await axios.post("api/sphere/ricerca-societa",{ricerca:this.ricerca}).then(e=>{this.societaSportive=e.data}).catch(e=>{}),this.fetching=!1}}},S=Object.assign(w,{__name:"FormSocieta",setup(e){return(i,r)=>(s(),c("div",null,[t(a(u),{id:"griglia",ref:"griglia","data-source":i.societaSportive,"key-expr":"id","allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!1,"column-min-width":50,"column-resizing-mode":"widget","row-alternation-enabled":!0,"show-row-lines":!0,"hover-state-enabled":!0,onContextMenuPreparing:i.openContextMenu,onRowPrepared:i.onRowPrepared,onRowDblClick:i.onRowDblClick,onRowRemoving:i.deleteSocieta},{default:l(()=>[t(a(f),{mode:"single"}),t(a(h),{enabled:!0}),t(a(o),{"data-field":"id"}),t(a(o),{"data-field":"ragione_sociale",caption:"Ragione sociale"}),t(a(o),{"data-field":"indirizzo"}),t(a(o),{"data-field":"civico"}),t(a(o),{"data-field":"localita.nome",caption:"Localit\xE0"}),t(a(o),{"data-field":"localita.sigla_provincia",caption:"Provincia"}),t(a(o),{"data-field":"partita_iva",caption:"P. IVA"}),t(a(o),{"data-field":"codice_fiscale",caption:"Codice Fiscale"}),t(a(o),{"data-field":"created_at","customize-text":i.timezoneFixer},null,8,["customize-text"]),t(a(o),{"data-field":"updated_at","customize-text":i.timezoneFixer},null,8,["customize-text"]),t(a(_),{mode:"infinite"})]),_:1},8,["data-source","onContextMenuPreparing","onRowPrepared","onRowDblClick","onRowRemoving"]),i.modal_societa_id?(s(),d(p,{key:0,"societa-id":i.modal_societa_id,onClose:r[0]||(r[0]=x=>i.modal_societa_id=null),onStore:i.societaSalvata,onUpdate:i.societaModificata},null,8,["societa-id","onStore","onUpdate"])):m("",!0)]))}});var V=v(S,[["__scopeId","data-v-d3f0fddc"]]);export{V as default};
