import{b as l,r as f,o as _,k as g,l as t,u as a,w as d}from"./app.91faff10.js";import{D as x,a as v,c as i,h as z,j as b,k as D}from"./data-grid.93ce6c9b.js";import{D as y}from"./select-box.9cc7c130.js";import{b4 as c,b5 as E}from"./check_box.bd4929f9.js";import"./select_box.e8817efd.js";import"./date_box.745fde92.js";import"./number_box.976ffa07.js";import"./draggable.67b3fe5e.js";const S=l("div",{class:"master-detail-caption"},"Prestazioni associate",-1),k={class:"flex my-3"},$={class:"w-full md:w-1/2"},A={class:"w-full md:w-1/2"},I={__name:"PrestazioniListinoMedsportTemplate",props:{templateData:Object},setup(m){const s=m,r=f(null),p=new c({key:"id",load:()=>axios.get("api/sphere/medsport/prestazione").then(e=>e.data).catch(e=>{throw new Error("Errore caricamento")}),errorHandler:e=>{console.log(e.message)}}),n={store:new c({key:"id",load:()=>axios.get(`api/sphere/medsport/prestazioni-listino/${s.templateData.data.id}`).then(e=>e.data).catch(e=>{throw new Error("Errore caricamento")}),insert:e=>axios.post(`api/sphere/medsport/prestazioni-listino/add/${s.templateData.data.id}/${e}`).then(o=>o.data).catch(o=>{throw new Error("Errore caricamento")}),remove:e=>axios.delete(`api/sphere/medsport/prestazioni-listino/remove/${s.templateData.data.id}/${e}`),errorHandler:e=>{console.log(e.message)},onPush:e=>{axios.post(`api/sphere/medsport/prestazioni-listino/add/${s.templateData.data.id}/${e[0].data.id}`).then(o=>o.data).catch(o=>{throw new Error("Errore caricamento")})}}),reshapeOnPush:!0};function u(){r.value&&(n.store.push([{type:"insert",data:r.value,index:-1}]),r.value=null)}function h(e){return e?'<div class="flex gap-2"><span class="truncate capitalize w-1/5">'+e.codice+'</span> <span class="uppercase">'+e.nome+"</span></div>":"<div />"}return(e,o)=>(_(),g("div",null,[S,l("div",k,[l("div",$,[t(a(y),{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=w=>r.value=w),"search-enabled":!0,"data-source":a(p),"search-mode":"contains","search-expr":["codice","nome"],"search-timeout":100,"show-data-before-search":!0,"display-expr":"nome",placeholder:"Seleziona una prestazione da associare a questa visita","item-template":h},null,8,["modelValue","data-source"])]),l("div",A,[t(a(E),{width:"100%",text:"Aggiungi",type:"success",icon:"Aggiungi","styling-mode":"outlined",disabled:!r.value,onClick:u},null,8,["disabled"])])]),t(a(x),{"data-source":n,"show-borders":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0,"column-min-width":50,"column-resizing-mode":"widget","row-alternation-enabled":!0,"show-row-lines":!0,"hover-state-enabled":!0,width:"100%"},{default:d(()=>[t(a(v),{mode:"single"}),t(a(i),{"data-field":"id","allow-editing":!1}),t(a(i),{"data-field":"codice"}),t(a(i),{"data-field":"nome"}),t(a(i),{"data-field":"rimborso_asl","allow-editing":!1,caption:"Rimborso ASL"}),t(a(z),{mode:"row","allow-deleting":!0}),t(a(b),{"recalculate-while-editing":!0},{default:d(()=>[t(a(D),{column:"rimborso_asl","summary-type":"sum","display-format":"Totale rimborso ASL \u20AC {0}","show-in-column":"rimborso_asl"})]),_:1})]),_:1})]))}};export{I as default};
