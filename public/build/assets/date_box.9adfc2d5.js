import{ag as re,c as _,cE as Ft,A as v,O as at,a as T,K as L,au as ue,b6 as B,cF as Pt,i as f,az as Rt,aZ as Ve,cG as Ht,cH as $t,$ as l,r as h,ak as Wt,C as b,H as m,cI as Yt,ax as Me,a3 as ae,F as xe,m as E,P as Ae,R as zt,M as Ut,E as be,l as N,I as Z,X as M,cJ as ne,a4 as Kt,y as Ee,ay as se,a2 as Y,p as nt,G as Zt,u as W,be as rt,cA as qt,at as Gt,am as Xt,Q as Te,aR as jt,T as st,o as he,cK as Be,cL as Qt,cM as Jt,cB as ei,ct as ti,cN as pe,al as ii,a7 as ai,L as ni,J as ke,bg as ri,cb as si,cO as oi,b8 as li,s as ui,cP as hi}from"./check_box.a3b61762.js";import{m as di,n as ci,o as _i,D as Ne,d as pi,p as ve,b as vi,S as fi,e as mi,l as gi,q as Di}from"./select_box.d813d406.js";import{N as Le}from"./number_box.ef233ea9.js";var Fe=e=>e.getMonth()+1,Pe=(e,t)=>{var i=e.getDate(),a=G("M",e),n=re(parseInt(t),a.min,a.max);e.setMonth(n-1,1);var{min:r,max:s}=G("dM",e),u=re(i,r,s);e.setDate(u)},Ci={a:e=>e.getHours()<12?0:1,E:"getDay",y:"getFullYear",M:Fe,L:Fe,d:"getDate",H:"getHours",h:"getHours",m:"getMinutes",s:"getSeconds",S:"getMilliseconds"},yi=_({},Ft(),{a:(e,t)=>{var i=e.getHours(),a=i>=12;a!==!!parseInt(t)&&e.setHours((i+12)%24)},d:(e,t)=>{var i=G("dM",e).max;t>i&&e.setMonth(e.getMonth()+1),e.setDate(t)},h:(e,t)=>{var i=e.getHours()>=12;e.setHours(+t%12+(i?12:0))},M:Pe,L:Pe,E:(e,t)=>{t<0||e.setDate(e.getDate()-e.getDay()+parseInt(t))},y:(e,t)=>{var i=e.getFullYear(),a=String(t).length,n=String(G("y",e).max).length,r=parseInt(String(i).substr(0,n-a)+t);e.setFullYear(r)}}),wi=e=>Ci[e]||(()=>e),xi=(e,t)=>{for(var i=t.regexp.exec(e),a=0,n=0,r=[],s=function(c){a=n,n=a+i[c].length;var p=t.patterns[c-1].replace(/^'|'$/g,""),V=wi(p[0]);r.push({index:c-1,isStub:p===i[c],caret:{start:a,end:n},pattern:p,text:i[c],limits:function(){for(var S=arguments.length,g=new Array(S),J=0;J<S;J++)g[J]=arguments[J];return G(p[0],...g)},setter:yi[p[0]]||v,getter:V})},u=1;u<i.length;u++)s(u);return r},G=(e,t,i)=>{var a={y:{min:0,max:9999},M:{min:1,max:12},L:{min:1,max:12},d:{min:1,max:31},dM:{min:1,max:new Date(t.getFullYear(),t.getMonth()+1,0).getDate()},E:{min:0,max:6},H:{min:0,max:23},h:{min:0,max:23},m:{min:0,max:59},s:{min:0,max:59},S:{min:0,max:999},a:{min:0,max:1}};return a[i||e]||a.getAmPm},Ai=(e,t)=>{for(var i=0;i<e.length;i++){var a=e[i].caret.end>=t;if(!e[i].isStub&&a)return i}return null},Ti={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,quarter:7776e6,year:31536e6};function de(e){return Ti[e]}var X=7,Re=4,He=7,$e=52,q=["millisecond","second","minute","hour","day","week","month","quarter","year"],Si=function(e,t,i){var a=t.getTime()-e.getTime(),n=de(i)||1;return Math.floor(a/n)},Ii=function(e,t){var i=ce(e);switch(i){case"millisecond":return"second";case"second":return"minute";case"minute":return"hour";case"hour":return"day";case"day":return t?"week":"month";case"week":return"month";case"month":return"quarter";case"quarter":case"year":return"year";default:return 0}},ot=function(e){var t,i,a,n=["millisecond","second","minute","hour","day","month","year"],r={};for(t=n.length-1;t>=0;t--)a=n[t],i=Math.floor(e/de(a)),i>0&&(r[a+"s"]=i,e-=oe(a,i));return r},Vi=function(e){var t=0;return at(e)&&T(e,function(i,a){t+=oe(i.substr(0,i.length-1),a)}),L(e)&&(t=oe(e,1)),t};function oe(e,t){return de(e)*t}function ce(e){var t=-1,i;return L(e)?e:at(e)?(T(e,function(a,n){for(i=0;i<q.length;i++)n&&(a===q[i]+"s"||a===q[i])&&t<i&&(t=i)}),q[t]):""}var Mi={millisecond:"millisecond",second:"longtime",minute:"shorttime",hour:"shorttime",day:"day",week:"day",month:"month",quarter:"quarter",year:"year"};function bi(e){return Mi[ce(e)]||""}var lt=function(e){return Math.floor(e/3)},ut=function(e){return 3*lt(e)};function ht(e,t,i,a){e=new Date(e.getTime());var n=new Date(e.getTime()),r,s,u=ce(t);switch(u){case"second":e=new Date(1e3*Math.floor(n.getTime()/1e3));break;case"minute":e=new Date(6e4*Math.floor(n.getTime()/6e4));break;case"hour":e=new Date(36e5*Math.floor(n.getTime()/36e5));break;case"year":e.setMonth(0);case"month":e.setDate(1);case"day":e.setHours(0,0,0,0);break;case"week":e=ft(e,a||0),e.setHours(0,0,0,0);break;case"quarter":r=ut(e.getMonth()),s=e.getMonth(),e.setDate(1),e.setHours(0,0,0,0),s!==r&&e.setMonth(r)}return i&&u!=="hour"&&u!=="minute"&&u!=="second"&&Dt(n,e),e}function dt(e){return ht(e,"day")}var Ei=function(e){var t=dt(e);return t.setDate(t.getDate()+1),new Date(t.getTime()-1)},Bi=function(e,t){var i=0,a={year:e.getFullYear()!==t.getFullYear(),month:e.getMonth()!==t.getMonth(),day:e.getDate()!==t.getDate(),hour:e.getHours()!==t.getHours(),minute:e.getMinutes()!==t.getMinutes(),second:e.getSeconds()!==t.getSeconds(),millisecond:e.getMilliseconds()!==t.getMilliseconds()};return T(a,function(n,r){r&&i++}),i===0&&Ct(e,t)!==0&&(a.hour=!0,i++),a.count=i,a};function ct(e,t,i){var a=new Date(e.getTime()),n=L(t)?pt(t.toLowerCase()):ue(t)?ot(t):t;return n.years&&a.setFullYear(a.getFullYear()+n.years*i),n.quarters&&a.setMonth(a.getMonth()+3*n.quarters*i),n.months&&a.setMonth(a.getMonth()+n.months*i),n.weeks&&a.setDate(a.getDate()+7*n.weeks*i),n.days&&a.setDate(a.getDate()+n.days*i),n.hours&&a.setTime(a.getTime()+36e5*n.hours*i),n.minutes&&a.setTime(a.getTime()+6e4*n.minutes*i),n.seconds&&a.setTime(a.getTime()+1e3*n.seconds*i),n.milliseconds&&a.setTime(a.getTime()+n.milliseconds*i),a}var _t=function(e,t,i){var a=i?-1:1;return B(e)?ct(e,t,a):Pt(e+t*a,t)},Oi=function(e,t,i){var a=[],n;for(a.push(B(e)?new Date(e.getTime()):e),n=e;n<t;)n=_t(n,i),a.push(n);return a},ki=function(e,t){if(e==="month")return A(t.getFullYear(),t.getMonth(),1);if(e==="year")return A(t.getFullYear(),0,t.getDate());if(e==="decade")return A(Q(t),t.getMonth(),t.getDate());if(e==="century")return A(j(t),t.getMonth(),t.getDate())},Ni=function(e,t){if(e==="month")return A(t.getFullYear(),t.getMonth(),le(t));if(e==="year")return A(t.getFullYear(),11,t.getDate());if(e==="decade")return A(Q(t)+9,t.getMonth(),t.getDate());if(e==="century")return A(j(t)+90,t.getMonth(),t.getDate())},Li=function(e,t){var i=A(t.getFullYear(),t.getMonth(),1);return e==="month"||(i.setMonth(0),e==="year")||(e==="decade"&&i.setFullYear(Q(t)),e==="century"&&i.setFullYear(j(t))),i},Fi=function(e,t){var i=new Date(t);return i.setDate(le(t)),e==="month"||(i.setMonth(11),i.setDate(le(i)),e==="year")||(e==="decade"&&i.setFullYear(Q(t)+9),e==="century"&&i.setFullYear(j(t)+99)),i};function le(e){var t=A(e.getFullYear(),e.getMonth()+1,0);return t.getDate()}var Pi=function(e){switch(e){case"month":return"year";case"year":return"decade";case"decade":return"century"}},Ri=function(e){switch(e){case"century":return"decade";case"decade":return"year";case"year":return"month"}},Hi=function(e){var t=1;return e==="year"&&(t=12),e==="decade"&&(t=120),e==="century"&&(t=1200),t},$i=function(e){var t=1;return e==="decade"&&(t=12),e==="century"&&(t=120),t};function pt(e){var t={};switch(e){case"year":t.years=1;break;case"month":t.months=1;break;case"quarter":t.months=3;break;case"week":t.weeks=1;break;case"day":t.days=1;break;case"hour":t.hours=1;break;case"minute":t.minutes=1;break;case"second":t.seconds=1;break;case"millisecond":t.milliseconds=1}return t}function Wi(e,t){return Se(e,t)&&e.getDate()===t.getDate()}function Se(e,t){return vt(e,t)&&e.getMonth()===t.getMonth()}function vt(e,t){return e&&t&&e.getFullYear()===t.getFullYear()}function Yi(e,t){return e&&t&&e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes()}var zi=function(e,t){if(!(!f(e)||!f(t))){var i=e.getFullYear()-e.getFullYear()%10,a=t.getFullYear()-t.getFullYear()%10;return e&&t&&i===a}},Ui=function(e,t){if(!(!f(e)||!f(t))){var i=e.getFullYear()-e.getFullYear()%100,a=t.getFullYear()-t.getFullYear()%100;return e&&t&&i===a}};function j(e){return e&&e.getFullYear()-e.getFullYear()%100}function Q(e){return e&&e.getFullYear()-e.getFullYear()%10}var Ki=function(){return"yyyy/MM/dd"},Zi=function(e){if(!!f(e))return A(e.getFullYear(),e.getMonth(),1)},qi=function(e){if(!!f(e))return A(e.getFullYear(),e.getMonth()+1,0)};function ft(e,t){var i=(e.getDay()-t+X)%X,a=new Date(e);return a.setDate(e.getDate()-i),a}function We(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())}function Gi(e){var t=We(e)-We(mt(e.getFullYear()));return 1+Math.floor(t/de("day"))}function mt(e){return new Date(e,0,1)}function fe(e){return new Date(e,11,31)}function Ye(e,t){var i=e.getDay()-t+1;return i<=0&&(i+=X),i}function Ie(e,t,i){var a=Ye(mt(e.getFullYear()),t),n=Ye(fe(e.getFullYear()),t),r=X-a+1,s=Math.ceil((Gi(e)-r)/7);switch(i){case"fullWeek":if(r===X&&s++,s===0){var u=fe(e.getFullYear()-1);return Ie(u,t,i)}return s;case"firstDay":r>0&&s++;var c=a===He||n===He;return(s>$e&&!c||s===54)&&(s=1),s;case"firstFourDays":r>3&&s++;var p=a===Re||n===Re;if(s>$e&&!p&&(s=1),s===0){var V=fe(e.getFullYear()-1);return Ie(V,t,i)}return s}}var Xi=function(e,t){var i=o.getDatesInterval(e,t,"day"),a=new Date(e);return i>=6&&(a=new Date(a.setDate(a.getDate()+7))),a},ji=function(e,t,i,a){return a==="date"&&(t=t&&o.correctDateWithUnitBeginning(t,"day"),i=i&&o.correctDateWithUnitBeginning(i,"day"),e=e&&o.correctDateWithUnitBeginning(e,"day")),gt(e,t,i)===e},Qi=function(e){var{firstMin:t,firstMax:i,secondMin:a,secondMax:n}=e;return t<=a&&a<=i||t>a&&t<n||t<n&&i>n},Ji=function(e){var t=Math.floor(e),i=e%1*60;return{hours:t,minutes:i}},ea=function(e,t){var i=this.dateTimeFromDecimal(t),a=new Date(e);return(e.getHours()===i.hours&&e.getMinutes()<i.minutes||e.getHours()<i.hours)&&a.setHours(i.hours,i.minutes,0,0),a};function gt(e,t,i){var a=e;return f(e)?(f(t)&&e<t&&(a=t),f(i)&&e>i&&(a=i),a):e}function Dt(e,t){if(!!f(e)){var i=t.getHours()-e.getHours();if(i!==0){var a=i===1||i===-23?-1:1,n=new Date(t.getTime()+36e5*a);(a>0||n.getDate()===t.getDate())&&t.setTime(n.getTime())}}}var ta=function(e){var t=new Date(e.getTime());return t.setHours(t.getHours()+1),t.setMinutes(0),t};function Ct(e,t){return 60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3}var ia=function(e){return new Date(e)},aa=function(e,t,i){for(var a=[],n=new Date(e.getTime());n<t;)a.push(new Date(n.getTime())),n=this.addInterval(n,i);return a},A=function(e){var t=new Date(...arguments);return t.setFullYear(e),t},o={dateUnitIntervals:q,convertMillisecondsToDateUnits:ot,dateToMilliseconds:Vi,getNextDateUnit:Ii,convertDateUnitToMilliseconds:oe,getDateUnitInterval:ce,getDateFormatByTickInterval:bi,getDatesDifferences:Bi,correctDateWithUnitBeginning:ht,trimTime:dt,setToDayEnd:Ei,roundDateByStartDayHour:ea,dateTimeFromDecimal:Ji,addDateInterval:ct,addInterval:_t,getSequenceByInterval:Oi,getDateIntervalByString:pt,sameHoursAndMinutes:Yi,sameDate:Wi,sameMonthAndYear:Se,sameMonth:Se,sameYear:vt,sameDecade:zi,sameCentury:Ui,getDifferenceInMonth:Hi,getDifferenceInMonthForCells:$i,getFirstYearInDecade:Q,getFirstDecadeInCentury:j,getShortDateFormat:Ki,getViewFirstCellDate:ki,getViewLastCellDate:Ni,getViewDown:Ri,getViewUp:Pi,getLastMonthDay:le,getLastMonthDate:qi,getFirstMonthDate:Zi,getFirstWeekDate:ft,getWeekNumber:Ie,normalizeDateByWeek:Xi,getQuarter:lt,getFirstQuarterMonth:ut,dateInRange:ji,intervalsOverlap:Qi,roundToHour:ta,normalizeDate:gt,getViewMinBoundaryDate:Li,getViewMaxBoundaryDate:Fi,fixTimezoneGap:Dt,getTimezonesDifference:Ct,makeDate:ia,getDatesInterval:Si,getDatesOfInterval:aa,createDateWithFullYear:A};o.sameView=function(e,t,i){return o[Rt("same "+e)](t,i)};var yt="number",wt="yyyy/MM/dd",na="yyyy/MM/dd HH:mm:ss",xt=/^(\d{4,})(-)?(\d{2})(-)?(\d{2})(?:T(\d{2})(:)?(\d{2})?(:)?(\d{2}(?:\.(\d{1,3})\d*)?)?)?(Z|([+-])(\d{2})(:)?(\d{2})?)?$/,At=/^(\d{2}):(\d{2})(:(\d{2}))?$/,ze=["","yyyy","","MM","","dd","THH","","mm","","ss",".SSS"],ra=/^(\d{4})\/(\d{2})\/(\d{2})$/,sa=3,Tt=function(e,t){var i;return L(e)&&!t&&(i=la(e)),i||oa(e)};function y(e){return+e||0}function oa(e){var t=St(e)===wt,i=!B(e)&&Date.parse(e);if(!i&&t){var a=e.match(ra);if(a){var n=new Date(y(a[1]),y(a[2]),y(a[3]));return n.setFullYear(y(a[1])),n.setMonth(y(a[2])-1),n.setDate(y(a[3])),n}}return ue(i)?new Date(i):e}function la(e){var t=e.match(xt);if(!t)return t=e.match(At),t?new Date(0,0,0,y(t[1]),y(t[2]),y(t[4])):void 0;var i=y(t[1]),a=--t[3],n=t[5],r=0,s=0,u=g=>(i<100&&g.setFullYear(i),g);r=y(t[14]),s=y(t[16]),t[13]==="-"&&(r=-r,s=-s);var c=y(t[6])-r,p=y(t[8])-s,V=y(t[10]),S=function(g){return g=g||"",y(g)*Math.pow(10,sa-g.length)}(t[11]);return t[12]?u(new Date(Date.UTC(i,a,n,c,p,V,S))):u(new Date(i,a,n,c,p,V,S))}var ua=function(e,t){var i=e.match(xt),a="";if(!i)return i=e.match(At),i?i[3]?"HH:mm:ss":"HH:mm":void 0;for(var n=1;n<ze.length;n++)i[n]&&(a+=ze[n]||i[n]);return i[12]==="Z"&&(a+="'Z'"),i[14]&&(i[15]?a+="xxx":i[16]?a+="xx":a+="x"),a},ha=function(e){return typeof e=="number"?new Date(e):Tt(e,!Ve().forceIsoDateParsing)},da=function(e,t){return t?B(e)?t===yt?e&&e.valueOf?e.valueOf():null:Ht(t,$t)(e):null:e},St=function(e){if(typeof e=="number")return yt;if(L(e)){var t;return Ve().forceIsoDateParsing&&(t=ua(e)),t||(e.indexOf(":")>=0?na:wt)}else if(e)return null},C={dateParser:Tt,deserializeDate:ha,serializeDate:da,getDateSerializationFormat:St},me=["year","day","month","day"],Ue=["hours","minutes","seconds","milliseconds"],It=6e4,Vt=60*It*24,ca=365*Vt,_a=function(e){var t=typeof e;return t==="string"?"format":t==="object"&&e.type!==void 0?e.type:null},d={SUPPORTED_FORMATS:["date","time","datetime"],ONE_MINUTE:It,ONE_DAY:Vt,ONE_YEAR:ca,MIN_DATEVIEW_DEFAULT_DATE:new Date(1900,0,1),MAX_DATEVIEW_DEFAULT_DATE:function(){var e=new Date;return new Date(e.getFullYear()+50,e.getMonth(),e.getDate(),23,59,59)}(),FORMATS_INFO:{date:{getStandardPattern:function(){return"yyyy-MM-dd"},components:me},time:{getStandardPattern:function(){return"HH:mm"},components:Ue},datetime:{getStandardPattern:function(){var e;return function(){var t=l("<input>").attr("type","datetime");t.val("2000-01-01T01:01Z"),t.val()&&(e="yyyy-MM-ddTHH:mmZ")}(),e||(e="yyyy-MM-ddTHH:mm:ssZ"),d.FORMATS_INFO.datetime.getStandardPattern=function(){return e},e},components:[...me,...Ue]},"datetime-local":{getStandardPattern:function(){return"yyyy-MM-ddTHH:mm:ss"},components:[...me,"hours","minutes","seconds"]}},FORMATS_MAP:{date:"shortdate",time:"shorttime",datetime:"shortdateshorttime"},SUBMIT_FORMATS_MAP:{date:"date",time:"time",datetime:"datetime-local"},toStandardDateFormat:function(e,t){var i=d.FORMATS_INFO[t].getStandardPattern();return C.serializeDate(e,i)},fromStandardDateFormat:function(e){var t=C.dateParser(e);return B(t)?t:void 0},getMaxMonthDay:function(e,t){return new Date(e,t+1,0).getDate()},mergeDates:function(e,t,i){if(!t)return t||null;if(!e||isNaN(e.getTime())){var a=new Date(null);e=new Date(a.getFullYear(),a.getMonth(),a.getDate())}var n=new Date(e.valueOf()),r=d.FORMATS_INFO[i];return T(r.components,function(){var s=d.DATE_COMPONENTS_INFO[this];n[s.setter](t[s.getter]())}),n},getLongestCaptionIndex:function(e){var t=0,i=0,a;for(a=0;a<e.length;++a)e[a].length>i&&(t=a,i=e[a].length);return t},formatUsesMonthName:function(e){return h.formatUsesMonthName(e)},formatUsesDayName:function(e){return h.formatUsesDayName(e)},getLongestDate:function(e,t,i){var a=_a(e),n=9;(!a||d.formatUsesMonthName(a))&&(n=d.getLongestCaptionIndex(t));var r=new Date(1888,n,21,23,59,59,999);if(!a||d.formatUsesDayName(a)){var s=r.getDate()-r.getDay()+d.getLongestCaptionIndex(i);r.setDate(s)}return r},normalizeTime:function(e){e.setSeconds(0),e.setMilliseconds(0)}};d.DATE_COMPONENTS_INFO={year:{getter:"getFullYear",setter:"setFullYear",formatter:function(e,t){var i=new Date(t.getTime());return i.setFullYear(e),h.format(i,"yyyy")},startValue:void 0,endValue:void 0},day:{getter:"getDate",setter:"setDate",formatter:function(e,t){var i=new Date(t.getTime());return i.setDate(e),h.format(i,"d")},startValue:1,endValue:void 0},month:{getter:"getMonth",setter:"setMonth",formatter:function(e){return h.getMonthNames()[e]},startValue:0,endValue:11},hours:{getter:"getHours",setter:"setHours",formatter:function(e){return h.format(new Date(0,0,0,e),"hour")},startValue:0,endValue:23},minutes:{getter:"getMinutes",setter:"setMinutes",formatter:function(e){return h.format(new Date(0,0,0,0,e),"minute")},startValue:0,endValue:59},seconds:{getter:"getSeconds",setter:"setSeconds",formatter:function(e){return h.format(new Date(0,0,0,0,0,e),"second")},startValue:0,endValue:59},milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",formatter:function(e){return h.format(new Date(0,0,0,0,0,0,e),"millisecond")},startValue:0,endValue:999}};var Mt="dxSwipeable",pa="dx-swipeable",va={onStart:di,onUpdated:ci,onEnd:_i,onCancel:"dxswipecancel"},bt=Wt.inherit({_getDefaultOptions:function(){return _(this.callBase(),{elastic:!0,immediate:!1,direction:"horizontal",itemSizeFunc:null,onStart:null,onUpdated:null,onEnd:null,onCancel:null})},_render:function(){this.callBase(),this.$element().addClass(pa),this._attachEventHandlers()},_attachEventHandlers:function(){if(this._detachEventHandlers(),!this.option("disabled")){var e=this.NAME;this._createEventData(),T(va,function(t,i){var a=this._createActionByOption(t,{context:this});i=b(i,e),m.on(this.$element(),i,this._eventData,function(n){return a({event:n})})}.bind(this))}},_createEventData:function(){this._eventData={elastic:this.option("elastic"),itemSizeFunc:this.option("itemSizeFunc"),direction:this.option("direction"),immediate:this.option("immediate")}},_detachEventHandlers:function(){m.off(this.$element(),"."+Mt)},_optionChanged:function(e){switch(e.name){case"disabled":case"onStart":case"onUpdated":case"onEnd":case"onCancel":case"elastic":case"immediate":case"itemSizeFunc":case"direction":this._detachEventHandlers(),this._attachEventHandlers();break;case"rtlEnabled":break;default:this.callBase(e)}},_useTemplates:function(){return!1}});Yt(bt,Mt);var fa="dx-calendar-navigator",ma="dx-calendar-navigator-previous-month",ga="dx-calendar-navigator-next-month",Da="dx-calendar-navigator-previous-view",Ca="dx-calendar-navigator-next-view",ya="dx-calendar-disabled-navigator-link",wa="dx-calendar-caption-button",xa=Me.inherit({_getDefaultOptions:function(){return _(this.callBase(),{onClick:null,onCaptionClick:null,text:""})},_init:function(){this.callBase(),this._initActions()},_initActions:function(){this._clickAction=this._createActionByOption("onClick"),this._captionClickAction=this._createActionByOption("onCaptionClick")},_initMarkup:function(){this.callBase(),this.$element().addClass(fa),this._renderButtons(),this._renderCaption()},_renderButtons:function(){var e=this,t=this.option("rtlEnabled")?-1:1;this._prevButton=this._createComponent(l("<a>"),ae,{focusStateEnabled:!1,icon:"chevronleft",onClick:function(r){e._clickAction({direction:-t,event:r})},integrationOptions:{}});var i=this._prevButton.$element().addClass(Da).addClass(ma);this._nextButton=this._createComponent(l("<a>"),ae,{focusStateEnabled:!1,icon:"chevronright",onClick:function(r){e._clickAction({direction:t,event:r})},integrationOptions:{}});var a=this._nextButton.$element().addClass(Ca).addClass(ga);this._caption=this._createComponent(l("<a>").addClass(wa),ae,{focusStateEnabled:!1,onClick:function(r){e._captionClickAction({event:r})},integrationOptions:{}});var n=this._caption.$element();this.$element().append(i,n,a)},_renderCaption:function(){this._caption.option("text",this.option("text"))},toggleButton:function(e,t){var i="_"+e+"Button",a=this[i];a&&(a.option("disabled",t),a.$element().toggleClass(ya,t))},_optionChanged:function(e){switch(e.name){case"text":this._renderCaption();break;default:this.callBase(e)}}}),{abstract:O}=Me,Aa="dx-calendar-other-view",Ta="dx-calendar-cell",Sa="dx-calendar-week-number-cell",Ke="dx-calendar-empty-cell",Ia="dx-calendar-today",Ze="dx-calendar-selected-date",ge="dx-calendar-contoured-date",qe=b(xe,"dxCalendar"),Ge="dxDateValueKey",ee=Me.inherit({_getViewName:function(){return"base"},_getDefaultOptions:function(){return _(this.callBase(),{date:new Date,focusStateEnabled:!1,cellTemplate:null,disabledDates:null,onCellClick:null,rowCount:3,colCount:4,allowValueSelection:!0,_todayDate:()=>new Date})},_initMarkup:function(){this.callBase(),this._renderImpl()},_renderImpl:function(){this.$element().append(this._createTable()),this._createDisabledDatesHandler(),this._renderBody(),this._renderContouredDate(),this._renderValue(),this._renderEvents()},_createTable:function(){return this._$table=l("<table>"),this.setAria({label:E.format("dxCalendar-ariaWidgetName"),role:"grid"},this._$table),this._$table},_renderBody:function(){this.$body=l("<tbody>").appendTo(this._$table);for(var e={cellDate:this._getFirstCellData(),prevCellDate:null},t=0,i=this.option("rowCount");t<i;t++){e.row=this._createRow();for(var a=0,n=this.option("colCount");a<n;a++)this._renderCell(e,a);this._renderWeekNumberCell(e)}},_createRow:function(){var e=Ae.createElement("tr");return this.setAria("role","row",l(e)),this.$body.get(0).appendChild(e),e},_appendCell:function(e,t){this._appendMethodName||this._cacheAppendMethodName(),l(e)[this._appendMethodName](t)},_cacheAppendMethodName:function(e){this._appendMethodName=(e!=null?e:this.option("rtlEnabled"))?"prepend":"append"},_createCell:function(e){var t=Ae.createElement("td"),i=l(t);return t.className=this._getClassNameByDate(e),t.setAttribute("data-value",C.serializeDate(e,o.getShortDateFormat())),zt(t,Ge,e),this.setAria({role:"gridcell",label:this.getCellAriaLabel(e)},i),{cell:t,$cell:i}},_renderCell:function(e,t){var{cellDate:i,prevCellDate:a,row:n}=e;a&&o.fixTimezoneGap(a,i),e.prevCellDate=i;var{cell:r,$cell:s}=this._createCell(i),u=this.option("cellTemplate");this._appendCell(n,r),u?u.render(this._prepareCellTemplateData(i,t,s)):r.innerHTML=this._getCellText(i),e.cellDate=this._getNextCellData(i)},_getClassNameByDate:function(e){var t=Ta;return this._isTodayCell(e)&&(t+=" ".concat(Ia)),(this._isDateOutOfRange(e)||this.isDateDisabled(e))&&(t+=" ".concat(Ke)),this._isOtherView(e)&&(t+=" ".concat(Aa)),t},_prepareCellTemplateData:function(e,t,i){var a=e instanceof Date,n=a?this._getCellText(e):e,r=a?e:void 0,s=this._getViewName();return{model:{text:n,date:r,view:s},container:Ut(i),index:t}},_renderEvents:function(){this._createCellClickAction(),m.off(this._$table,qe),m.on(this._$table,qe,"td:not(.".concat(Sa,")"),e=>{l(e.currentTarget).hasClass(Ke)||this._cellClickAction({event:e,value:l(e.currentTarget).data(Ge)})})},_createCellClickAction:function(){this._cellClickAction=this._createActionByOption("onCellClick")},_createDisabledDatesHandler:function(){var e=this.option("disabledDates");this._disabledDatesHandler=Array.isArray(e)?this._getDefaultDisabledDatesHandler(e):e||v},_getDefaultDisabledDatesHandler:function(e){return v},_isTodayCell:O,_isDateOutOfRange:O,isDateDisabled:function(e){var t={date:e,view:this._getViewName()};return this._disabledDatesHandler(t)},_isOtherView:O,_getCellText:O,_getFirstCellData:O,_getNextCellData:O,_renderContouredDate:function(e){if(!!this.option("focusStateEnabled")){e=e||this.option("contouredDate");var t=this._getContouredCell(),i=this._getCellByDate(e);t.removeClass(ge),i.addClass(ge)}},_getContouredCell:function(){return this._$table.find(".".concat(ge))},_changeValue:function(e){if(e){var t=this.option("value"),i=t?new Date(t):new Date;i.setDate(e.getDate()),i.setMonth(e.getMonth()),i.setFullYear(e.getFullYear()),i.setDate(e.getDate()),this.option("value",i)}else this.option("value",null)},_renderValue:function(){if(!!this.option("allowValueSelection")){var e=this.option("value"),t=this._getCellByDate(e);this._selectedCell&&this._selectedCell.removeClass(Ze),t.addClass(Ze),this._selectedCell=t}},getCellAriaLabel:function(e){return this._getCellText(e)},_getFirstAvailableDate:function(){var e=this.option("date"),t=this.option("min");return e=o.getFirstDateView(this._getViewName(),e),new Date(t&&e<t?t:e)},_getCellByDate:O,isBoundary:O,_optionChanged:function(e){var{name:t,value:i}=e;switch(t){case"value":this._renderValue();break;case"contouredDate":this._renderContouredDate(i);break;case"onCellClick":this._createCellClickAction();break;case"disabledDates":case"cellTemplate":this._invalidate();break;case"rtlEnabled":this._cacheAppendMethodName(i),this.callBase(e);break;case"_todayDate":this._renderBody();break;default:this.callBase(e)}}}),Va="dx-calendar-other-month",Ma="dx-calendar-other-view",ba="dx-calendar-week-number-cell",Ea={month:ee.inherit({_getViewName:function(){return"month"},_getDefaultOptions:function(){return _(this.callBase(),{firstDayOfWeek:0,rowCount:6,colCount:7})},_renderImpl:function(){this.callBase(),this._renderHeader()},_renderBody:function(){this.callBase(),this._$table.find(".".concat(Ma)).addClass(Va)},_renderFocusTarget:v,getCellAriaLabel:function(e){return h.format(e,"longdate")},_renderHeader:function(){var e=l("<tr>"),t=l("<thead>").append(e);this._$table.prepend(t);for(var i=0,a=this.option("colCount");i<a;i++)this._renderHeaderCell(i,e);this.option("showWeekNumbers")&&this._renderWeekHeaderCell(e)},_renderHeaderCell:function(e,t){var{firstDayOfWeek:i}=this.option(),{full:a,abbreviated:n}=this._getDayCaption(i+e),r=l("<th>").attr({scope:"col",abbr:a}).text(n);this._appendCell(t,r)},_renderWeekHeaderCell:function(e){var t=l("<th>").attr({scope:"col",abbr:"WeekNumber",class:"dx-week-number-header"}).text("#"),i=this.option("rtlEnabled");i?e.append(t):e.prepend(t)},_renderWeekNumberCell:function(e){var{showWeekNumbers:t,rtlEnabled:i,cellTemplate:a}=this.option();if(!!t){var n=this._getWeekNumber(e.prevCellDate),r=Ae.createElement("td"),s=l(r);r.className=ba,a?a.render(this._prepareCellTemplateData(n,-1,s)):r.innerHTML=n,i?e.row.append(r):e.row.prepend(r),this.setAria({role:"gridcell",label:"Week ".concat(n)},s)}},_getWeekNumber:function(e){var{weekNumberRule:t,firstDayOfWeek:i}=this.option();return t==="auto"?o.getWeekNumber(e,i,i===1?"firstFourDays":"firstDay"):o.getWeekNumber(e,i,t)},getNavigatorCaption:function(){return h.format(this.option("date"),"monthandyear")},_isTodayCell:function(e){var t=this.option("_todayDate")();return o.sameDate(e,t)},_isDateOutOfRange:function(e){var t=this.option("min"),i=this.option("max");return!o.dateInRange(e,t,i,"date")},_isOtherView:function(e){return e.getMonth()!==this.option("date").getMonth()},_getCellText:function(e){return h.format(e,"d")},_getDayCaption:function(e){var t=this.option("colCount"),i=e%t;return{full:h.getDayNames()[i],abbreviated:h.getDayNames("abbreviated")[i]}},_getFirstCellData:function(){var{firstDayOfWeek:e}=this.option(),t=o.getFirstMonthDate(this.option("date")),i=e-t.getDay(),a=this.option("colCount");return i>=0&&(i-=a),t.setDate(t.getDate()+i),t},_getNextCellData:function(e){return e=new Date(e),e.setDate(e.getDate()+1),e},_getCellByDate:function(e){return this._$table.find("td[data-value='".concat(C.serializeDate(e,o.getShortDateFormat()),"']"))},isBoundary:function(e){return o.sameMonthAndYear(e,this.option("min"))||o.sameMonthAndYear(e,this.option("max"))},_getDefaultDisabledDatesHandler:function(e){return function(t){var i=e.some(function(a){return o.sameDate(a,t.date)});if(i)return!0}}}),year:ee.inherit({_getViewName:function(){return"year"},_isTodayCell:function(e){var t=this.option("_todayDate")();return o.sameMonthAndYear(e,t)},_isDateOutOfRange:function(e){return!o.dateInRange(e,o.getFirstMonthDate(this.option("min")),o.getLastMonthDate(this.option("max")))},_isOtherView:function(){return!1},_getCellText:function(e){return h.getMonthNames("abbreviated")[e.getMonth()]},_getFirstCellData:function(){var e=this.option("date"),t=new Date(e);return t.setDate(1),t.setMonth(0),t},_getNextCellData:function(e){return e=new Date(e),e.setMonth(e.getMonth()+1),e},_getCellByDate:function(e){var t=new Date(e);return t.setDate(1),this._$table.find("td[data-value='".concat(C.serializeDate(t,o.getShortDateFormat()),"']"))},getCellAriaLabel:function(e){return h.format(e,"monthandyear")},getNavigatorCaption:function(){return h.format(this.option("date"),"yyyy")},isBoundary:function(e){return o.sameYear(e,this.option("min"))||o.sameYear(e,this.option("max"))},_renderWeekNumberCell:v}),decade:ee.inherit({_getViewName:function(){return"decade"},_isTodayCell:function(e){var t=this.option("_todayDate")();return o.sameYear(e,t)},_isDateOutOfRange:function(e){var t=this.option("min"),i=this.option("max");return!o.dateInRange(e.getFullYear(),t&&t.getFullYear(),i&&i.getFullYear())},_isOtherView:function(e){var t=new Date(e);return t.setMonth(1),!o.sameDecade(t,this.option("date"))},_getCellText:function(e){return h.format(e,"yyyy")},_getFirstCellData:function(){var e=o.getFirstYearInDecade(this.option("date"))-1;return o.createDateWithFullYear(e,0,1)},_getNextCellData:function(e){return e=new Date(e),e.setFullYear(e.getFullYear()+1),e},getNavigatorCaption:function(){var e=this.option("date"),t=o.getFirstYearInDecade(e),i=new Date(e),a=new Date(e);return i.setFullYear(t),a.setFullYear(t+9),h.format(i,"yyyy")+"-"+h.format(a,"yyyy")},_isValueOnCurrentView:function(e,t){return o.sameDecade(e,t)},_getCellByDate:function(e){var t=new Date(e);return t.setDate(1),t.setMonth(0),this._$table.find("td[data-value='".concat(C.serializeDate(t,o.getShortDateFormat()),"']"))},isBoundary:function(e){return o.sameDecade(e,this.option("min"))||o.sameDecade(e,this.option("max"))},_renderWeekNumberCell:v}),century:ee.inherit({_getViewName:function(){return"century"},_isTodayCell:function(e){var t=this.option("_todayDate")();return o.sameDecade(e,t)},_isDateOutOfRange:function(e){var t=o.getFirstYearInDecade(e),i=o.getFirstYearInDecade(this.option("min")),a=o.getFirstYearInDecade(this.option("max"));return!o.dateInRange(t,i,a)},_isOtherView:function(e){var t=new Date(e);return t.setMonth(1),!o.sameCentury(t,this.option("date"))},_getCellText:function(e){var t=h.format(e,"yyyy"),i=new Date(e);return i.setFullYear(i.getFullYear()+9),t+" - "+h.format(i,"yyyy")},_getFirstCellData:function(){var e=o.getFirstDecadeInCentury(this.option("date"))-10;return o.createDateWithFullYear(e,0,1)},_getNextCellData:function(e){return e=new Date(e),e.setFullYear(e.getFullYear()+10),e},_getCellByDate:function(e){var t=new Date(e);return t.setDate(1),t.setMonth(0),t.setFullYear(o.getFirstYearInDecade(t)),this._$table.find("td[data-value='".concat(C.serializeDate(t,o.getShortDateFormat()),"']"))},getNavigatorCaption:function(){var e=this.option("date"),t=o.getFirstDecadeInCentury(e),i=new Date(e),a=new Date(e);return i.setFullYear(t),a.setFullYear(t+99),h.format(i,"yyyy")+"-"+h.format(a,"yyyy")},isBoundary:function(e){return o.sameCentury(e,this.option("min"))||o.sameCentury(e,this.option("max"))},_renderWeekNumberCell:v})},Ba="dx-calendar",Oa="dx-calendar-body",ka="dx-calendar-cell",Na="dx-calendar-footer",La="dx-calendar-today-button",Fa="dx-calendar-with-footer",Pa="dx-calendar-views-wrapper",Xe="dx-calendar-view",Ra="dx-state-focused",De=250,Ha=.6,$a=1,Wa="yyyy-MM-dd",Ya="dxDateValueKey",P={month:3,year:2,decade:1,century:0},D={MONTH:"month",YEAR:"year",DECADE:"decade",CENTURY:"century"};function za(e){return e.hasClass(Ra)}var Oe=be.inherit({_activeStateUnit:"."+ka,_getDefaultOptions:function(){return _(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,currentDate:new Date,value:null,dateSerializationFormat:void 0,min:new Date(1e3,0),max:new Date(3e3,0),firstDayOfWeek:void 0,zoomLevel:D.MONTH,maxZoomLevel:D.MONTH,minZoomLevel:D.CENTURY,showTodayButton:!1,showWeekNumbers:!1,weekNumberRule:"auto",cellTemplate:"cell",disabledDates:null,onCellClick:null,onContouredChanged:null,skipFocusCheck:!1,_todayDate:()=>new Date})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return N.real().deviceType==="desktop"&&!N.isSimulator()},options:{focusStateEnabled:!0}}])},_supportedKeys:function(){return _(this.callBase(),{rightArrow:function(e){e.preventDefault(),Z(e)?this._waitRenderView(1):this._moveCurrentDateByOffset(1*this._getRtlCorrection())},leftArrow:function(e){e.preventDefault(),Z(e)?this._waitRenderView(-1):this._moveCurrentDateByOffset(-1*this._getRtlCorrection())},upArrow:function(e){if(e.preventDefault(),Z(e))this._navigateUp();else{if(M.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(-1*this._view.option("colCount"))}},downArrow:function(e){if(e.preventDefault(),Z(e))this._navigateDown();else{if(M.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(1*this._view.option("colCount"))}},home:function(e){e.preventDefault();var t=this.option("zoomLevel"),i=this.option("currentDate"),a=this._dateOption("min");if(!this._view.isDateDisabled(i)){var n=o.sameView(t,i,a)?a:o.getViewFirstCellDate(t,i);this._moveToClosestAvailableDate(n)}},end:function(e){e.preventDefault();var t=this.option("zoomLevel"),i=this.option("currentDate"),a=this._dateOption("max");if(!this._view.isDateDisabled(i)){var n=o.sameView(t,i,a)?a:o.getViewLastCellDate(t,i);this._moveToClosestAvailableDate(n)}},pageUp:function(e){e.preventDefault(),this._waitRenderView(-1*this._getRtlCorrection())},pageDown:function(e){e.preventDefault(),this._waitRenderView(1*this._getRtlCorrection())},tab:v,enter:function(e){if(!this._isMaxZoomLevel())this._navigateDown();else if(!this._view.isDateDisabled(this.option("currentDate"))){var t=this._updateTimeComponent(this.option("currentDate"));this._dateValue(t,e)}}})},_getSerializationFormat:function(e){var t=this.option(e||"value");if(this.option("dateSerializationFormat"))return this.option("dateSerializationFormat");if(ue(t))return"number";if(!!L(t))return C.getDateSerializationFormat(t)},_convertToDate:function(e,t){return C.deserializeDate(e)},_dateValue:function(e,t){if(t){if(t.type==="keydown"){var i=this._view._getContouredCell().get(0);t.target=i}this._saveValueChangeEvent(t)}this._dateOption("value",e)},_dateOption:function(e,t){if(arguments.length===1)return this._convertToDate(this.option(e),e);var i=this._getSerializationFormat(e);this.option(e,C.serializeDate(t,i))},_shiftDate:function(e,t,i,a){switch(e){case D.MONTH:t.setDate(t.getDate()+i*a);break;case D.YEAR:t.setMonth(t.getMonth()+i*a);break;case D.DECADE:t.setFullYear(t.getFullYear()+i*a);break;case D.CENTURY:t.setFullYear(t.getFullYear()+10*i*a)}},_moveCurrentDateByOffset:function(e){var t=this.option("currentDate"),i=new Date(t),a=this.option("zoomLevel");this._shiftDate(a,i,e,1);for(var n=this._getMaxDate(),r=this._getMinDate(),s=this._areDatesInNeighborView(a,i,t),u=ne(i,r,n)&&s,c=new Date(i);u;){if(!this._view.isDateDisabled(c)){i=c;break}this._shiftDate(a,c,e,1),s=this._areDatesInNeighborView(a,c,t),u=ne(c,r,n)&&s}this._view.isDateDisabled(t)||this._view.isDateDisabled(i)?this._waitRenderView(e>0?1:-1):this.option("currentDate",i)},_areDatesInSameView(e,t,i){switch(e){case D.MONTH:return t.getMonth()===i.getMonth();case D.YEAR:return t.getYear()===i.getYear();case D.DECADE:return parseInt(t.getYear()/10)===parseInt(i.getYear()/10);case D.CENTURY:return parseInt(t.getYear()/100)===parseInt(i.getYear()/100)}},_areDatesInNeighborView(e,t,i){switch(e){case D.MONTH:return a=t.getMonth(),n=i.getMonth(),r=Math.abs(a-n),Math.min(r,12-r)<=1;case D.YEAR:return Math.abs(t.getYear()-i.getYear())<=1;case D.DECADE:return Math.abs(t.getYear()-i.getYear())<=10;case D.CENTURY:return Math.abs(t.getYear()-i.getYear())<=100}var a,n,r},_moveToClosestAvailableDate:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.option("currentDate"),t=new Date(e),i=this.option("zoomLevel"),a=!this._isDateNotAvailable(t),n=a,r=a,s,u,c=new Date(t),p=new Date(t);do{if(n){t=c;break}if(r){t=p;break}this._shiftDate(i,c,1,1),this._shiftDate(i,p,1,-1),s=this._areDatesInSameView(i,c,e),u=this._areDatesInSameView(i,p,e),n=s&&!this._isDateNotAvailable(c),r=u&&!this._isDateNotAvailable(p)}while(s||u);this.option("currentDate",t)},_isDateNotAvailable:function(e){var t=this._getMaxDate(),i=this._getMinDate();return!ne(e,i,t)||this._view.isDateDisabled(e)},_init:function(){this.callBase(),this._correctZoomLevel(),this._initCurrentDate(),this._initActions()},_correctZoomLevel:function(){var e=this.option("minZoomLevel"),t=this.option("maxZoomLevel"),i=this.option("zoomLevel");P[t]<P[e]||(P[i]>P[t]?this.option("zoomLevel",t):P[i]<P[e]&&this.option("zoomLevel",e))},_initCurrentDate:function(){var e=this._getNormalizedDate(this._dateOption("value"))||this._getNormalizedDate(this.option("currentDate"));this.option("currentDate",e)},_getNormalizedDate:function(e){return e=o.normalizeDate(e,this._getMinDate(),this._getMaxDate()),f(e)?this._getDate(e):e},_initActions:function(){this._cellClickAction=this._createActionByOption("onCellClick"),this._onContouredChanged=this._createActionByOption("onContouredChanged")},_initTemplates:function(){this._templateManager.addDefaultTemplates({cell:new Kt(function(e){var t=e.model;l(e.container).append(l("<span>").text(t&&t.text||String(t)))})}),this.callBase()},_updateCurrentDate:function(e){M.isAnimating(this._$viewsWrapper)&&M.stop(this._$viewsWrapper,!0);var t=this._getMinDate(),i=this._getMaxDate();if(t>i){this.option("currentDate",new Date);return}var a=this._getNormalizedDate(e);if(e.getTime()!==a.getTime()){this.option("currentDate",new Date(a));return}var n=this._getViewsOffset(this._view.option("date"),a);n!==0&&!this._isMaxZoomLevel()&&this._isOtherViewCellClicked&&(n=0),this._view&&n!==0&&!this._suppressNavigation?this._navigate(n,a):(this._renderNavigator(),this._setViewContoured(a),this._updateAriaId(a))},_setViewContoured:function(e){(this.option("skipFocusCheck")||za(this._focusTarget()))&&this._view.option("contouredDate",e)},_getMinDate:function(){return this.min?this.min:(this.min=this._dateOption("min")||new Date(1e3,0),this.min)},_getMaxDate:function(){return this.max?this.max:(this.max=this._dateOption("max")||new Date(3e3,0),this.max)},_getViewsOffset:function(e,t){var i=this.option("zoomLevel");if(i===D.MONTH)return this._getMonthsOffset(e,t);var a;switch(i){case D.CENTURY:a=100;break;case D.DECADE:a=10;break;default:a=1}return parseInt(t.getFullYear()/a)-parseInt(e.getFullYear()/a)},_getMonthsOffset:function(e,t){var i=t.getFullYear()-e.getFullYear(),a=t.getMonth()-e.getMonth();return 12*i+a},_waitRenderView:function(e){if(!this._alreadyViewRender){this._alreadyViewRender=!0;var t=this._getDateByOffset(e*this._getRtlCorrection());this._moveToClosestAvailableDate(t),this._waitRenderViewTimeout=setTimeout(()=>{this._alreadyViewRender=!1})}},_getRtlCorrection:function(){return this.option("rtlEnabled")?-1:1},_getDateByOffset:function(e,t){var i;t=this._getDate((i=t)!==null&&i!==void 0?i:this.option("currentDate"));var a=t.getDate(),n=o.getDifferenceInMonth(this.option("zoomLevel"))*e;t.setDate(1),t.setMonth(t.getMonth()+n);var r=o.getLastMonthDate(t).getDate();return t.setDate(a>r?r:a),t},_focusTarget:function(){return this.$element()},_initMarkup:function(){this._renderSubmitElement(),this.callBase();var e=this.$element();e.addClass(Ba),this._renderBody(),e.append(this.$body),this._renderViews(),this._renderNavigator(),e.append(this._navigator.$element()),this._renderSwipeable(),this._renderFooter(),this._updateAriaSelected(),this._updateAriaId(),this._moveToClosestAvailableDate()},_render:function(){this.callBase(),this._setViewContoured(this.option("currentDate"))},_renderBody:function(){this._$viewsWrapper||(this.$body=l("<div>").addClass(Oa),this._$viewsWrapper=l("<div>").addClass(Pa),this.$body.append(this._$viewsWrapper))},_getKeyboardListeners(){return this.callBase().concat([this._view])},_renderViews:function(){this.$element().addClass(Xe+"-"+this.option("zoomLevel"));var e=this.option("currentDate");if(this._view=this._renderSpecificView(e),Ee()){var t=this._getDateByOffset(-1,e);this._beforeView=this._isViewAvailable(t)?this._renderSpecificView(t):null;var i=this._getDateByOffset(1,e);i.setDate(1),this._afterView=this._isViewAvailable(i)?this._renderSpecificView(i):null}this._translateViews()},_renderSpecificView:function(e){var t=Ea[this.option("zoomLevel")],i=l("<div>").appendTo(this._$viewsWrapper),a=this._viewConfig(e);return this._createComponent(i,t,a)},_viewConfig:function(e){var t,i=this.option("disabledDates");return i=se(i)?this._injectComponent(i.bind(this)):i,{date:e,min:this._getMinDate(),max:this._getMaxDate(),firstDayOfWeek:(t=this.option("firstDayOfWeek"))!==null&&t!==void 0?t:h.firstDayOfWeekIndex(),showWeekNumbers:this.option("showWeekNumbers"),weekNumberRule:this.option("weekNumberRule"),zoomLevel:this.option("zoomLevel"),value:this._dateOption("value"),tabIndex:void 0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),disabledDates:i,onCellClick:this._cellClickHandler.bind(this),cellTemplate:this._getTemplateByOption("cellTemplate"),allowValueSelection:this._isMaxZoomLevel(),_todayDate:this.option("_todayDate")}},_injectComponent:function(e){var t=this;return function(i){return _(i,{component:t}),e(i)}},_isViewAvailable:function(e){var t=this.option("zoomLevel"),i=o.getViewMinBoundaryDate(t,this._getMinDate()),a=o.getViewMaxBoundaryDate(t,this._getMaxDate());return o.dateInRange(e,i,a)},_translateViews:function(){Y(this._view.$element(),{left:0,top:0}),this._beforeView&&Y(this._beforeView.$element(),{left:this._getViewPosition(-1),top:0}),this._afterView&&Y(this._afterView.$element(),{left:this._getViewPosition(1),top:0})},_getViewPosition:function(e){var t=this.option("rtlEnabled")?-1:1;return 100*e*t+"%"},_cellClickHandler:function(e){var t=this.option("zoomLevel"),i=o.getViewDown(t),a=this._isMaxZoomLevel();if(i&&!a)this._navigateDown(e.event.currentTarget);else{var n=this._updateTimeComponent(e.value);this._dateValue(n,e.event),this._cellClickAction(e)}},_updateTimeComponent:function(e){var t=new Date(e),i=this._dateOption("value");return i&&(t.setHours(i.getHours()),t.setMinutes(i.getMinutes()),t.setSeconds(i.getSeconds()),t.setMilliseconds(i.getMilliseconds())),t},_isMaxZoomLevel:function(){return this.option("zoomLevel")===this.option("maxZoomLevel")},_navigateDown:function(e){var t=this.option("zoomLevel");if(!this._isMaxZoomLevel()){var i=o.getViewDown(t);if(!!i){var a=this._view.option("contouredDate")||this._view.option("date");e&&(a=l(e).data(Ya)),this._isOtherViewCellClicked=!0,this.option("currentDate",a),this.option("zoomLevel",i),this._isOtherViewCellClicked=!1,this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate")))}}},_renderNavigator:function(){this._navigator||(this._navigator=new xa(l("<div>"),this._navigatorConfig())),this._navigator.option("text",this._view.getNavigatorCaption()),this._updateButtonsVisibility()},_navigatorConfig:function(){return{text:this._view.getNavigatorCaption(),onClick:this._navigatorClickHandler.bind(this),onCaptionClick:this._navigateUp.bind(this),rtlEnabled:this.option("rtlEnabled")}},_navigatorClickHandler:function(e){var t=this._getDateByOffset(e.direction,this.option("currentDate"));this._moveToClosestAvailableDate(t)},_navigateUp:function(){var e=this.option("zoomLevel"),t=o.getViewUp(e);!t||this._isMinZoomLevel(e)||(this.option("zoomLevel",t),this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate"))))},_isMinZoomLevel:function(e){var t=this._getMinDate(),i=this._getMaxDate();return o.sameView(e,t,i)||this.option("minZoomLevel")===e},_updateButtonsVisibility:function(){this._navigator.toggleButton("next",!f(this._getRequiredView("next"))),this._navigator.toggleButton("prev",!f(this._getRequiredView("prev")))},_renderSwipeable:function(){this._swipeable||(this._swipeable=this._createComponent(this.$element(),bt,{onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._viewWidth.bind(this)}))},_swipeStartHandler:function(e){M.stop(this._$viewsWrapper,!0),e.event.maxLeftOffset=this._getRequiredView("next")?1:0,e.event.maxRightOffset=this._getRequiredView("prev")?1:0},_getRequiredView:function(e){var t,i=this.option("rtlEnabled");return e==="next"?t=i?this._beforeView:this._afterView:e==="prev"&&(t=i?this._afterView:this._beforeView),t},_swipeUpdateHandler:function(e){var t=e.event.offset;Y(this._$viewsWrapper,{left:t*this._viewWidth(),top:0}),this._updateNavigatorCaption(t)},_swipeEndHandler:function(e){var t=e.event.targetOffset,i=t?t/Math.abs(t):0;if(i===0){this._animateWrapper(0,De);return}var a=this._getDateByOffset(-i*this._getRtlCorrection());this._isDateInInvalidRange(a)&&(i>=0?a=new Date(this._getMinDate()):a=new Date(this._getMaxDate())),this.option("currentDate",a)},_viewWidth:function(){return this._viewWidthValue||(this._viewWidthValue=nt(this.$element())),this._viewWidthValue},_updateNavigatorCaption:function(e){e*=this._getRtlCorrection();var t=this._view;e>.5&&this._beforeView?t=this._beforeView:e<-.5&&this._afterView&&(t=this._afterView),this._navigator.option("text",t.getNavigatorCaption())},_isDateInInvalidRange:function(e){if(!this._view.isBoundary(e)){var t=this._getMinDate(),i=this._getMaxDate(),a=o.normalizeDate(e,t,i);return a===t||a===i}},_renderFooter:function(){var e=this.option("showTodayButton");if(e){var t=this._createComponent(l("<a>"),ae,{focusStateEnabled:!1,text:E.format("dxCalendar-todayButtonText"),onClick:function(i){this._toTodayView(i)}.bind(this),integrationOptions:{}}).$element().addClass(La);this._$footer=l("<div>").addClass(Na).append(t),this.$element().append(this._$footer)}this.$element().toggleClass(Fa,e)},_renderSubmitElement:function(){this._$submitElement=l("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(e){var t=this._convertToDate(e);this._getSubmitElement().val(C.serializeDate(t,Wa))},_getSubmitElement:function(){return this._$submitElement},_animateShowView:function(){return M.stop(this._view.$element(),!0),this._popAnimationView(this._view,Ha,$a,De).promise()},_popAnimationView:function(e,t,i,a){return M.animate(e.$element(),{type:"pop",from:{scale:t,opacity:t},to:{scale:i,opacity:i},duration:a})},_navigate:function(e,t){if(e!==0&&Math.abs(e)!==1&&this._isViewAvailable(t)){var i=this._renderSpecificView(t);e>0?(this._afterView&&this._afterView.$element().remove(),this._afterView=i):(this._beforeView&&this._beforeView.$element().remove(),this._beforeView=i),this._translateViews()}var a=this._getRtlCorrection(),n=e>0?1:e<0?-1:0,r=-a*n*this._viewWidth(),s=this._$viewsWrapper.position().left;s!==r&&(this._preventViewChangeAnimation?this._wrapperAnimationEndHandler(e,t):this._animateWrapper(r,De).done(this._wrapperAnimationEndHandler.bind(this,e,t)))},_animateWrapper:function(e,t){return M.animate(this._$viewsWrapper,{type:"slide",from:{left:this._$viewsWrapper.position().left},to:{left:e},duration:t})},_getDate:e=>new Date(e),_toTodayView:function(e){this._saveValueChangeEvent(e.event);var t=new Date;if(this._isMaxZoomLevel()){this._dateOption("value",t);return}this._preventViewChangeAnimation=!0,this.option("zoomLevel",this.option("maxZoomLevel")),this._dateOption("value",t),this._animateShowView(),this._preventViewChangeAnimation=!1},_wrapperAnimationEndHandler:function(e,t){this._rearrangeViews(e),this._translateViews(),this._resetLocation(),this._renderNavigator(),this._setViewContoured(t),this._updateAriaId(t)},_rearrangeViews:function(e){if(e!==0){var t,i,a;if(e<0?(t=1,i="_beforeView",a="_afterView"):(t=-1,i="_afterView",a="_beforeView"),!!this[i]){var n=this[i].option("date");this[a]&&this[a].$element().remove(),e===t?this[a]=this._view:(this[a]=this._renderSpecificView(this._getDateByOffset(t,n)),this._view.$element().remove()),this._view=this[i];var r=this._getDateByOffset(-t,n);this[i]=this._isViewAvailable(r)?this._renderSpecificView(r):null}}},_resetLocation:function(){Y(this._$viewsWrapper,{left:0,top:0})},_clean:function(){this.callBase(),this._clearViewWidthCache(),delete this._$viewsWrapper,delete this._navigator,delete this._$footer},_clearViewWidthCache:function(){delete this._viewWidthValue},_disposeViews:function(){this._view.$element().remove(),this._beforeView&&this._beforeView.$element().remove(),this._afterView&&this._afterView.$element().remove(),delete this._view,delete this._beforeView,delete this._afterView},_dispose:function(){clearTimeout(this._waitRenderViewTimeout),this.callBase()},_refreshViews:function(){this._disposeViews(),this._renderViews()},_visibilityChanged:function(){this._translateViews()},_focusInHandler:function(){this.callBase.apply(this,arguments),this._view.option("contouredDate",this.option("currentDate"))},_focusOutHandler:function(){this.callBase.apply(this,arguments),this._view.option("contouredDate",null)},_updateViewsValue:function(e){var t=e?new Date(e):null;this._view.option("value",t),this._beforeView&&this._beforeView.option("value",t),this._afterView&&this._afterView.option("value",t)},_updateAriaSelected:function(e,t){var i;e=(i=e)!==null&&i!==void 0?i:this._dateOption("value");var a=this._view._getCellByDate(t),n=this._view._getCellByDate(e);this.setAria("selected",void 0,a),this.setAria("selected",!0,n),e&&this.option("currentDate").getTime()===e.getTime()&&this._updateAriaId(e)},_updateAriaId:function(e){var t;e=(t=e)!==null&&t!==void 0?t:this.option("currentDate");var i="dx-"+new Zt,a=this._view._getCellByDate(e);this.setAria("id",i,a),this.setAria("activedescendant",i),this._onContouredChanged(i)},_suppressingNavigation:function(e,t){this._suppressNavigation=!0,e.apply(this,t),delete this._suppressNavigation},_optionChanged:function(e){var t=e.value,i=e.previousValue;switch(e.name){case"width":this.callBase(e),this._clearViewWidthCache();break;case"min":case"max":this.min=void 0,this.max=void 0,this._suppressingNavigation(this._updateCurrentDate,[this.option("currentDate")]),this._refreshViews(),this._renderNavigator();break;case"firstDayOfWeek":this._refreshViews(),this._updateButtonsVisibility();break;case"currentDate":this.setAria("id",void 0,this._view._getCellByDate(i)),this._updateCurrentDate(t);break;case"zoomLevel":this.$element().removeClass(Xe+"-"+i),this._correctZoomLevel(),this._refreshViews(),this._renderNavigator(),this._updateAriaId();break;case"minZoomLevel":case"maxZoomLevel":this._correctZoomLevel(),this._updateButtonsVisibility();break;case"value":t=this._convertToDate(t),i=this._convertToDate(i),this._updateAriaSelected(t,i),this.option("currentDate",f(t)?new Date(t):new Date),this._updateViewsValue(t),this._setSubmitValue(t),this.callBase(e);break;case"onCellClick":this._view.option("onCellClick",t);break;case"onContouredChanged":this._onContouredChanged=this._createActionByOption("onContouredChanged");break;case"disabledDates":case"dateSerializationFormat":case"cellTemplate":case"showTodayButton":this._invalidate();break;case"skipFocusCheck":break;case"_todayDate":case"showWeekNumbers":case"weekNumberRule":this._refreshViews();break;default:this.callBase(e)}},getContouredDate:function(){return this._view.option("contouredDate")}});W("dxCalendar",Oe);var $n=Object.freeze(Object.defineProperty({__proto__:null,default:Oe},Symbol.toStringTag,{value:"Module"})),te=rt.abstract,_e=rt.inherit({ctor:function(e){this.dateBox=e},widgetOption:function(){return this._widget&&this._widget.option.apply(this._widget,arguments)},_renderWidget:function(e){e=e||l("<div>"),this._widget=this._createWidget(e),this._widget.$element().appendTo(this._getWidgetContainer())},_createWidget:function(e){var t=this._getWidgetName(),i=this._getWidgetOptions();return this.dateBox._createComponent(e,t,i)},_getWidgetOptions:te,_getWidgetName:te,getDefaultOptions:function(){return{mode:"text"}},getDisplayFormat:te,supportedKeys:v,getKeyboardListener:v,customizeButtons:v,getParsedText:function(e,t){var i=h.parse(e,t);return i||h.parse(e)},renderInputMinMax:v,renderOpenedState:function(){this._updateValue()},popupConfig:te,_dimensionChanged:function(){var e;(e=this._getPopup())===null||e===void 0||e.repaint()},renderPopupContent:function(){var e=this._getPopup();this._renderWidget();var t=e.$content().parent();m.off(t,"mousedown"),m.on(t,"mousedown",this._preventFocusOnPopup.bind(this))},getFirstPopupElement:v,getLastPopupElement:v,_preventFocusOnPopup:function(e){e.preventDefault()},_getWidgetContainer:function(){return this._getPopup().$content()},_getPopup:function(){return this.dateBox._popup},popupShowingHandler:v,popupHiddenHandler:v,_updateValue:function(){this._widget&&this._widget.option("value",this.dateBoxValue())},useCurrentDateByDefault:v,getDefaultDate:function(){return new Date},textChangedHandler:v,renderValue:function(){this.dateBox.option("opened")&&this._updateValue()},getValue:function(){return this._widget.option("value")},isAdaptivityChanged:function(){return!1},dispose:function(){var e=this._getPopup();e&&e.$content().empty()},dateBoxValue:function(){return arguments.length?this.dateBox.dateValue.apply(this.dateBox,arguments):this.dateBox.dateOption.apply(this.dateBox,["value"])}}),Et=_e.inherit({NAME:"Calendar",getDefaultOptions:function(){return _(this.callBase(),{todayButtonText:E.format("dxCalendar-todayButtonText")})},supportedKeys:function(){var e=function(t){return this.option("opened")?(t.preventDefault(),!0):!1};return{rightArrow:function(){if(this.option("opened"))return!0},leftArrow:function(){if(this.option("opened"))return!0},enter:function(t){if(this.dateBox.option("opened"))if(t.preventDefault(),this._widget.option("zoomLevel")===this._widget.option("maxZoomLevel")){var i=this._getContouredValue(),a=this._lastActionElement,n=this._closeDropDownByEnter();return n&&i&&a==="calendar"&&this.dateBoxValue(i,t),n&&this.dateBox.close(),this.dateBox._valueChangeEventHandler(t),!n}else return!0;else this.dateBox._valueChangeEventHandler(t)}.bind(this),home:e,end:e}},getDisplayFormat:function(e){return e||"shortdate"},_closeDropDownByEnter:()=>!0,_getWidgetName:function(){return Oe},_getContouredValue:function(){return this._widget._view.option("contouredDate")},getKeyboardListener(){return this._widget},_getWidgetOptions:function(){var e=this.dateBox.option("disabledDates");return _(this.dateBox.option("calendarOptions"),{value:this.dateBoxValue()||null,dateSerializationFormat:null,min:this.dateBox.dateOption("min"),max:this.dateBox.dateOption("max"),onValueChanged:this._valueChangedHandler.bind(this),onCellClick:this._cellClickHandler.bind(this),tabIndex:null,disabledDates:se(e)?this._injectComponent(e.bind(this.dateBox)):e,onContouredChanged:this._refreshActiveDescendant.bind(this),skipFocusCheck:!0})},_injectComponent:function(e){var t=this;return function(i){return _(i,{component:t.dateBox}),e(i)}},_refreshActiveDescendant:function(e){this._lastActionElement="calendar",this.dateBox.setAria("activedescendant",e.actionValue)},_getTodayButtonConfig(){var e=this.dateBox.option("buttonsLocation"),t=e==="default",i=t?["bottom","center"]:qt(e);return{widget:"dxButton",toolbar:i[0],location:i[1]==="after"?"before":i[1],options:{onInitialized:function(a){a.component.registerKeyHandler("escape",this._escapeHandler.bind(this))}.bind(this),onClick:a=>{this._widget._toTodayView(a)},text:this.dateBox.option("todayButtonText"),type:"today"}}},_isCalendarVisible:function(){var{calendarOptions:e}=this.dateBox.option();return Gt(e)||e.visible!==!1},_getPopupToolbarItems(e){var t=this.dateBox.option("applyValueMode")==="useButtons",i=t&&this._isCalendarVisible();if(i){var a=this._getTodayButtonConfig();return[a,...e]}return e},popupConfig:function(e){return _(!0,e,{position:{collision:"flipfit flip"},width:"auto"})},_escapeHandler:function(){this.dateBox.close(),this.dateBox.focus()},_valueChangedHandler:function(e){var t=e.value,i=e.previousValue;o.sameDate(t,i)&&o.sameHoursAndMinutes(t,i)||this.dateBox.option("applyValueMode")==="instantly"&&this.dateBoxValue(this.getValue(),e.event)},_updateValue:function(){!this._widget||this._widget.option("value",this.dateBoxValue())},textChangedHandler:function(){this._lastActionElement="input",this.dateBox.option("opened")&&this._widget&&this._updateValue(!0)},_cellClickHandler:function(e){var t=this.dateBox;t.option("applyValueMode")==="instantly"&&(t.option("opened",!1),this.dateBoxValue(this.getValue(),e.event))}});class Ua{constructor(t){this.DIRECTION_HORIZONTAL="horizontal",this.DIRECTION_VERTICAL="vertical",this.DIRECTION_BOTH="both",this.direction=t!=null?t:Ne}get isHorizontal(){return this.direction===pi||this.direction===ve}get isVertical(){return this.direction===Ne||this.direction===ve}get isBoth(){return this.direction===ve}}function Ka(e,t){if(Xt(e)){var i=Te(e.left,e.x),a=Te(e.top,e.y);return{left:f(i)?i:void 0,top:f(a)?a:void 0}}var{isHorizontal:n,isVertical:r}=new Ua(t);return{left:n&&f(e)?e:void 0,top:r&&f(e)?e:void 0}}var Za="dx-dateviewroller",qa="dx-state-active",Ga="dx-dateviewroller-current",je="dx-dateview-item",Xa="dx-dateview-item-selected",ja="dx-dateview-item-selected-frame",Qa="dx-dateview-item-selected-border";class Bt extends vi{_getDefaultOptions(){return _(super._getDefaultOptions(),{showScrollbar:"never",useNative:!1,selectedIndex:0,bounceEnabled:!1,items:[],showOnClick:!1,onClick:null,onSelectedIndexChanged:null,scrollByContent:!0})}_init(){super._init(),this.option("onVisibilityChange",this._visibilityChangedHandler.bind(this)),this.option("onEnd",this._endActionHandler.bind(this))}_render(){super._render(),this._renderSelectedItemFrame(),this.$element().addClass(Za),this._renderContainerClick(),this._renderItems(),this._renderSelectedValue(),this._renderItemsClick(),this._renderWheelEvent(),this._renderSelectedIndexChanged()}_renderSelectedIndexChanged(){this._selectedIndexChanged=this._createActionByOption("onSelectedIndexChanged")}_renderWheelEvent(){m.on(l(this.container()),"dxmousewheel",t=>{this._isWheelScrolled=!0})}_renderContainerClick(){if(!!this.option("showOnClick")){var t=b(xe,this.NAME),i=this._createActionByOption("onClick");m.off(l(this.container()),t),m.on(l(this.container()),t,function(a){i({event:a})})}}_renderItems(){var t=this.option("items")||[],i=l();l(this.content()).empty(),t.forEach(function(a){i=i.add(l("<div>").addClass(je).append(a))}),l(this.content()).append(i),this._$items=i,this.update()}_renderSelectedItemFrame(){l("<div>").addClass(ja).append(l("<div>").addClass(Qa)).appendTo(l(this.container()))}_renderSelectedValue(t){var i=this._fitIndex(t!=null?t:this.option("selectedIndex"));this._moveTo({top:this._getItemPosition(i)}),this._renderActiveStateItem()}_fitIndex(t){var i=this.option("items")||[],a=i.length;return t>=a?a-1:t<0?0:t}_getItemPosition(t){return Math.round(this._itemHeight()*t)}_renderItemsClick(){var t=this._getItemSelector(),i=b(xe,this.NAME);m.off(this.$element(),i,t),m.on(this.$element(),i,t,this._itemClickHandler.bind(this))}_getItemSelector(){return"."+je}_itemClickHandler(t){this.option("selectedIndex",this._itemElementIndex(t.currentTarget))}_itemElementIndex(t){return this._itemElements().index(t)}_itemElements(){return this.$element().find(this._getItemSelector())}_renderActiveStateItem(){var t=this.option("selectedIndex");T(this._$items,function(i){l(this).toggleClass(Xa,t===i)})}_shouldScrollToNeighborItem(){return N.real().deviceType==="desktop"&&this._isWheelScrolled}_moveTo(t){var{top:i,left:a}=Ka(t),n=this.scrollOffset(),r={x:n.left-a,y:n.top-i};if(this._isVisible()&&(r.x||r.y))if(this._prepareDirections(!0),this._animation&&!this._shouldScrollToNeighborItem()){var s=this;M.stop(l(this.content())),M.animate(l(this.content()),{duration:200,type:"slide",to:{top:Math.floor(r.y)},complete(){jt(l(s.content())),s.handleMove({delta:r})}}),delete this._animation}else this.handleMove({delta:r})}_validate(t){return this._moveIsAllowed(t)}_fitSelectedIndexInRange(t){var i=this.option("items").length;return Math.max(Math.min(t,i-1),0)}_isInNullNeighborhood(t){return-.1<=t&&t<=.1}_getSelectedIndexAfterScroll(t){var i=this.scrollOffset().top,a=t*this._itemHeight(),n=i-a;if(this._isInNullNeighborhood(n))return t;var r=n>0?1:-1,s=this._fitSelectedIndexInRange(t+r);return s}_getNewSelectedIndex(t){if(this._shouldScrollToNeighborItem())return this._getSelectedIndexAfterScroll(t);this._animation=!0;var i=this.scrollOffset().top/this._itemHeight();return Math.round(i)}_endActionHandler(){var t=this.option("selectedIndex"),i=this._getNewSelectedIndex(t);i===t?this._renderSelectedValue(i):this.option("selectedIndex",i),this._isWheelScrolled=!1}_itemHeight(){var t=this._$items.first();return st(t)}_toggleActive(t){this.$element().toggleClass(qa,t)}_isVisible(){return l(this.container()).is(":visible")}_fireSelectedIndexChanged(t,i){this._selectedIndexChanged({value:t,previousValue:i,event:void 0})}_visibilityChanged(t){super._visibilityChanged(t),this._visibilityChangedHandler(t)}_visibilityChangedHandler(t){t&&(this._visibilityTimer=setTimeout(()=>{this._renderSelectedValue(this.option("selectedIndex"))})),this.toggleActiveState(!1)}toggleActiveState(t){this.$element().toggleClass(Ga,t)}_refreshSelectedIndex(){var t=this.option("selectedIndex"),i=this._fitIndex(t);i===t?this._renderActiveStateItem():this.option("selectedIndex",i)}_optionChanged(t){switch(t.name){case"selectedIndex":this._fireSelectedIndexChanged(t.value,t.previousValue),this._renderSelectedValue(t.value);break;case"items":this._renderItems(),this._refreshSelectedIndex();break;case"onClick":case"showOnClick":this._renderContainerClick();break;case"onSelectedIndexChanged":this._renderSelectedIndexChanged();break;default:super._optionChanged(t)}}_dispose(){clearTimeout(this._visibilityTimer),super._dispose()}}W("dxDateViewRoller",Bt);var Ce="dx-dateview",Ja="dx-dateview-compact",en="dx-dateview-wrapper",tn="dx-dateview-rollers",an="dx-dateviewroller",Qe={date:"date",datetime:"datetime",time:"time"},w={year:"year",month:"month",day:"day",hours:"hours"},Ot=be.inherit({_valueOption:function(){var e=this.option("value"),t=new Date(e);return!e||isNaN(t)?this._getDefaultDate():t},_getDefaultDate:function(){var e=new Date;return this.option("type")===Qe.date?new Date(e.getFullYear(),e.getMonth(),e.getDate()):e},_getDefaultOptions:function(){return _(this.callBase(),{minDate:d.MIN_DATEVIEW_DEFAULT_DATE,maxDate:d.MAX_DATEVIEW_DEFAULT_DATE,type:Qe.date,value:new Date,applyCompactClass:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(e){return e.deviceType!=="desktop"},options:{applyCompactClass:!0}}])},_render:function(){this.callBase(),this.$element().addClass(Ce),this._toggleFormatClasses(this.option("type")),this._toggleCompactClass()},_toggleFormatClasses:function(e,t){this.$element().addClass(Ce+"-"+e),t&&this.$element().removeClass(Ce+"-"+t)},_toggleCompactClass:function(){this.$element().toggleClass(Ja,this.option("applyCompactClass"))},_wrapper:function(){return this._$wrapper},_renderContentImpl:function(){this._$wrapper=l("<div>").addClass(en),this._renderRollers(),this._$wrapper.appendTo(this.$element())},_renderRollers:function(){this._$rollersContainer||(this._$rollersContainer=l("<div>").addClass(tn)),this._$rollersContainer.empty(),this._createRollerConfigs(),this._rollers={};var e=this;T(e._rollerConfigs,function(t){var i=l("<div>").appendTo(e._$rollersContainer).addClass(an+"-"+e._rollerConfigs[t].type);e._rollers[e._rollerConfigs[t].type]=e._createComponent(i,Bt,{items:e._rollerConfigs[t].displayItems,selectedIndex:e._rollerConfigs[t].selectedIndex,showScrollbar:"never",scrollByContent:!0,onStart:function(a){var n=a.component;n._toggleActive(!0),e._setActiveRoller(e._rollerConfigs[t],n.option("selectedIndex"))},onEnd:function(a){var n=a.component;n._toggleActive(!1)},onClick:function(a){var n=a.component;n._toggleActive(!0),e._setActiveRoller(e._rollerConfigs[t],n.option("selectedIndex")),e._setRollerState(e._rollerConfigs[t],n.option("selectedIndex")),n._toggleActive(!1)},onSelectedIndexChanged:function(a){var n=a.component;e._setRollerState(e._rollerConfigs[t],n.option("selectedIndex"))}})}),e._$rollersContainer.appendTo(e._wrapper())},_createRollerConfigs:function(e){var t=this;e=e||t.option("type"),t._rollerConfigs={},h.getFormatParts(d.FORMATS_MAP[e]).forEach(function(i){t._createRollerConfig(i)})},_createRollerConfig:function(e){for(var t=d.DATE_COMPONENTS_INFO[e],i=this._calculateRollerConfigValueRange(e),a=i.startValue,n=i.endValue,r=t.formatter,s=this._getCurrentDate(),u={type:e,setValue:t.setter,valueItems:[],displayItems:[],getIndex:function(p){return p[t.getter]()-a}},c=a;c<=n;c++)u.valueItems.push(c),u.displayItems.push(r(c,s));u.selectedIndex=u.getIndex(s),this._rollerConfigs[e]=u},_setActiveRoller:function(e){var t=e&&this._rollers[e.type];T(this._rollers,function(){this.toggleActiveState(this===t)})},_updateRollersPosition:function(){var e=this;T(this._rollers,function(t){var i=e._rollerConfigs[t].getIndex(e._getCurrentDate());this.option("selectedIndex",i)})},_setRollerState:function(e,t){if(t!==e.selectedIndex){var i=e.valueItems[t],a=e.setValue,n=new Date(this._getCurrentDate()),r=n.getDate(),s=this.option("minDate"),u=this.option("maxDate");e.type===w.month?r=Math.min(r,d.getMaxMonthDay(n.getFullYear(),i)):e.type===w.year&&(r=Math.min(r,d.getMaxMonthDay(i,n.getMonth()))),n.setDate(r),n[a](i);var c=o.normalizeDate(n,s,u);n=d.mergeDates(c,n,"time"),n=o.normalizeDate(n,s,u),this.option("value",n),e.selectedIndex=t}e.type===w.year&&this._refreshRollers(),e.type===w.month&&(this._refreshRoller(w.day),this._refreshRoller(w.hours))},_refreshRoller:function(e){var t=this._rollers[e];if(t){this._createRollerConfig(e);var i=this._rollerConfigs[e];(e===w.day||i.displayItems.toString()!==t.option("items").toString())&&t.option({items:i.displayItems,selectedIndex:i.selectedIndex})}},_getCurrentDate:function(){var e=this._valueOption(),t=this.option("minDate"),i=this.option("maxDate");return o.normalizeDate(e,t,i)},_calculateRollerConfigValueRange:function(e){var t=this._getCurrentDate(),i=this.option("minDate"),a=this.option("maxDate"),n=o.sameYear(t,i),r=n&&t.getMonth()===i.getMonth(),s=o.sameYear(t,a),u=s&&t.getMonth()===a.getMonth(),c=r&&t.getDate()===i.getDate(),p=u&&t.getDate()===a.getDate(),V=d.DATE_COMPONENTS_INFO[e],S=V.startValue,g=V.endValue;return e===w.year&&(S=i.getFullYear(),g=a.getFullYear()),e===w.month&&(n&&(S=i.getMonth()),s&&(g=a.getMonth())),e===w.day&&(g=d.getMaxMonthDay(t.getFullYear(),t.getMonth()),n&&r&&(S=i.getDate()),s&&u&&(g=a.getDate())),e===w.hours&&(S=c?i.getHours():S,g=p?a.getHours():g),{startValue:S,endValue:g}},_refreshRollers:function(){this._refreshRoller(w.month),this._refreshRoller(w.day),this._refreshRoller(w.hours)},_optionChanged:function(e){switch(e.name){case"minDate":case"maxDate":case"type":this._renderRollers(),this._toggleFormatClasses(e.value,e.previousValue);break;case"visible":this.callBase(e),e.value&&this._renderRollers();break;case"value":this.option("value",this._valueOption()),this._refreshRollers(),this._updateRollersPosition();break;default:this.callBase(e)}},_clean:function(){this.callBase(),delete this._$rollersContainer}});W("dxDateView",Ot);var nn=he(),rn=_e.inherit({NAME:"DateView",getDefaultOptions:function(){return _(this.callBase(),{openOnFieldClick:!0,applyButtonText:E.format("OK"),"dropDownOptions.showTitle":!0})},getDisplayFormat:function(e){return e||d.FORMATS_MAP[this.dateBox.option("type")]},popupConfig:function(e){return{toolbarItems:this.dateBox._popupToolbarItemsConfig(),onInitialized:e.onInitialized,defaultOptionsRules:[{device:{platform:"android"},options:{width:333,height:331}},{device:function(t){var i=t.platform;return i==="generic"||i==="ios"},options:{width:"auto",height:"auto"}},{device:function(t){var i=t.platform,a=t.phone;return i==="generic"&&a},options:{width:333,maxWidth:"100%",maxHeight:"100%",height:"auto",position:{collision:"flipfit flip"}}},{device:{platform:"ios",phone:!0},options:{width:"100%",position:{my:"bottom",at:"bottom",of:nn}}}]}},_renderWidget:function(){if(Be(this.dateBox.option("mode"))&&this.dateBox._isNativeType()||this.dateBox.option("readOnly")){this._widget&&(this._widget.$element().remove(),this._widget=null);return}var e=this._getPopup();if(this._widget)this._widget.option(this._getWidgetOptions());else{var t=l("<div>").appendTo(e.$content());this._widget=this._createWidget(t)}this._widget.$element().appendTo(this._getWidgetContainer())},_getWidgetName:function(){return Ot},renderOpenedState:function(){this.callBase(),this._widget&&this._widget.option("value",this._widget._getCurrentDate())},_getWidgetOptions:function(){return{value:this.dateBoxValue()||new Date,type:this.dateBox.option("type"),minDate:this.dateBox.dateOption("min")||new Date(1900,0,1),maxDate:this.dateBox.dateOption("max")||new Date(Date.now()+50*d.ONE_YEAR),onDisposing:function(){this._widget=null}.bind(this)}}}),sn=_e.inherit({NAME:"Native",popupConfig:function(e){return _({},e,{width:"auto"})},getParsedText:function(e){return e?this.dateBox.option("type")==="datetime"?new Date(e.replace(/-/g,"/").replace("T"," ").split(".")[0]):d.fromStandardDateFormat(e):null},renderPopupContent:v,_getWidgetName:v,_getWidgetOptions:v,_getDateBoxType:function(){var e=this.dateBox.option("type");return d.SUPPORTED_FORMATS.includes(e)?e==="datetime"&&!Be(e)&&(e="datetime-local"):e="date",e},customizeButtons:function(){var e=this.dateBox.getButton("dropDown");N.real().android&&e&&e.on("click",function(){this.dateBox._input().get(0).click()}.bind(this))},getDefaultOptions:function(){return{mode:this._getDateBoxType()}},getDisplayFormat:function(e){var t=this._getDateBoxType();return e||d.FORMATS_MAP[t]},renderInputMinMax:function(e){e.attr({min:C.serializeDate(this.dateBox.dateOption("min"),"yyyy-MM-dd"),max:C.serializeDate(this.dateBox.dateOption("max"),"yyyy-MM-dd")})}}),on="dx-box",ln="dx-box-flex",un="dx-box-item",kt="dxBoxItemData",hn=1,dn={row:"minWidth",col:"minHeight"},cn={row:"maxWidth",col:"maxHeight"},Je={start:"flex-start",end:"flex-end",center:"center","space-between":"space-between","space-around":"space-around"},et={start:"flex-start",end:"flex-end",center:"center",stretch:"stretch"},_n={row:"row",col:"column"},R=(e,t,i)=>{if(i=Qt(t,i),e.style[Jt(t)]=i,!Ee()){if(i===""||!f(i))return;var a=ei(t),n=a+": "+i+";";e.attributes.style?e.attributes.style.value.indexOf(n)<0&&(e.attributes.style.value+=" "+n):e.setAttribute("style",n)}};class pn extends ti{_renderVisible(t,i){super._renderVisible(t),f(i)&&this._options.fireItemStateChangedAction({name:"visible",state:t,oldState:i})}}class vn{constructor(t,i){this._$element=t,this._option=i}renderBox(){this._$element.css({display:pe("flexDirection")+"flex"}),R(this._$element.get(0),"flexDirection",_n[this._option("direction")])}renderAlign(){this._$element.css({justifyContent:this._normalizedAlign()})}_normalizedAlign(){var t=this._option("align");return t in Je?Je[t]:t}renderCrossAlign(){this._$element.css({alignItems:this._normalizedCrossAlign()})}_normalizedCrossAlign(){var t=this._option("crossAlign");return t in et?et[t]:t}renderItems(t){var i=pe("flexDirection"),a=this._option("direction");T(t,function(){var n=l(this),r=n.data(kt);n.css({display:i+"flex"}).css(cn[a],r.maxSize||"none").css(dn[a],r.minSize||"0"),R(n.get(0),"flexBasis",r.baseSize||0),R(n.get(0),"flexGrow",r.ratio),R(n.get(0),"flexShrink",f(r.shrink)?r.shrink:hn),n.children().each((s,u)=>{l(u).css({width:"auto",height:"auto",display:pe("flexDirection")+"flex",flexBasis:0}),R(u,"flexGrow",1),R(u,"flexDirection",l(u)[0].style.flexDirection||"column")})})}}class F extends ii{_getDefaultOptions(){return _(super._getDefaultOptions(),{direction:"row",align:"start",crossAlign:"stretch",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,_queue:void 0})}_itemClass(){return un}_itemDataKey(){return kt}_itemElements(){return this._itemContainer().children(this._itemSelector())}_init(){super._init(),this.$element().addClass(ln),this._initLayout(),this._initBoxQueue()}_initLayout(){this._layout=new vn(this.$element(),this.option.bind(this))}_initBoxQueue(){this._queue=this.option("_queue")||[]}_queueIsNotEmpty(){return this.option("_queue")?!1:!!this._queue.length}_pushItemToQueue(t,i){this._queue.push({$item:t,config:i})}_shiftItemFromQueue(){return this._queue.shift()}_initMarkup(){this.$element().addClass(on),this._layout.renderBox(),super._initMarkup(),this._renderAlign(),this._renderActions()}_renderActions(){this._onItemStateChanged=this._createActionByOption("onItemStateChanged")}_renderAlign(){this._layout.renderAlign(),this._layout.renderCrossAlign()}_renderItems(t){for(super._renderItems(t);this._queueIsNotEmpty();){var i=this._shiftItemFromQueue();this._createComponent(i.$item,F,_({itemTemplate:this.option("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this.option("onItemHold"),onItemClick:this.option("onItemClick"),onItemContextMenu:this.option("onItemContextMenu"),onItemRendered:this.option("onItemRendered"),_queue:this._queue},i.config))}this._layout.renderItems(this._itemElements())}_renderItemContent(t){var i=t.itemData&&t.itemData.node;return i?this._renderItemContentByNode(t,i):super._renderItemContent(t)}_postprocessRenderItem(t){var i=t.itemData.box;!i||this._pushItemToQueue(t.itemContent,i)}_createItemByTemplate(t,i){return i.itemData.box?t.source?t.source():l():super._createItemByTemplate(t,i)}_itemOptionChanged(t,i,a,n){i==="visible"&&this._onItemStateChanged({name:i,state:a,oldState:n!==!1}),super._itemOptionChanged(t,i,a)}_optionChanged(t){switch(t.name){case"_queue":case"direction":this._invalidate();break;case"align":this._layout.renderAlign();break;case"crossAlign":this._layout.renderCrossAlign();break;default:super._optionChanged(t)}}_itemOptions(){var t=super._itemOptions();return t.fireItemStateChangedAction=i=>{this._onItemStateChanged(i)},t}}F.ItemClass=pn;W("dxBox",F);var fn="dx-timeview",mn="dx-timeview-clock",gn="dx-timeview-field",Dn="dx-timeview-hourarrow",Cn="dx-timeview-time-separator",yn="dx-timeview-format12",ye=-1,we=1,wn="dx-timeview-minutearrow",tt=function(e,t,i){xn(e,t,i)},xn=function(e,t,i){e.css("transform","rotate("+t+"deg) translate(0,"+i+"px)")},Nt=be.inherit({_getDefaultOptions:function(){return _(this.callBase(),{value:new Date(Date.now()),use24HourFormat:!0,_showClock:!0,_arrowOffset:5,stylingMode:void 0})},_getValue:function(){return this.option("value")||new Date},_init:function(){this.callBase(),this.$element().addClass(fn)},_render:function(){this.callBase(),this._renderBox(),this._updateTime()},_renderBox:function(){var e=l("<div>").appendTo(this.$element()),t=[];this.option("_showClock")&&t.push({ratio:1,shrink:0,baseSize:"auto",template:this._renderClock.bind(this)}),t.push({ratio:0,shrink:0,baseSize:"auto",template:this._renderField.bind(this)}),this._createComponent(e,F,{height:"100%",width:"100%",direction:"col",items:t})},_renderClock:function(e,t,i){this._$hourArrow=l("<div>").addClass(Dn),this._$minuteArrow=l("<div>").addClass(wn);var a=l(i);a.addClass(mn).append(this._$hourArrow).append(this._$minuteArrow),this.setAria("role","presentation",a)},_updateClock:function(){var e=this._getValue(),t=e.getHours()/12*360+e.getMinutes()/60*30,i=e.getMinutes()/60*360;tt(this._$hourArrow,t,this.option("_arrowOffset")),tt(this._$minuteArrow,i,this.option("_arrowOffset"))},_getBoxItems:function(e){var t=[{ratio:0,shrink:0,baseSize:"auto",template:()=>this._hourBox.$element()},{ratio:0,shrink:0,baseSize:"auto",template:l("<div>").addClass(Cn).text(h.getTimeSeparator())},{ratio:0,shrink:0,baseSize:"auto",template:()=>this._minuteBox.$element()}];return e&&t.push({ratio:0,shrink:0,baseSize:"auto",template:()=>this._format12.$element()}),t},_renderField:function(){var e=!this.option("use24HourFormat");return this._createHourBox(e),this._createMinuteBox(),e&&this._createFormat12Box(),this._createComponent(l("<div>").addClass(gn),F,{direction:"row",align:"center",crossAlign:"center",items:this._getBoxItems(e)}).$element()},_createHourBox:function(e){var t=this._hourBox=this._createComponent(l("<div>"),Le,_({min:-1,max:e?13:24,value:this._getValue().getHours(),onValueChanged:this._onHourBoxValueChanged.bind(this),onKeyboardHandled:i=>this._keyboardHandler(i)},this._getNumberBoxConfig()));t.setAria("label","hours")},_isPM:function(){return!this.option("use24HourFormat")&&this._format12.option("value")===1},_onHourBoxValueChanged:function(e){var{value:t,component:i}=e,a=this._getValue(),n=new Date(a),r=this._convertMaxHourToMin(t);i.option("value",r),this._isPM()&&(r+=12),n.setHours(r),d.normalizeTime(n),this.option("value",n)},_convertMaxHourToMin:function(e){var t=this.option("use24HourFormat")?24:12;return(t+e)%t},_createMinuteBox:function(){var e=this._minuteBox=this._createComponent(l("<div>"),Le,_({min:-1,max:60,value:this._getValue().getMinutes(),onKeyboardHandled:t=>this._keyboardHandler(t),onValueChanged:t=>{var{value:i,component:a}=t,n=(60+i)%60;a.option("value",n);var r=new Date(this._getValue());r.setMinutes(n),d.normalizeTime(r),this.option("value",r)}},this._getNumberBoxConfig()));e.setAria("label","minutes")},_createFormat12Box:function(){var e=h.getPeriodNames(),t=this._format12=this._createComponent(l("<div>").addClass(yn),fi,{items:[{value:ye,text:e[0]},{value:we,text:e[1]}],valueExpr:"value",displayExpr:"text",onKeyboardHandled:i=>this._keyboardHandler(i),onValueChanged:i=>{var{value:a}=i,n=this._getValue().getHours(),r=new Date(this._getValue()),s=(n+12*a)%24;r.setHours(s),this.option("value",r)},value:this._getValue().getHours()>=12?we:ye,stylingMode:this.option("stylingMode")});t.setAria("label","type")},_refreshFormat12:function(){if(!this.option("use24HourFormat")){var e=this._getValue(),t=e.getHours(),i=t>=12,a=i?we:ye;this._silentEditorValueUpdate(this._format12,a)}},_silentEditorValueUpdate:function(e,t){e&&(e._suppressValueChangeAction(),e.option("value",t),e._resumeValueChangeAction())},_getNumberBoxConfig:function(){return{showSpinButtons:!0,displayValueFormatter:function(e){return(e<10?"0":"")+e},stylingMode:this.option("stylingMode")}},_normalizeHours:function(e){return this.option("use24HourFormat")?e:e%12||12},_updateField:function(){var e=this._normalizeHours(this._getValue().getHours());this._silentEditorValueUpdate(this._hourBox,e),this._silentEditorValueUpdate(this._minuteBox,this._getValue().getMinutes()),this._refreshFormat12()},_updateTime:function(){this.option("_showClock")&&this._updateClock(),this._updateField()},_visibilityChanged:function(e){e&&this._updateTime()},_optionChanged:function(e){switch(e.name){case"value":this._updateTime(),this.callBase(e);break;case"_arrowOffset":break;case"use24HourFormat":case"_showClock":case"stylingMode":this._invalidate();break;default:this.callBase(e)}}});W("dxTimeView",Nt);var An=he(),Tn=573,Sn="dx-datebox-adaptivity-mode",it="dx-datebox-datetime-time-side",In=Et.inherit({NAME:"CalendarWithTime",getDefaultOptions:function(){return _(this.callBase(),{applyValueMode:"useButtons",buttonsLocation:"bottom after","dropDownOptions.showTitle":!1})},_closeDropDownByEnter:function(){return o.sameDate(this._getContouredValue(),this.widgetOption("value"))},getDisplayFormat:function(e){return e||"shortdateshorttime"},_is24HourFormat:function(){return h.is24HourFormat(this.getDisplayFormat(this.dateBox.option("displayFormat")))},_getContouredValue:function(){var e=this.callBase();return this._updateDateTime(e)},_renderWidget:function(){this.callBase(),this._timeView=this.dateBox._createComponent(l("<div>"),Nt,{value:this.dateBoxValue(),_showClock:!this._isShrinkView(),use24HourFormat:this._is24HourFormat(),onValueChanged:this._valueChangedHandler.bind(this),stylingMode:this.dateBox.option("stylingMode")}),this._timeView.registerKeyHandler("escape",this._escapeHandler.bind(this))},renderOpenedState:function(){this.callBase();var e=this._getPopup();e&&e.$wrapper().toggleClass(Sn,this._isSmallScreen()),clearTimeout(this._repaintTimer),this._repaintTimer=setTimeout(function(){this._getPopup()&&this._getPopup().repaint()}.bind(this),0)},isAdaptivityChanged:function(){var e=this._isShrinkView(),t=this._currentAdaptiveMode;return e!==t?(this._currentAdaptiveMode=e,t!==void 0):this.callBase()},_updateValue:function(e){var t=this.dateBoxValue();!t&&!e&&(t=new Date,d.normalizeTime(t)),this.callBase(),this._timeView&&(t&&this._timeView.option("value",t),this._timeView.option("use24HourFormat",this._is24HourFormat()))},_isSmallScreen:function(){return nt(An)<=Tn},_isShrinkView:function(){return!this.dateBox.option("showAnalogClock")||this.dateBox.option("adaptivityEnabled")&&this._isSmallScreen()},_getBoxItems:function(){var e=[{ratio:0,shrink:0,baseSize:"auto",name:"calendar"}];return this._isShrinkView()||e.push({ratio:0,shrink:0,baseSize:"auto",name:"time"}),e},renderPopupContent:function(){this.callBase(),this._currentAdaptiveMode=this._isShrinkView();var e=this._getPopup().$content();this._box=this.dateBox._createComponent(l("<div>").appendTo(e),F,{direction:"row",crossAlign:"stretch",items:this._getBoxItems(),itemTemplate:function(t,i,a){var n=l("<div>");switch(t.name){case"calendar":n.append(this._widget.$element()),this._isShrinkView()&&(this._timeView.$element().addClass(it),n.append(this._timeView.$element()));break;case"time":n.append(this._timeView.$element()),l(a).addClass(it)}return n}.bind(this)}),this._attachTabHandler()},popupConfig:function(e){var t=this.callBase(e);return _(t,{width:"auto"})},getFirstPopupElement:function(){return this._timeView._hourBox.$element().find("input")},_attachTabHandler:function(){var e=this.dateBox;this._timeView._hourBox.registerKeyHandler("tab",function(t){t.shiftKey&&(t.preventDefault(),e.focus())})},_preventFocusOnPopup:function(e){l(e.target).hasClass("dx-texteditor-input")||(this.callBase.apply(this,arguments),this.dateBox._hasFocusClass()||this.dateBox.focus())},_updateDateTime:function(e){var t=this._timeView.option("value");return e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e},getValue:function(){var e,t=(e=this._widget.option("value"))!==null&&e!==void 0?e:this._widget.getContouredDate();return t=t?new Date(t):new Date,this._updateDateTime(t)},dispose:function(){clearTimeout(this._removeMinWidthTimer),clearTimeout(this._repaintTimer),this.callBase()}}),Vn=he(),Mn="date",bn={min:new Date(0,0,0,0,0),max:new Date(0,0,0,23,59)},En=_e.inherit({NAME:"List",supportedKeys:function(){return{tab:function(){var{opened:e,applyValueMode:t}=this.option();e&&t==="instantly"&&this.close()},space:v,home:v,end:v}},getDefaultOptions:function(){return _(this.callBase(),{applyValueMode:"instantly"})},getDisplayFormat:function(e){return e||"shorttime"},popupConfig:function(e){return e},getValue:function(){var e=this._widget.option("selectedIndex");if(e===-1)return this.dateBox.option("value");var t=this._widgetItems[e];return this._getDateByItemData(t)},useCurrentDateByDefault:function(){return!0},getDefaultDate:function(){return new Date(null)},popupShowingHandler:function(){this.dateBox._dimensionChanged()},_renderWidget:function(){this.callBase(),this._refreshItems()},_getWidgetName:function(){return mi},_getWidgetOptions:function(){return{itemTemplate:this._timeListItemTemplate.bind(this),onItemClick:this._listItemClickHandler.bind(this),tabIndex:-1,onFocusedItemChanged:this._refreshActiveDescendant.bind(this),selectionMode:"single"}},_refreshActiveDescendant:function(e){this.dateBox.setAria("activedescendant",""),this.dateBox.setAria("activedescendant",e.actionValue)},_refreshItems:function(){this._widgetItems=this._getTimeListItems(),this._widget.option("items",this._widgetItems)},renderOpenedState:function(){!this._widget||(this._widget.option("focusedElement",null),this._setSelectedItemsByValue(),this._widget.option("templatesRenderAsynchronously")?this._asyncScrollTimeout=setTimeout(this._scrollToSelectedItem.bind(this)):this._scrollToSelectedItem())},dispose:function(){this.callBase(),clearTimeout(this._asyncScrollTimeout)},_updateValue:function(){!this._widget||(this._refreshItems(),this._setSelectedItemsByValue(),this._scrollToSelectedItem())},_setSelectedItemsByValue:function(){var e=this.dateBoxValue(),t=this._getDateIndex(e);t===-1?this._widget.option("selectedItems",[]):this._widget.option("selectedIndex",t)},_scrollToSelectedItem:function(){this._widget.scrollToItem(this._widget.option("selectedIndex"))},_getDateIndex:function(e){for(var t=-1,i=0,a=this._widgetItems.length;i<a;i++)if(this._areDatesEqual(e,this._widgetItems[i])){t=i;break}return t},_areDatesEqual:function(e,t){return B(e)&&B(t)&&e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes()},_getTimeListItems:function(){var e=this.dateBox.dateOption("min")||this._getBoundaryDate("min"),t=this.dateBox.dateOption("max")||this._getBoundaryDate("max"),i=this.dateBox.dateOption("value")||null,a=t-e,n=e.getMinutes()%this.dateBox.option("interval");return a<0?[]:(a>d.ONE_DAY&&(a=d.ONE_DAY),i-e<d.ONE_DAY?this._getRangeItems(e,new Date(e),a):(e=this._getBoundaryDate("min"),e.setMinutes(n),i&&Math.abs(i-t)<d.ONE_DAY&&(a=(60*t.getHours()+Math.abs(t.getMinutes()-n))*d.ONE_MINUTE),this._getRangeItems(e,new Date(e),a)))},_getRangeItems:function(e,t,i){for(var a=[],n=this.dateBox.option("interval");t-e<=i;)a.push(new Date(t)),t.setMinutes(t.getMinutes()+n);return a},_getBoundaryDate:function(e){var t=bn[e],i=new Date(Te(this.dateBox.dateOption("value"),0));return new Date(i.getFullYear(),i.getMonth(),i.getDate(),t.getHours(),t.getMinutes())},_timeListItemTemplate:function(e){var t=this.dateBox.option("displayFormat");return h.format(e,this.getDisplayFormat(t))},_listItemClickHandler:function(e){if(this.dateBox.option("applyValueMode")!=="useButtons"){var t=this._getDateByItemData(e.itemData);this.dateBox.option("opened",!1),this.dateBoxValue(t,e.event)}},_getDateByItemData:function(e){var t=this.dateBox.option("value"),i=e.getHours(),a=e.getMinutes(),n=e.getSeconds(),r=e.getFullYear(),s=e.getMonth(),u=e.getDate();return t?(this.dateBox.option("dateSerializationFormat")?t=C.deserializeDate(t):t=new Date(t),t.setHours(i),t.setMinutes(a),t.setSeconds(n),t.setFullYear(r),t.setMonth(s),t.setDate(u)):t=new Date(r,s,u,i,a,0,0),t},getKeyboardListener:function(){return this._widget},_updatePopupHeight:function(){var e=gi(this.dateBox.option("dropDownOptions.height"));if(e===void 0||e==="auto"){this.dateBox._setPopupOption("height","auto");var t=ai(this._widget.$element()),i=.45*st(Vn);this.dateBox._setPopupOption("height",Math.min(t,i))}this.dateBox._timeList&&this.dateBox._timeList.updateDimensions()},getParsedText:function(e,t){var i=this.callBase(e,t);return i&&(i=d.mergeDates(i,new Date(null),Mn)),i}}),z=he(),U="dx-datebox",Bn="dx-auto-width",On="dx-show-invalid-badge",kn="dx-clear-button-area",ie="dx-datebox-wrapper",Nn="dx-dropdowneditor-overlay",x={calendar:"calendar",rollers:"rollers",list:"list",native:"native"},I={date:"date",datetime:"datetime",time:"time"},K={calendar:"Calendar",dateView:"DateView",native:"Native",calendarWithTime:"CalendarWithTime",list:"List"},Ln={Calendar:Et,DateView:rn,Native:sn,CalendarWithTime:In,List:En},Fn=Di.inherit({_supportedKeys:function(){return _(this.callBase(),this._strategy.supportedKeys())},_renderButtonContainers:function(){this.callBase.apply(this,arguments),this._strategy.customizeButtons()},_getDefaultOptions:function(){return _(this.callBase(),{type:"date",showAnalogClock:!0,value:null,dateSerializationFormat:void 0,min:void 0,max:void 0,displayFormat:null,interval:30,disabledDates:null,pickerType:x.calendar,invalidDateMessage:E.format("dxDateBox-validation-datetime"),dateOutOfRangeMessage:E.format("validation-range"),applyButtonText:E.format("OK"),adaptivityEnabled:!1,calendarOptions:{},useHiddenSubmitElement:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{"dropDownOptions.showTitle":!0}},{device:{platform:"android"},options:{buttonsLocation:"bottom after"}},{device:function(){var e=N.real(),t=e.platform;return t==="ios"||t==="android"},options:{pickerType:x.native}},{device:{platform:"generic",deviceType:"desktop"},options:{buttonsLocation:"bottom after"}}])},_initOptions:function(e){this._userOptions=_({},e),this.callBase(e),this._updatePickerOptions()},_updatePickerOptions:function(){var e=this.option("pickerType"),t=this.option("type");e===x.list&&(t===I.datetime||t===I.date)&&(e=x.calendar),t===I.time&&e===x.calendar&&(e=x.list),this.option("showDropDownButton",N.real().platform!=="generic"||e!==x.native),this._pickerType=e},_init:function(){this._initStrategy(),this.option(_({},this._strategy.getDefaultOptions(),this._userOptions)),delete this._userOptions,this.callBase()},_toLowerCaseFirstLetter:function(e){return e.charAt(0).toLowerCase()+e.substr(1)},_initStrategy:function(){var e=this._getStrategyName(this._getFormatType()),t=Ln[e];this._strategy&&this._strategy.NAME===e||(this._strategy=new t(this))},_getFormatType:function(){var e=this.option("type"),t=/h|m|s/g.test(e),i=/d|M|Y/g.test(e),a="";return i&&(a+=I.date),t&&(a+=I.time),a},_getStrategyName:function(e){var t=this._pickerType;return t===x.rollers?K.dateView:t===x.native?K.native:e===I.date?K.calendar:e===I.datetime?K.calendarWithTime:K.list},_initMarkup:function(){this.$element().addClass(U),this.callBase(),this._refreshFormatClass(),this._refreshPickerTypeClass(),this._strategy.renderInputMinMax(this._input())},_render:function(){this.callBase(),this._formatValidationIcon()},_renderDimensions:function(){this.callBase(),this.$element().toggleClass(Bn,!this.option("width")),this._dimensionChanged()},_dimensionChanged:function(){if(this.callBase(arguments),this._popup){var e,t;(e=(t=this._strategy)._updatePopupHeight)===null||e===void 0||e.call(t)}},_refreshFormatClass:function(){var e=this.$element();T(I,function(t,i){e.removeClass(U+"-"+i)}),e.addClass(U+"-"+this.option("type"))},_refreshPickerTypeClass:function(){var e=this.$element();T(x,function(t,i){e.removeClass(U+"-"+i)}),e.addClass(U+"-"+this._pickerType)},_formatValidationIcon:function(){if(!!Ee()){var e=this._input().get(0),t=this.option("rtlEnabled"),i=this._getClearButtonWidth(),a=this._getLongestElementDimensions(),n=parseFloat(z.getComputedStyle(e).width)-i,r=a.width>n,s=e.style;this.$element().toggleClass(On,!r),r?(this._storedPadding===void 0&&(this._storedPadding=t?a.leftPadding:a.rightPadding),t?s.paddingLeft=0:s.paddingRight=0):t?s.paddingLeft=this._storedPadding+"px":s.paddingRight=this._storedPadding+"px"}},_getClearButtonWidth:function(){var e=0;if(this._isClearButtonVisible()&&this._input().val()===""){var t=this.$element().find("."+kn).get(0);e=parseFloat(z.getComputedStyle(t).width)}return e},_getLongestElementDimensions:function(){var e=this._strategy.getDisplayFormat(this.option("displayFormat")),t=h.format(d.getLongestDate(e,h.getMonthNames(),h.getDayNames()),e),i=this._input(),a=i.get(0),n=ni(i,t),r=this._storedPadding!==void 0,s=r?this._storedPadding:0;n.appendTo(this.$element());var u=parseFloat(z.getComputedStyle(n.get(0)).width),c=parseFloat(z.getComputedStyle(a).paddingRight),p=parseFloat(z.getComputedStyle(a).paddingLeft),V=u+p+c+s;return n.remove(),{width:V,leftPadding:p,rightPadding:c}},_getKeyboardListeners(){return this.callBase().concat([this._strategy&&this._strategy.getKeyboardListener()])},_renderPopup:function(){this.callBase(),this._popup.$wrapper().addClass(ie),this._renderPopupWrapper()},_getPopupToolbarItems(){var e,t,i,a=this.callBase();return(e=(t=(i=this._strategy)._getPopupToolbarItems)===null||t===void 0?void 0:t.call(i,a))!==null&&e!==void 0?e:a},_popupConfig:function(){var e=this.callBase();return _(this._strategy.popupConfig(e),{title:this._getPopupTitle(),dragEnabled:!1})},_renderPopupWrapper:function(){if(!!this._popup){var e=this.$element(),t=_({},I,x);T(t,function(i,a){e.removeClass(ie+"-"+a)}.bind(this)),this._popup.$wrapper().addClass(ie+"-"+this.option("type")).addClass(ie+"-"+this._pickerType).addClass(Nn)}},_renderPopupContent:function(){this.callBase(),this._strategy.renderPopupContent()},_getFirstPopupElement:function(){return this._strategy.getFirstPopupElement()||this.callBase()},_getLastPopupElement:function(){return this._strategy.getLastPopupElement()||this.callBase()},_popupShowingHandler:function(){this.callBase(),this._strategy.popupShowingHandler()},_popupShownHandler:function(){this.callBase(),this._strategy.renderOpenedState()},_popupHiddenHandler:function(){this.callBase(),this._strategy.renderOpenedState(),this._strategy.popupHiddenHandler()},_visibilityChanged:function(e){e&&this._formatValidationIcon()},_clearValueHandler:function(e){this.option("text",""),this.callBase(e)},_readOnlyPropValue:function(){if(this._pickerType===x.rollers)return!0;var e=N.real().platform,t=this._isNativeType()&&(e==="ios"||e==="android");return t?this.option("readOnly"):this.callBase()},_isClearButtonVisible:function(){return this.callBase()&&!this._isNativeType()},_renderValue:function(){var e=this.dateOption("value");return this.option("text",this._getDisplayedText(e)),this._strategy.renderValue(),this.callBase()},_setSubmitValue:function(){var e=this.dateOption("value"),t=this.option("dateSerializationFormat"),i=d.SUBMIT_FORMATS_MAP[this.option("type")],a=t?C.serializeDate(e,t):d.toStandardDateFormat(e,i);this._getSubmitElement().val(a)},_getDisplayedText:function(e){var t=this.option("mode"),i;if(t==="text"){var a=this._strategy.getDisplayFormat(this.option("displayFormat"));i=h.format(e,a)}else{var n=this._getFormatByMode(t);n?i=h.format(e,n):i=d.toStandardDateFormat(e,t)}return i},_getFormatByMode:function(e){return Be(e)?null:d.FORMATS_MAP[e]},_valueChangeEventHandler:function(e){var{text:t,type:i,validationError:a}=this.option(),n=this.dateOption("value");if(t===this._getDisplayedText(n)){(!a||a.editorSpecific)&&(this._applyInternalValidation(n),this._applyCustomValidation(n));return}var r=this._getParsedDate(t),s=n!=null?n:this._getDateByDefault(),u=d.mergeDates(s,r,i),c=r&&i==="time"?u:r;if(this._applyInternalValidation(c).isValid){var p=this._getDisplayedText(u);s&&u&&s.getTime()===u.getTime()&&p!==t?this._renderValue():this.dateValue(u,e)}},_getDateByDefault:function(){return this._strategy.useCurrentDateByDefault()&&this._strategy.getDefaultDate()},_getParsedDate:function(e){var t=this._strategy.getDisplayFormat(this.option("displayFormat")),i=this._strategy.getParsedText(e,t);return i!=null?i:void 0},_applyInternalValidation(e){var t=this.option("text"),i=!!t&&e!==null,a=!!e&&B(e)&&!isNaN(e.getTime()),n=a&&o.dateInRange(e,this.dateOption("min"),this.dateOption("max"),this.option("type")),r=!i&&!e||n,s="";return a?n||(s=this.option("dateOutOfRangeMessage")):s=this.option("invalidDateMessage"),this.option({isValid:r,validationError:r?null:{editorSpecific:!0,message:s}}),{isValid:r,isDate:a}},_applyCustomValidation:function(e){this.validationRequest.fire({editor:this,value:this._serializeDate(e)})},_isValueChanged:function(e){var t=this.dateOption("value"),i=t&&t.getTime(),a=e&&e.getTime();return i!==a},_isTextChanged:function(e){var t=this.option("text"),i=e&&this._getDisplayedText(e)||"";return t!==i},_renderProps:function(){this.callBase(),this._input().attr("autocomplete","off")},_renderOpenedState:function(){this._isNativeType()||this.callBase(),this._strategy.isAdaptivityChanged()&&this._refreshStrategy()},_getPopupTitle:function(){var e=this.option("placeholder");if(e)return e;var t=this.option("type");return t===I.time?E.format("dxDateBox-simulatedDataPickerTitleTime"):t===I.date||t===I.datetime?E.format("dxDateBox-simulatedDataPickerTitleDate"):""},_refreshStrategy:function(){this._strategy.dispose(),this._initStrategy(),this.option(this._strategy.getDefaultOptions()),this._refresh()},_applyButtonHandler:function(e){var t=this._strategy.getValue();this.dateValue(t,e.event),this.callBase()},_dispose:function(){var e;this.callBase(),(e=this._strategy)===null||e===void 0||e.dispose()},_isNativeType:function(){return this._pickerType===x.native},_updatePopupTitle:function(){var e;(e=this._popup)===null||e===void 0||e.option("title",this._getPopupTitle())},_optionChanged:function(e){switch(e.name){case"showClearButton":case"buttons":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"pickerType":this._updatePickerOptions({pickerType:e.value}),this._refreshStrategy(),this._refreshPickerTypeClass(),this._invalidate();break;case"type":this._updatePickerOptions({format:e.value}),this._refreshStrategy(),this._refreshFormatClass(),this._renderPopupWrapper(),this._formatValidationIcon(),this._updateValue();break;case"placeholder":this.callBase.apply(this,arguments),this._updatePopupTitle();break;case"min":case"max":var t=this.option("isValid");this._applyInternalValidation(this.dateOption("value")),t||this._applyCustomValidation(this.dateOption("value")),this._invalidate();break;case"dateSerializationFormat":case"interval":case"disabledDates":case"calendarOptions":this._invalidate();break;case"displayFormat":this.option("text",this._getDisplayedText(this.dateOption("value"))),this._renderInputValue();break;case"text":this._strategy.textChangedHandler(e.value),this.callBase.apply(this,arguments);break;case"isValid":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"showDropDownButton":this._formatValidationIcon(),this.callBase.apply(this,arguments);break;case"readOnly":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"todayButtonText":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"invalidDateMessage":case"dateOutOfRangeMessage":case"adaptivityEnabled":case"showAnalogClock":break;default:this.callBase.apply(this,arguments)}},_getSerializationFormat:function(){var e=this.option("value");if(this.option("dateSerializationFormat")&&Ve().forceIsoDateParsing)return this.option("dateSerializationFormat");if(ue(e))return"number";if(!!L(e))return C.getDateSerializationFormat(e)},_updateValue:function(e){this.callBase(),this._applyInternalValidation(e!=null?e:this.dateOption("value"))},dateValue:function(e,t){var i=this._isValueChanged(e);return i&&t&&this._saveValueChangeEvent(t),i||(this._isTextChanged(e)?this._updateValue(e):this.option("text")===""&&this._applyCustomValidation(e)),this.dateOption("value",e)},dateOption:function(e,t){if(arguments.length===1)return C.deserializeDate(this.option(e));this.option(e,this._serializeDate(t))},_serializeDate:function(e){var t=this._getSerializationFormat();return C.serializeDate(e,t)},_clearValue:function(){var e=this.option("value");this.callBase(),e===null&&this._applyCustomValidation(null)},reset:function(){var e=this.option("value");this.callBase(),e===null&&this._applyInternalValidation(null)}}),H="dateBoxMask",k=1,$=-1,Lt=Fn.inherit({_supportedKeys(e){var t=this.callBase(e),i=n=>{var r=t[ke(n)];return r&&r.apply(this,[n])},a=(n,r)=>this._shouldUseOriginalHandler(n)?i.apply(this,[n]):r.apply(this,[n]);return _({},t,{del:n=>a(n,r=>{this._revertPart(k),this._isAllSelected()||r.preventDefault()}),backspace:n=>a(n,r=>{this._revertPart($),this._isAllSelected()||r.preventDefault()}),home:n=>a(n,r=>{this._selectFirstPart(),r.preventDefault()}),end:n=>a(n,r=>{this._selectLastPart(),r.preventDefault()}),escape:n=>a(n,r=>{this._revertChanges(r)}),enter:n=>a(n,r=>{this._enterHandler(r)}),leftArrow:n=>a(n,r=>{this._selectNextPart($),r.preventDefault()}),rightArrow:n=>a(n,r=>{this._selectNextPart(k),r.preventDefault()}),upArrow:n=>a(n,r=>{this._upDownArrowHandler(k),r.preventDefault()}),downArrow:n=>a(n,r=>{this._upDownArrowHandler($),r.preventDefault()})})},_shouldUseOriginalHandler(e){var t=this.option("opened")&&e&&["backspace","del"].indexOf(ke(e))===-1;return!this._useMaskBehavior()||t||e&&e.altKey},_upDownArrowHandler(e){this._setNewDateIfEmpty();var t=this._getActivePartValue(this._initialMaskValue),i=this._getActivePartValue(),a=i-t;this._loadMaskValue(this._initialMaskValue),this._partIncrease(a+e,!0)},_getDefaultOptions(){return _(this.callBase(),{useMaskBehavior:!1,emptyDateValue:new Date(2e3,0,1,0,0,0)})},_isSingleCharKey(e){var{originalEvent:t,alt:i}=e,a=t.data||t.key;return typeof a=="string"&&a.length===1&&!i&&!Z(t)},_isSingleDigitKey(e){var t,i=(t=e.originalEvent)===null||t===void 0?void 0:t.data;return(i==null?void 0:i.length)===1&&parseInt(i,10)},_useBeforeInputEvent:function(){return N.real().android},_keyInputHandler(e,t){var i=this._input().val();this._processInputKey(t),e.preventDefault();var a=i!==this._input().val();a&&m.trigger(this._input(),"input")},_keyboardHandler(e){var t=e.originalEvent.key,i=this.callBase(e);return!this._useMaskBehavior()||this._useBeforeInputEvent()||(ri.chrome&&e.key==="Process"&&e.code.indexOf("Digit")===0?(t=e.code.replace("Digit",""),this._processInputKey(t),this._maskInputHandler=()=>{this._renderSelectedPart()}):this._isSingleCharKey(e)&&this._keyInputHandler(e.originalEvent,t)),i},_maskBeforeInputHandler(e){this._maskInputHandler=null;var{inputType:t}=e.originalEvent;t==="insertCompositionText"&&(this._maskInputHandler=()=>{this._renderSelectedPart()});var i=t==="deleteContentBackward",a=t==="deleteContentForward";if(i||a){var n=i?$:k;this._maskInputHandler=()=>{this._revertPart(),this._selectNextPart(n)}}if(!(!this._useMaskBehavior()||!this._isSingleCharKey(e))){var r=e.originalEvent.data;return this._keyInputHandler(e,r),!0}},_keyPressHandler(e){var{originalEvent:t}=e;(t==null?void 0:t.inputType)==="insertCompositionText"&&this._isSingleDigitKey(e)&&(this._processInputKey(t.data),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()),this.callBase(e),this._maskInputHandler&&(this._maskInputHandler(),this._maskInputHandler=null)},_processInputKey(e){this._isAllSelected()&&(this._activePartIndex=0),this._setNewDateIfEmpty(),isNaN(parseInt(e))?this._searchString(e):this._searchNumber(e)},_isAllSelected(){var e=this._caret();return e.end-e.start===this.option("text").length},_getFormatPattern(){if(this._formatPattern)return this._formatPattern;var e=this._strategy.getDisplayFormat(this.option("displayFormat")),t=L(e)&&!h._getPatternByFormat(e);return t?this._formatPattern=e:this._formatPattern=si(function(i){return h.format(i,e)}),this._formatPattern},_setNewDateIfEmpty(){if(!this._maskValue){var e=this.option("type")==="time"?new Date(null):new Date;this._maskValue=e,this._initialMaskValue=e,this._renderDateParts()}},_partLimitsReached(e){var t=String(e).length,i=this._getActivePartProp("pattern").length,a=i===1,n=a?t:Math.min(i,t),r=this._searchValue.length===n,s=parseInt(this._searchValue+"0")>e;return r||s},_searchNumber(e){var{max:t}=this._getActivePartLimits(),i=String(t).length;this._searchValue=(this._searchValue+e).substr(-i),isNaN(this._searchValue)&&(this._searchValue=e),this._setActivePartValue(this._searchValue),this._partLimitsReached(t)&&this._selectNextPart(k)},_searchString(e){if(!!isNaN(parseInt(this._getActivePartProp("text")))){for(var t=this._getActivePartProp("limits")(this._maskValue),i=this._searchValue+e.toLowerCase(),a=t.max-t.min,n=0;n<=a;n++)if(this._loadMaskValue(this._initialMaskValue),this._partIncrease(n+1),this._getActivePartProp("text").toLowerCase().indexOf(i)===0){this._searchValue=i;return}this._setNewDateIfEmpty(),this._searchValue&&(this._clearSearchValue(),this._searchString(e))}},_clearSearchValue(){this._searchValue=""},_revertPart:function(e){if(!this._isAllSelected()){var t=this._getActivePartValue(this.option("emptyDateValue"));this._setActivePartValue(t),this._selectNextPart(e)}this._clearSearchValue()},_useMaskBehavior(){return this.option("useMaskBehavior")&&this.option("mode")==="text"},_prepareRegExpInfo(){this._regExpInfo=oi(this._getFormatPattern(),h);var e=this._regExpInfo.regexp,t=e.source,i=e.flags,a=new RegExp(/(\{[0-9]+,?[0-9]*\})/),n=t.split(a).map(r=>a.test(r)?r:li.convertDigits(r,!1)).join("");this._regExpInfo.regexp=new RegExp(n,i)},_initMaskState(){this._activePartIndex=0,this._formatPattern=null,this._prepareRegExpInfo(),this._loadMaskValue()},_renderMask(){this.callBase(),this._detachMaskEvents(),this._clearMaskState(),this._useMaskBehavior()&&(this._attachMaskEvents(),this._initMaskState(),this._renderDateParts())},_renderDateParts(){if(!!this._useMaskBehavior()){var e=this.option("text")||this._getDisplayedText(this._maskValue);e&&(this._dateParts=xi(e,this._regExpInfo),this._input().is(":hidden")||this._selectNextPart())}},_detachMaskEvents(){m.off(this._input(),"."+H)},_attachMaskEvents(){m.on(this._input(),b("dxclick",H),this._maskClickHandler.bind(this)),m.on(this._input(),b("paste",H),this._maskPasteHandler.bind(this)),m.on(this._input(),b("drop",H),()=>{this._renderSelectedPart()}),m.on(this._input(),b("compositionend",H),this._maskCompositionEndHandler.bind(this)),this._useBeforeInputEvent()&&m.on(this._input(),b("beforeinput",H),this._maskBeforeInputHandler.bind(this))},_renderSelectedPart(){this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()},_selectLastPart(){this.option("text")&&(this._activePartIndex=this._dateParts.length,this._selectNextPart($))},_selectFirstPart(){this.option("text")&&(this._activePartIndex=-1,this._selectNextPart(k))},_onMouseWheel(e){this._useMaskBehavior()&&this._partIncrease(e.delta>0?k:$,e)},_selectNextPart(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(!(!this.option("text")||this._disposed)){e&&(this._initialMaskValue=new Date(this._maskValue));var t=re(this._activePartIndex+e,0,this._dateParts.length-1);if(this._dateParts[t].isStub){var i=t===0&&e<0||t===this._dateParts.length-1&&e>0;if(i)t=this._activePartIndex;else{this._selectNextPart(e>=0?e+1:e-1);return}}this._activePartIndex!==t&&this._clearSearchValue(),this._activePartIndex=t,this._caret(this._getActivePartProp("caret"))}},_getRealLimitsPattern(){if(this._getActivePartProp("pattern")[0]==="d")return"dM"},_getActivePartLimits(e){var t=this._getActivePartProp("limits");return t(this._maskValue,e&&this._getRealLimitsPattern())},_getActivePartValue(e){e=e||this._maskValue;var t=this._getActivePartProp("getter");return se(t)?t(e):e[t]()},_addLeadingZeroes(e){var t=this._searchValue.match(/^0+/),i=this._getActivePartLimits(),a=String(i.max).length;return((t&&t[0]||"")+String(e)).substr(-a)},_setActivePartValue(e,t){t=t||this._maskValue;var i=this._getActivePartProp("setter"),a=this._getActivePartLimits();e=ne(e,a.min,a.max)?e:e%10,e=this._addLeadingZeroes(re(e,a.min,a.max)),se(i)?i(t,e):t[i](e),this._renderDisplayText(this._getDisplayedText(t)),this._renderDateParts()},_getActivePartProp(e){if(!(!this._dateParts||!this._dateParts[this._activePartIndex]))return this._dateParts[this._activePartIndex][e]},_loadMaskValue(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dateOption("value");this._maskValue=e&&new Date(e),this._initialMaskValue=e&&new Date(e)},_saveMaskValue(){var e=this._maskValue&&new Date(this._maskValue);e&&this.option("type")==="date"&&e.setHours(0,0,0,0),this._initialMaskValue=new Date(e),this.dateOption("value",e)},_revertChanges(){this._loadMaskValue(),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts()},_renderDisplayText(e){this.callBase(e),this._useMaskBehavior()&&this.option("text",e)},_partIncrease(e,t){this._setNewDateIfEmpty();var{max:i,min:a}=this._getActivePartLimits(t),n=i-a;n===1&&n++;var r=e+this._getActivePartValue();r>i?r=this._applyLimits(r,{limitBase:a,limitClosest:i,limitDelta:n}):r<a&&(r=this._applyLimits(r,{limitBase:i,limitClosest:a,limitDelta:n})),this._setActivePartValue(r)},_applyLimits(e,t){var{limitBase:i,limitClosest:a,limitDelta:n}=t,r=(e-a)%n;return r?i+r-1*ui(r):a},_maskClickHandler(){this._loadMaskValue(this._maskValue),this.option("text")&&(this._activePartIndex=Ai(this._dateParts,this._caret().start),this._isAllSelected()||(f(this._activePartIndex)?this._caret(this._getActivePartProp("caret")):this._selectLastPart()))},_maskCompositionEndHandler(e){this._input().val(this._getDisplayedText(this._maskValue)),this._selectNextPart(),this._maskInputHandler=()=>{this._renderSelectedPart()}},_maskPasteHandler(e){var t=this._replaceSelectedText(this.option("text"),this._caret(),hi(e)),i=h.parse(t,this._getFormatPattern());i&&this._isDateValid(i)&&(this._maskValue=i,this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts(),this._selectNextPart()),e.preventDefault()},_isDateValid:e=>B(e)&&!isNaN(e),_isValueDirty(){var e=this.dateOption("value");return(this._maskValue&&this._maskValue.getTime())!==(e&&e.getTime())},_fireChangeEvent(){this._clearSearchValue(),this._isValueDirty()&&m.trigger(this._input(),"change")},_enterHandler(e){this._fireChangeEvent(),this._selectNextPart(k),e.preventDefault()},_focusOutHandler(e){var t=this._useMaskBehavior()&&!e.isDefaultPrevented();t?(this._fireChangeEvent(),this.callBase(e),this._selectFirstPart(e)):this.callBase(e)},_valueChangeEventHandler(e){var t=this.option("text");this._useMaskBehavior()?(this._saveValueChangeEvent(e),t?this._maskValue===null&&this._loadMaskValue(t):this._maskValue=null,this._saveMaskValue()):this.callBase(e)},_optionChanged(e){switch(e.name){case"useMaskBehavior":this._renderMask();break;case"displayFormat":case"mode":this.callBase(e),this._renderMask();break;case"value":this._loadMaskValue(),this.callBase(e),this._renderDateParts();break;case"emptyDateValue":break;default:this.callBase(e)}},_clearMaskState(){this._clearSearchValue(),delete this._dateParts,delete this._activePartIndex,delete this._maskValue},reset(){this._clearMaskState(),this._activePartIndex=0,this.callBase()},_clean(){this.callBase(),this._detachMaskEvents(),this._clearMaskState()}});W("dxDateBox",Lt);var Wn=Object.freeze(Object.defineProperty({__proto__:null,default:Lt},Symbol.toStringTag,{value:"Module"}));export{F as B,Oe as C,Lt as D,bt as S,C as a,Wn as b,$n as c,o as d,Ua as e};
