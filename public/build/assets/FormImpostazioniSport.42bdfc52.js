import{al as n,as as l,o as s,k as d,l as t,u as o,w as m,c as p,y as u}from"./app.91faff10.js";import c from"./ModalSport.7e488d29.js";import{D as f,e as _,a as h,b as g,c as i,f as w,g as v,d as x}from"./data-grid.93ce6c9b.js";import{l as S}from"./check-box.3b03f7e3.js";import{_ as z}from"./plugin-vue_export-helper.21dcd24c.js";import"./response.70bff4ea.js";import"./check_box.bd4929f9.js";import"./number-box.75808b5b.js";import"./number_box.976ffa07.js";import"./radio-group.6a7b6bf0.js";import"./select_box.e8817efd.js";import"./date_box.745fde92.js";import"./draggable.67b3fe5e.js";const C={emits:["notify"],data(){return{fetching:!1,modal_sport_id:null,ricerca:null,errors:null,sport:[]}},computed:{disabledElement(){return this.fetching}},async created(){S("it-IT"),await axios.get("api/sphere/sport").then(e=>{this.sport=e.data}).catch(e=>{})},methods:{timezoneFixer(e){return n(e.value)},dateFixer(e){return l(e.value)},sportSalvato(e){this.sport.push(e),this.$refs.griglia.instance.refresh(),this.$emit("notify","success","Sport salvato con successo"),this.modal_sport_id=null},async sportModificato(){await axios.get("api/sphere/sport").then(e=>{this.sport=e.data}),this.$emit("notify","success","Sport modificato con successo"),this.modal_sport_id=null},errorFor(e){return!!(this.errors!==null&&this.errors[e])},onRowPrepared(e){e.rowElement.className+=" hover:bg-gray-300"},openContextMenu(e){e.row&&this.$refs.griglia.instance.selectRows([e.row.key]),e.items=[{visible:e.rowIndex>-1,text:"Apri",icon:"showpanel",onItemClick:()=>{this.apriSport(e.row.data.id)}},{visible:e.rowIndex>-1,text:"Elimina",icon:"trash",onItemClick:()=>{this.confermaEliminaSport(e.rowIndex)}},{text:"Nuovo",icon:"plus",onItemClick:()=>{this.nuovoSport()}}]},aggiornaRiga(e){},onRowDblClick(e){this.apriSport(e.data.id)},confermaEliminaSport(e){this.$refs.griglia.instance.option({"editing.texts.confirmDeleteMessage":"Sei sicuro di voler eliminare lo sport selezionato?"}),this.$refs.griglia.instance.deleteRow(e)},deleteSport(e){e.cancel=axios.delete(`api/sphere/sport/${e.data.id}`).then(a=>(this.$emit("notify","success","Sport eliminato"),!1)).catch(a=>(this.$emit("notify","error","Errore","Eliminazione fallita"),!0))},nuovoSport(){this.modal_sport_id="new"},apriSport(e){this.modal_sport_id=e}}},b=Object.assign(C,{__name:"FormImpostazioniSport",setup(e){return(a,r)=>(s(),d("div",null,[t(o(f),{id:"griglia",ref:"griglia","data-source":a.sport,"key-expr":"id","allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0,"column-min-width":50,"column-resizing-mode":"widget","row-alternation-enabled":!0,"show-row-lines":!0,"hover-state-enabled":!0,onContextMenuPreparing:a.openContextMenu,onRowPrepared:a.onRowPrepared,onRowDblClick:a.onRowDblClick,onRowRemoving:a.deleteSport},{default:m(()=>[t(o(_),{visible:!0,width:240,placeholder:"Cerca..."}),t(o(h),{mode:"single"}),t(o(g),{enabled:!0}),t(o(i),{"data-field":"id"}),t(o(i),{"data-field":"nome",caption:"Nome sport"}),t(o(i),{"data-field":"tipo_visita"}),t(o(i),{"data-field":"mesi_scadenza"}),t(o(i),{"data-field":"eta_minima_maschi"}),t(o(i),{"data-field":"eta_massima_maschi"}),t(o(i),{"data-field":"eta_minima_tem_maschi"}),t(o(i),{"data-field":"eta_minima_femmine"}),t(o(i),{"data-field":"eta_massima_femmine"}),t(o(i),{"data-field":"eta_minima_tem_femmine"}),t(o(i),{"data-field":"anno_di_riferimento"}),t(o(i),{"data-field":"inizio_anno_riferimento"}),t(o(i),{"data-field":"fine_anno_riferimento"}),t(o(i),{"data-field":"disabili"}),t(o(i),{"data-field":"created_at","customize-text":a.timezoneFixer},null,8,["customize-text"]),t(o(i),{"data-field":"updated_at","customize-text":a.timezoneFixer},null,8,["customize-text"]),t(o(w),{"page-size":20}),t(o(v),{visible:!0,"allowed-page-sizes":[10,20,100,"all"],"display-mode":"full","show-page-size-selector":!0,"show-info":!0,"show-navigation-buttons":!0}),t(o(x),{"row-rendering-mode":"virtual"})]),_:1},8,["data-source","onContextMenuPreparing","onRowPrepared","onRowDblClick","onRowRemoving"]),a.modal_sport_id?(s(),p(c,{key:0,"sport-id":a.modal_sport_id,onClose:r[0]||(r[0]=y=>a.modal_sport_id=null),onStore:a.sportSalvato,onUpdate:a.sportModificato},null,8,["sport-id","onStore","onUpdate"])):u("",!0)]))}});var U=z(b,[["__scopeId","data-v-71a39dfa"]]);export{U as default};
