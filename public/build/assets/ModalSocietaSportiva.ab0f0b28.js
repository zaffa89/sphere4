import{d as t,ar as f,o as n,c as v,u as s,H as g,w as d,f as o,I as w,J as c,_ as y,e as u,U as S,a as E,B as z,C as I}from"./app.ff11f486.js";import{a as m}from"./response.70bff4ea.js";import{l as C,D as r}from"./check-box.3d57f674.js";import{g as F,b4 as U,b5 as p}from"./check_box.a3b61762.js";import{D as j}from"./select-box.667df2dc.js";import"./number-box.598f1659.js";import"./text-area.170595cb.js";import"./data_source.9d9969f5.js";import"./select_box.d813d406.js";import"./number_box.ef233ea9.js";const k=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),T={class:"fixed inset-0 z-50 overflow-y-auto"},$={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},D={key:0,class:"flex justify-center items-center"},B=t("svg",{class:"animate-spin h-5 w-5 text-gray-900",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),N=[B],V={key:1},A={class:"grid grid-cols-1 sm:grid-cols-2 gap-2"},P={class:"flex flex-col gap-1"},L=t("div",{class:"relative"},[t("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[t("div",{class:"w-full border-t border-gray-300"})]),t("div",{class:"relative flex justify-center"},[t("span",{class:"bg-white px-2 text-sm text-gray-500"},"Dati anagrafici")])],-1),R={class:"flex justify-between gap-2"},H={class:"flex justify-between gap-2"},M=t("div",{class:"relative"},[t("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[t("div",{class:"w-full border-t border-gray-300"})]),t("div",{class:"relative flex justify-center"},[t("span",{class:"bg-white px-2 text-sm text-gray-500"},"Contatti")])],-1),J={class:"flex justify-between gap-2"},K={class:"flex justify-between gap-2"},O={class:"flex justify-between gap-2"},Z={class:"flex flex-col gap-1"},q=t("div",{class:"relative"},[t("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[t("div",{class:"w-full border-t border-gray-300"})]),t("div",{class:"relative flex justify-center"},[t("span",{class:"bg-white px-2 text-sm text-gray-500"},"Dati fatturazione elettronica")])],-1),G=t("div",null," SELECT NAZIONI ",-1),Q={class:"mt-5 sm:mt-6 flex flex-col sm:flex-row sm:justify-around gap-4"},W=t("button",{class:"opacity-0 absolute bottom-0"},null,-1),X={props:["societaId"],emits:["update","store","close"],data(){return{fetching:!1,saving:!1,errors:null,societaSportiva:{},strutture:[]}},computed:{disabledElement(){return this.fetching||this.saving},open(){return this.societaId!==null}},async created(){C("it-IT"),this.societaId==="new"?(this.fetching=!0,await axios.get("api/sphere/societa-sportiva/create").then(l=>{this.societaSportiva=l.data}).catch(l=>{this.$emit("close")}),this.fetching=!1):(this.fetching=!0,await axios.get(`api/sphere/societa-sportiva/${this.societaId}/edit`).then(l=>{this.societaSportiva=l.data}).catch(l=>{this.$emit("close")}),this.fetching=!1)},methods:{selezionaLocalita(l){this.societaSportiva.localita=l.selectedItem},localitaItemTemplate(l){return l?'<div class="flex gap-2"><span class="truncate capitalize">'+l.nome+'</span> <span class="uppercase">('+l.sigla_provincia+")</span></div>":"<div />"},errorFor(l){return!!(this.errors!==null&&this.errors[l])},salvaSocieta(){this.societaSportiva.id?this.update():this.store()},async update(){this.errors=null,this.saving=!0,await axios.put(`api/sphere/societa-sportiva/${this.societaSportiva.id}`,this.societaSportiva).then(l=>{this.$emit("update",l.data)}).catch(l=>{m(l)&&(this.errors=l.response.data.errors),this.saving=!1}),this.saving=!1},async store(){this.errors=null,this.saving=!0,await axios.post("api/sphere/societa-sportiva",this.societaSportiva).then(l=>{this.$emit("store",l.data)}).catch(l=>{m(l)&&(this.errors=l.response.data.errors),this.saving=!1}),this.saving=!1}}},re=Object.assign(X,{__name:"ModalSocietaSportiva",setup(l){const b=new F({store:new U({key:"id",useDefaultSearch:!1,load(e){if(e.searchValue)return axios.get(`api/sphere/ricerca-localita/nome/${e.searchValue}`).then(a=>a.data).catch(a=>{throw new Error("Errore caricamento")})},byKey:e=>axios.get(`api/sphere/localita/${e}`).then(a=>a.data).catch(a=>{throw new Error("Errore caricamento localit\xE0")}),errorHandler:e=>{console.log(e.message)}})});return(e,a)=>{const h=f("AlertErrors");return n(),v(s(g),{as:"template",show:e.open},{default:d(()=>[o(s(w),{as:"div",class:"relative z-50"},{default:d(()=>[o(s(c),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[k]),_:1}),t("div",T,[t("div",$,[o(s(c),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:d(()=>[o(s(y),{class:"relative transform rounded-lg bg-white px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-7xl sm:p-6"},{default:d(()=>[e.fetching?(n(),u("div",D,N)):(n(),u("div",V,[o(s(S),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900 text-center"},{default:d(()=>[E(z(e.societaSportiva.id?"Societ\xE0: "+e.societaSportiva.ragione_sociale:"Nuova societ\xE0 sportiva"),1)]),_:1}),t("div",A,[t("div",P,[L,o(s(r),{value:e.societaSportiva.ragione_sociale,"onUpdate:value":a[0]||(a[0]=i=>e.societaSportiva.ragione_sociale=i),label:"Ragione sociale","label-mode":"static",placeholder:"Ragione sociale societ\xE0","show-clear-button":!0,"is-valid":!e.errorFor("ragione_sociale"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),t("div",R,[o(s(r),{value:e.societaSportiva.partita_iva,"onUpdate:value":a[1]||(a[1]=i=>e.societaSportiva.partita_iva=i),label:"Partita IVA",width:"100%","label-mode":"static",placeholder:"Partita IVA","show-clear-button":!0,"is-valid":!e.errorFor("partita_iva"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),o(s(r),{value:e.societaSportiva.codice_fiscale,"onUpdate:value":a[2]||(a[2]=i=>e.societaSportiva.codice_fiscale=i),label:"Codice fiscale",width:"100%","label-mode":"static",placeholder:"Codice fiscale","show-clear-button":!0,"is-valid":!e.errorFor("codice_fiscale"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"])]),t("div",H,[o(s(r),{value:e.societaSportiva.nome,"onUpdate:value":a[3]||(a[3]=i=>e.societaSportiva.nome=i),label:"Indirizzo",width:"100%","label-mode":"static",placeholder:"Indirizzo","show-clear-button":!0,"is-valid":!e.errorFor("indirizzo"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),o(s(r),{value:e.societaSportiva.civico,"onUpdate:value":a[4]||(a[4]=i=>e.societaSportiva.civico=i),label:"Civico","label-mode":"static",placeholder:"Civico","show-clear-button":!0,"is-valid":!e.errorFor("civico"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"])]),o(s(j),{value:e.societaSportiva.localita_id,"onUpdate:value":a[5]||(a[5]=i=>e.societaSportiva.localita_id=i),"data-source":s(b),"value-expr":"id","display-expr":"nome","search-enabled":!0,"search-timeout":500,"min-search-length":2,"open-on-field-click":!1,label:"Localita","label-mode":"static",placeholder:"Localita","no-data-text":"Nessuna localit\xE0 trovata",disabled:e.disabledElement,"drop-down-options":{maxHeight:"200px"},"item-template":e.localitaItemTemplate,"on-selection-changed":e.selezionaLocalita,"is-valid":!e.errorFor("localita_id")&&!e.errorFor("codice_catastale")},null,8,["value","data-source","disabled","item-template","on-selection-changed","is-valid"]),M,t("div",J,[o(s(r),{value:e.societaSportiva.telefono,"onUpdate:value":a[6]||(a[6]=i=>e.societaSportiva.telefono=i),label:"Telefono",width:"100%","label-mode":"static",placeholder:"Telefono","show-clear-button":!0,"is-valid":!e.errorFor("telefono"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),o(s(r),{value:e.societaSportiva.email,"onUpdate:value":a[7]||(a[7]=i=>e.societaSportiva.email=i),label:"Indirizzo Email",width:"100%","label-mode":"static",placeholder:"Indirizzo email","show-clear-button":!0,"is-valid":!e.errorFor("email"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"])]),t("div",K,[o(s(r),{value:e.societaSportiva.responsabile,"onUpdate:value":a[8]||(a[8]=i=>e.societaSportiva.responsabile=i),label:"Responsabile",width:"100%","label-mode":"static",placeholder:"Cognome e nome","show-clear-button":!0,"is-valid":!e.errorFor("responsabile"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),o(s(r),{value:e.societaSportiva.responsabile_telefono,"onUpdate:value":a[9]||(a[9]=i=>e.societaSportiva.responsabile_telefono=i),label:"Telefono Responsabile",width:"100%","label-mode":"static",placeholder:"Telefono","show-clear-button":!0,"is-valid":!e.errorFor("responsabile_telefono"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),o(s(r),{value:e.societaSportiva.responsabile_email,"onUpdate:value":a[10]||(a[10]=i=>e.societaSportiva.responsabile_email=i),label:"Indirizzo Email Responsabile",width:"100%","label-mode":"static",placeholder:"Indirizzo email","show-clear-button":!0,"is-valid":!e.errorFor("responsabile_email"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"])]),t("div",O,[o(s(r),{value:e.societaSportiva.presidente,"onUpdate:value":a[11]||(a[11]=i=>e.societaSportiva.presidente=i),label:"Presidente",width:"100%","label-mode":"static",placeholder:"Indirizzo email","show-clear-button":!0,"is-valid":!e.errorFor("presidente"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),o(s(r),{value:e.societaSportiva.presidente_telefono,"onUpdate:value":a[12]||(a[12]=i=>e.societaSportiva.presidente_telefono=i),label:"Telefono Presidente",width:"100%","label-mode":"static",placeholder:"Telefono","show-clear-button":!0,"is-valid":!e.errorFor("presidente_telefono"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),o(s(r),{value:e.societaSportiva.presidente_email,"onUpdate:value":a[13]||(a[13]=i=>e.societaSportiva.presidente_email=i),label:"Indirizzo Email Presidente",width:"100%","label-mode":"static",placeholder:"Indirizzo email","show-clear-button":!0,"is-valid":!e.errorFor("presidente_email"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"])])]),t("div",Z,[q,o(s(r),{value:e.societaSportiva.pec,"onUpdate:value":a[14]||(a[14]=i=>e.societaSportiva.pec=i),label:"Indirizzo PEC",width:"100%","label-mode":"static",placeholder:"Indirizzo PEC","show-clear-button":!0,"is-valid":!e.errorFor("pec"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),o(s(r),{value:e.societaSportiva.codice_destinatario,"onUpdate:value":a[15]||(a[15]=i=>e.societaSportiva.codice_destinatario=i),label:"Codice destinatario",width:"100%","label-mode":"static",placeholder:"Codice destinatario","show-clear-button":!0,"is-valid":!e.errorFor("codice_destinatario"),disabled:e.disabledElement},null,8,["value","is-valid","disabled"]),G,o(s(p),{width:"100%",height:"80px",text:"Allegati",type:"normal",icon:"activefolder","styling-mode":"contained",disabled:!1})])]),t("div",Q,[o(s(p),{width:"100%",text:"Chiudi",type:"danger",icon:"close","styling-mode":"contained",disabled:e.saving,onClick:a[16]||(a[16]=i=>e.$emit("close"))},null,8,["disabled"]),o(s(p),{id:"saveButton",width:"100%",text:e.saving?"Salvataggio...":e.disabledElement?"Non modificabile":"Salva modifiche",icon:"save",type:"success","styling-mode":"contained",disabled:e.disabledElement||e.saving,onClick:a[17]||(a[17]=i=>e.salvaSocieta())},null,8,["text","disabled"])])]))]),_:1})]),_:1})])]),W,e.errors?(n(),v(h,{key:0,errors:e.errors},null,8,["errors"])):I("",!0)]),_:1})]),_:1},8,["show"])}}});export{re as default};
